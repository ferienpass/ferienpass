{% extends "@FerienpassAdmin/layout/list.html.twig" %}
{% trans_default_domain 'admin' %}
{% set translationPrefix = app.request.get('_route')|split('_')[1] %}
{% set action = app.request.get('_route')|split('_')[2] %}
{% import "@FerienpassAdmin/components/content_elements.html.twig" as partials %}

{% block list %}

    {% if 'ROLE_HOST' == role %}
        {% set columns = {
            name: '{{ item.name }}',
            email: '{{ item.email }}',
            hosts: '{{ item.hosts|map(u => "#{u.name}")|join(", ") }}'
        } %}
    {% elseif 'ROLE_MEMBER' == role %}
        {% set columns = {
            name: '{{ item.name }}',
            email: '{{ item.email }}',
            participants: '{{ item.participants|map(u => "#{u.name}")|join(", ") }}'
        } %}
    {% else %}
        {% set columns = {
            name: '{{ item.name }}',
            email: '{{ item.email }}',
        } %}
    {% endif %}

    {{ component('SearchableQueryableList', { qb: qb, originalRoute: app.request.get('_route'), originalQuery: app.request.query.all,
        searchable: searchable,
        config: {
            columns: columns
        },

    }) }}
{% endblock %}
