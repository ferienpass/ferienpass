<?xml version="1.0" encoding="UTF-8" ?>
<container xmlns="http://symfony.com/schema/dic/services"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:schemaLocation="http://symfony.com/schema/dic/services https://symfony.com/schema/dic/services/services-1.0.xsd">

    <services>
        <defaults autoconfigure="true">
            <tag name="ferienpass.fragment"/>
        </defaults>

        <instanceof id="Symfony\Bundle\FrameworkBundle\Controller\AbstractController">
            <call method="setContainer">
                <argument type="service" id="service_container"/>
            </call>
        </instanceof>

        <service id="Ferienpass\CoreBundle\Controller\Fragment\OfferDetailsController">
            <argument>%kernel.project_dir%</argument>
        </service>
        <service id="Ferienpass\CoreBundle\Controller\Fragment\ParticipantsController">
            <argument type="service" id="Ferienpass\CoreBundle\Repository\ParticipantRepository"/>
            <argument type="service" id="doctrine"/>
            <tag name="ferienpass.user_account" key="participants" alias="teilnehmer" icon="user-group"/>
        </service>
        <service id="Ferienpass\CoreBundle\Controller\Fragment\HostDetailsController">
            <argument type="service" id="Ferienpass\CoreBundle\Repository\OfferRepository"/>
            <argument type="service" id="Ferienpass\CoreBundle\Repository\EditionRepository"/>
        </service>
        <service id="Ferienpass\CoreBundle\Controller\Fragment\Error404"/>
        <service id="Ferienpass\CoreBundle\Controller\Fragment\AccountDeletedController"/>
        <service id="Ferienpass\CoreBundle\Controller\Fragment\ArticleController"/>
        <service id="Ferienpass\CoreBundle\Controller\Fragment\RegistrationConfirm"/>
        <service id="Ferienpass\CoreBundle\Controller\Fragment\LostPasswordConfirmController"/>
        <service id="Ferienpass\CoreBundle\Controller\Fragment\RegistrationWelcomeController">
            <argument type="service" id="doctrine"/>
        </service>
        <service id="Ferienpass\CoreBundle\Controller\Fragment\Error403"/>
        <service id="Ferienpass\CoreBundle\Controller\Fragment\NotificationsController"/>
        <service id="Ferienpass\CoreBundle\Controller\Fragment\PersonalDataController">
            <tag name="ferienpass.user_account" key="personal_data" alias="persönliche-daten" icon="user-circle" />
        </service>
        <service id="Ferienpass\CoreBundle\Controller\Fragment\ChangePasswordController">
            <argument type="expression">service('security.password_hasher_factory').getPasswordHasher('Contao\\FrontendUser')</argument>
            <argument type="service" id="security.helper"/>
            <tag name="ferienpass.user_account" key="change_password" alias="passwort-ändern" icon="lock-closed" />
        </service>
        <service id="Ferienpass\CoreBundle\Controller\Fragment\SignInController">
            <argument type="expression">service('security.password_hasher_factory').getPasswordHasher('Contao\\FrontendUser')</argument>
            <argument type="service" id="security.authentication_utils"/>
            <argument type="service" id="messenger.default_bus"/>
            <argument type="service" id="event_dispatcher"/>
            <argument type="service" id="Ferienpass\CoreBundle\Repository\ParticipantRepository"/>
            <argument type="service" id="doctrine"/>
        </service>
        <service id="Ferienpass\CoreBundle\Controller\Fragment\CloseAccount">
            <argument type="service" id="security.user_password_hasher"/>
            <argument type="service" id="logger"/>
            <argument type="service" id="messenger.default_bus"/>
            <tag name="monolog.logger" channel="ferienpass"/>
            <tag name="ferienpass.user_account" key="close_account" alias="account-löschen" icon="trash" />
        </service>
        <service id="Ferienpass\CoreBundle\Controller\Fragment\RegistrationActivateController">
            <argument type="service" id="contao.security.frontend_user_provider"/>
            <argument type="service" id="security.token_storage"/>
            <argument type="service" id="logger"/>
            <argument type="service" id="event_dispatcher"/>
            <argument type="service" id="contao.security.user_checker"/>
            <argument type="service" id="contao.security.authentication_success_handler"/>
            <argument type="service" id="contao.opt_in"/>
            <argument type="service" id="contao.security.token_checker"/>
            <tag name="monolog.logger" channel="ferienpass"/>
            <argument type="service" id="messenger.default_bus"/>
        </service>
        <service id="Ferienpass\CoreBundle\Controller\Fragment\Error401">
            <argument type="service" id="Ferienpass\CoreBundle\Repository\EditionRepository"/>
        </service>
        <service id="Ferienpass\CoreBundle\Controller\Fragment\OfferListFilterController">
            <argument type="service" id="Ferienpass\CoreBundle\Repository\EditionRepository"/>
        </service>
        <service id="Ferienpass\CoreBundle\Controller\Fragment\OfferListController">
            <argument type="service" id="Ferienpass\CoreBundle\Repository\EditionRepository"/>
            <argument type="service" id="Ferienpass\CoreBundle\Repository\OfferRepository"/>
            <argument type="service" id="Ferienpass\CoreBundle\Filter\OfferListFilterFactory"/>
        </service>
        <service id="Ferienpass\CoreBundle\Controller\Fragment\ApplicationFormController">
            <argument type="service" id="Ferienpass\CoreBundle\ApplicationSystem\ApplicationSystems"/>
            <argument type="service" id="Ferienpass\CoreBundle\Facade\AttendanceFacade"/>
            <argument type="service" id="Ferienpass\CoreBundle\Repository\AttendanceRepository"/>
            <argument type="service" id="doctrine"/>
            <argument type="service" id="contao.opt_in"/>
        </service>
        <service id="Ferienpass\CoreBundle\Controller\Fragment\ApplicationListController">
            <argument type="service" id="Ferienpass\CoreBundle\ApplicationSystem\ApplicationSystems"/>
            <argument type="service" id="Ferienpass\CoreBundle\Facade\AttendanceFacade"/>
            <argument type="service" id="Ferienpass\CoreBundle\Repository\AttendanceRepository"/>
        </service>
        <service id="Ferienpass\CoreBundle\Controller\Fragment\LostPasswordController">
            <argument type="service" id="logger"/>
            <argument type="service" id="contao.opt_in"/>
            <tag name="monolog.logger" channel="ferienpass"/>
            <argument type="expression">service('security.password_hasher_factory').getPasswordHasher('Contao\\FrontendUser')</argument>
        </service>

    </services>
</container>