/*! For license information please see main.js.LICENSE.txt */
(()=>{"use strict";var t,e,i,n,s=!1,a=!1,r=[];function o(t){!function(t){r.includes(t)||r.push(t);a||s||(s=!0,queueMicrotask(h))}(t)}function l(t){let e=r.indexOf(t);-1!==e&&r.splice(e,1)}function h(){s=!1,a=!0;for(let t=0;t<r.length;t++)r[t]();r.length=0,a=!1}var c=!0;function d(t){e=t}var u=[],p=[],f=[];function g(t,e){"function"==typeof e?(t._x_cleanups||(t._x_cleanups=[]),t._x_cleanups.push(e)):(e=t,p.push(e))}function m(t,e){t._x_attributeCleanups&&Object.entries(t._x_attributeCleanups).forEach((([i,n])=>{(void 0===e||e.includes(i))&&(n.forEach((t=>t())),delete t._x_attributeCleanups[i])}))}var _=new MutationObserver(D),v=!1;function b(){_.observe(document,{subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0}),v=!0}function y(){(x=x.concat(_.takeRecords())).length&&!w&&(w=!0,queueMicrotask((()=>{D(x),x.length=0,w=!1}))),_.disconnect(),v=!1}var x=[],w=!1;function E(t){if(!v)return t();y();let e=t();return b(),e}var k=!1,A=[];function D(t){if(k)return void(A=A.concat(t));let e=[],i=[],n=new Map,s=new Map;for(let a=0;a<t.length;a++)if(!t[a].target._x_ignoreMutationObserver&&("childList"===t[a].type&&(t[a].addedNodes.forEach((t=>1===t.nodeType&&e.push(t))),t[a].removedNodes.forEach((t=>1===t.nodeType&&i.push(t)))),"attributes"===t[a].type)){let e=t[a].target,i=t[a].attributeName,r=t[a].oldValue,o=()=>{n.has(e)||n.set(e,[]),n.get(e).push({name:i,value:e.getAttribute(i)})},l=()=>{s.has(e)||s.set(e,[]),s.get(e).push(i)};e.hasAttribute(i)&&null===r?o():e.hasAttribute(i)?(l(),o()):l()}s.forEach(((t,e)=>{m(e,t)})),n.forEach(((t,e)=>{u.forEach((i=>i(e,t)))}));for(let t of i)if(!e.includes(t)&&(p.forEach((e=>e(t))),t._x_cleanups))for(;t._x_cleanups.length;)t._x_cleanups.pop()();e.forEach((t=>{t._x_ignoreSelf=!0,t._x_ignore=!0}));for(let t of e)i.includes(t)||t.isConnected&&(delete t._x_ignoreSelf,delete t._x_ignore,f.forEach((e=>e(t))),t._x_ignore=!0,t._x_ignoreSelf=!0);e.forEach((t=>{delete t._x_ignoreSelf,delete t._x_ignore})),e=null,i=null,n=null,s=null}function M(t){return $(T(t))}function S(t,e,i){return t._x_dataStack=[e,...T(i||t)],()=>{t._x_dataStack=t._x_dataStack.filter((t=>t!==e))}}function C(t,e){let i=t._x_dataStack[0];Object.entries(e).forEach((([t,e])=>{i[t]=e}))}function T(t){return t._x_dataStack?t._x_dataStack:"function"==typeof ShadowRoot&&t instanceof ShadowRoot?T(t.host):t.parentNode?T(t.parentNode):[]}function $(t){let e=new Proxy({},{ownKeys:()=>Array.from(new Set(t.flatMap((t=>Object.keys(t))))),has:(e,i)=>t.some((t=>t.hasOwnProperty(i))),get:(i,n)=>(t.find((t=>{if(t.hasOwnProperty(n)){let i=Object.getOwnPropertyDescriptor(t,n);if(i.get&&i.get._x_alreadyBound||i.set&&i.set._x_alreadyBound)return!0;if((i.get||i.set)&&i.enumerable){let s=i.get,a=i.set,r=i;s=s&&s.bind(e),a=a&&a.bind(e),s&&(s._x_alreadyBound=!0),a&&(a._x_alreadyBound=!0),Object.defineProperty(t,n,{...r,get:s,set:a})}return!0}return!1}))||{})[n],set:(e,i,n)=>{let s=t.find((t=>t.hasOwnProperty(i)));return s?s[i]=n:t[t.length-1][i]=n,!0}});return e}function O(t){let e=(i,n="")=>{Object.entries(Object.getOwnPropertyDescriptors(i)).forEach((([s,{value:a,enumerable:r}])=>{if(!1===r||void 0===a)return;let o=""===n?s:`${n}.${s}`;var l;"object"==typeof a&&null!==a&&a._x_interceptor?i[s]=a.initialize(t,o,s):"object"!=typeof(l=a)||Array.isArray(l)||null===l||a===i||a instanceof Element||e(a,o)}))};return e(t)}function N(t,e=(()=>{})){let i={initialValue:void 0,_x_interceptor:!0,initialize(e,i,n){return t(this.initialValue,(()=>function(t,e){return e.split(".").reduce(((t,e)=>t[e]),t)}(e,i)),(t=>L(e,i,t)),i,n)}};return e(i),t=>{if("object"==typeof t&&null!==t&&t._x_interceptor){let e=i.initialize.bind(i);i.initialize=(n,s,a)=>{let r=t.initialize(n,s,a);return i.initialValue=r,e(n,s,a)}}else i.initialValue=t;return i}}function L(t,e,i){if("string"==typeof e&&(e=e.split(".")),1!==e.length){if(0===e.length)throw error;return t[e[0]]||(t[e[0]]={}),L(t[e[0]],e.slice(1),i)}t[e[0]]=i}var P={};function I(t,e){P[t]=e}function Y(t,e){return Object.entries(P).forEach((([i,n])=>{Object.defineProperty(t,`$${i}`,{get(){let[t,i]=tt(e);return t={interceptor:N,...t},g(e,i),n(e,t)},enumerable:!1})})),t}function H(t,e,i,...n){try{return i(...n)}catch(i){R(i,t,e)}}function R(t,e,i){Object.assign(t,{el:e,expression:i}),console.warn(`Alpine Expression Error: ${t.message}\n\n${i?'Expression: "'+i+'"\n\n':""}`,e),setTimeout((()=>{throw t}),0)}function W(t,e,i={}){let n;return j(t,e)((t=>n=t),i),n}function j(...t){return z(...t)}var z=F;function F(t,e){let i={};Y(i,t);let n=[i,...T(t)];if("function"==typeof e)return function(t,e){return(i=(()=>{}),{scope:n={},params:s=[]}={})=>{X(i,e.apply($([n,...t]),s))}}(n,e);let s=function(t,e,i){let n=function(t,e){if(B[t])return B[t];let i=Object.getPrototypeOf((async function(){})).constructor,n=/^[\n\s]*if.*\(.*\)/.test(t)||/^(let|const)\s/.test(t)?`(() => { ${t} })()`:t;let s=(()=>{try{return new i(["__self","scope"],`with (scope) { __self.result = ${n} }; __self.finished = true; return __self.result;`)}catch(i){return R(i,e,t),Promise.resolve()}})();return B[t]=s,s}(e,i);return(s=(()=>{}),{scope:a={},params:r=[]}={})=>{n.result=void 0,n.finished=!1;let o=$([a,...t]);if("function"==typeof n){let t=n(n,o).catch((t=>R(t,i,e)));n.finished?(X(s,n.result,o,r,i),n.result=void 0):t.then((t=>{X(s,t,o,r,i)})).catch((t=>R(t,i,e))).finally((()=>n.result=void 0))}}}(n,e,t);return H.bind(null,t,e,s)}var B={};function X(t,e,i,n,s){if("function"==typeof e){let a=e.apply(i,n);a instanceof Promise?a.then((e=>X(t,e,i,n))).catch((t=>R(t,s,e))):t(a)}else t(e)}var V="x-";function q(t=""){return V+t}var U={};function G(t,e){U[t]=e}function K(t,e,i){let n={},s=Array.from(e).map(it(((t,e)=>n[t]=e))).filter(at).map(function(t,e){return({name:i,value:n})=>{let s=i.match(rt()),a=i.match(/:([a-zA-Z0-9\-:]+)/),r=i.match(/\.[^.\]]+(?=[^\]]*$)/g)||[],o=e||t[i]||i;return{type:s?s[1]:null,value:a?a[1]:null,modifiers:r.map((t=>t.replace(".",""))),expression:n,original:o}}}(n,i)).sort(ht);return s.map((e=>function(t,e){let i=()=>{},n=U[e.type]||i,[s,a]=tt(t);!function(t,e,i){t._x_attributeCleanups||(t._x_attributeCleanups={}),t._x_attributeCleanups[e]||(t._x_attributeCleanups[e]=[]),t._x_attributeCleanups[e].push(i)}(t,e.original,a);let r=()=>{t._x_ignore||t._x_ignoreSelf||(n.inline&&n.inline(t,e,s),n=n.bind(n,t,e,s),J?Q.get(Z).push(n):n())};return r.runCleanups=a,r}(t,e)))}var J=!1,Q=new Map,Z=Symbol();function tt(t){let n=[],[s,a]=function(t){let n=()=>{};return[s=>{let a=e(s);return t._x_effects||(t._x_effects=new Set,t._x_runEffects=()=>{t._x_effects.forEach((t=>t()))}),t._x_effects.add(a),n=()=>{void 0!==a&&(t._x_effects.delete(a),i(a))},a},()=>{n()}]}(t);n.push(a);return[{Alpine:Xt,effect:s,cleanup:t=>n.push(t),evaluateLater:j.bind(j,t),evaluate:W.bind(W,t)},()=>n.forEach((t=>t()))]}var et=(t,e)=>({name:i,value:n})=>(i.startsWith(t)&&(i=i.replace(t,e)),{name:i,value:n});function it(t=(()=>{})){return({name:e,value:i})=>{let{name:n,value:s}=nt.reduce(((t,e)=>e(t)),{name:e,value:i});return n!==e&&t(n,e),{name:n,value:s}}}var nt=[];function st(t){nt.push(t)}function at({name:t}){return rt().test(t)}var rt=()=>new RegExp(`^${V}([^:^.]+)\\b`);var ot="DEFAULT",lt=["ignore","ref","data","id","bind","init","for","model","modelable","transition","show","if",ot,"teleport","element"];function ht(t,e){let i=-1===lt.indexOf(t.type)?ot:t.type,n=-1===lt.indexOf(e.type)?ot:e.type;return lt.indexOf(i)-lt.indexOf(n)}function ct(t,e,i={}){t.dispatchEvent(new CustomEvent(e,{detail:i,bubbles:!0,composed:!0,cancelable:!0}))}var dt=[],ut=!1;function pt(t){dt.push(t),queueMicrotask((()=>{ut||setTimeout((()=>{ft()}))}))}function ft(){for(ut=!1;dt.length;)dt.shift()()}function gt(t,e){if("function"==typeof ShadowRoot&&t instanceof ShadowRoot)return void Array.from(t.children).forEach((t=>gt(t,e)));let i=!1;if(e(t,(()=>i=!0)),i)return;let n=t.firstElementChild;for(;n;)gt(n,e),n=n.nextElementSibling}function mt(t,...e){console.warn(`Alpine Warning: ${t}`,...e)}var _t=[],vt=[];function bt(){return _t.map((t=>t()))}function yt(){return _t.concat(vt).map((t=>t()))}function xt(t){_t.push(t)}function wt(t){vt.push(t)}function Et(t,e=!1){return kt(t,(t=>{if((e?yt():bt()).some((e=>t.matches(e))))return!0}))}function kt(t,e){if(t){if(e(t))return t;if(t._x_teleportBack&&(t=t._x_teleportBack),t.parentElement)return kt(t.parentElement,e)}}function At(t,e=gt){!function(t){J=!0;let e=Symbol();Z=e,Q.set(e,[]);let i=()=>{for(;Q.get(e).length;)Q.get(e).shift()();Q.delete(e)};t(i),J=!1,i()}((()=>{e(t,((t,e)=>{K(t,t.attributes).forEach((t=>t())),t._x_ignore&&e()}))}))}function Dt(t,e){return Array.isArray(e)?Mt(t,e.join(" ")):"object"==typeof e&&null!==e?function(t,e){let i=t=>t.split(" ").filter(Boolean),n=Object.entries(e).flatMap((([t,e])=>!!e&&i(t))).filter(Boolean),s=Object.entries(e).flatMap((([t,e])=>!e&&i(t))).filter(Boolean),a=[],r=[];return s.forEach((e=>{t.classList.contains(e)&&(t.classList.remove(e),r.push(e))})),n.forEach((e=>{t.classList.contains(e)||(t.classList.add(e),a.push(e))})),()=>{r.forEach((e=>t.classList.add(e))),a.forEach((e=>t.classList.remove(e)))}}(t,e):"function"==typeof e?Dt(t,e()):Mt(t,e)}function Mt(t,e){return e=!0===e?e="":e||"",i=e.split(" ").filter((e=>!t.classList.contains(e))).filter(Boolean),t.classList.add(...i),()=>{t.classList.remove(...i)};var i}function St(t,e){return"object"==typeof e&&null!==e?function(t,e){let i={};return Object.entries(e).forEach((([e,n])=>{i[e]=t.style[e],e.startsWith("--")||(e=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()),t.style.setProperty(e,n)})),setTimeout((()=>{0===t.style.length&&t.removeAttribute("style")})),()=>{St(t,i)}}(t,e):function(t,e){let i=t.getAttribute("style",e);return t.setAttribute("style",e),()=>{t.setAttribute("style",i||"")}}(t,e)}function Ct(t,e=(()=>{})){let i=!1;return function(){i?e.apply(this,arguments):(i=!0,t.apply(this,arguments))}}function Tt(t,e,i={}){t._x_transition||(t._x_transition={enter:{during:i,start:i,end:i},leave:{during:i,start:i,end:i},in(i=(()=>{}),n=(()=>{})){Ot(t,e,{during:this.enter.during,start:this.enter.start,end:this.enter.end},i,n)},out(i=(()=>{}),n=(()=>{})){Ot(t,e,{during:this.leave.during,start:this.leave.start,end:this.leave.end},i,n)}})}function $t(t){let e=t.parentNode;if(e)return e._x_hidePromise?e:$t(e)}function Ot(t,e,{during:i,start:n,end:s}={},a=(()=>{}),r=(()=>{})){if(t._x_transitioning&&t._x_transitioning.cancel(),0===Object.keys(i).length&&0===Object.keys(n).length&&0===Object.keys(s).length)return a(),void r();let o,l,h;!function(t,e){let i,n,s,a=Ct((()=>{E((()=>{i=!0,n||e.before(),s||(e.end(),ft()),e.after(),t.isConnected&&e.cleanup(),delete t._x_transitioning}))}));t._x_transitioning={beforeCancels:[],beforeCancel(t){this.beforeCancels.push(t)},cancel:Ct((function(){for(;this.beforeCancels.length;)this.beforeCancels.shift()();a()})),finish:a},E((()=>{e.start(),e.during()})),ut=!0,requestAnimationFrame((()=>{if(i)return;let a=1e3*Number(getComputedStyle(t).transitionDuration.replace(/,.*/,"").replace("s","")),r=1e3*Number(getComputedStyle(t).transitionDelay.replace(/,.*/,"").replace("s",""));0===a&&(a=1e3*Number(getComputedStyle(t).animationDuration.replace("s",""))),E((()=>{e.before()})),n=!0,requestAnimationFrame((()=>{i||(E((()=>{e.end()})),ft(),setTimeout(t._x_transitioning.finish,a+r),s=!0)}))}))}(t,{start(){o=e(t,n)},during(){l=e(t,i)},before:a,end(){o(),h=e(t,s)},after:r,cleanup(){l(),h()}})}function Nt(t,e,i){if(-1===t.indexOf(e))return i;const n=t[t.indexOf(e)+1];if(!n)return i;if("scale"===e&&isNaN(n))return i;if("duration"===e){let t=n.match(/([0-9]+)ms/);if(t)return t[1]}return"origin"===e&&["top","right","left","center","bottom"].includes(t[t.indexOf(e)+2])?[n,t[t.indexOf(e)+2]].join(" "):n}G("transition",((t,{value:e,modifiers:i,expression:n},{evaluate:s})=>{"function"==typeof n&&(n=s(n)),n?function(t,e,i){Tt(t,Dt,""),{enter:e=>{t._x_transition.enter.during=e},"enter-start":e=>{t._x_transition.enter.start=e},"enter-end":e=>{t._x_transition.enter.end=e},leave:e=>{t._x_transition.leave.during=e},"leave-start":e=>{t._x_transition.leave.start=e},"leave-end":e=>{t._x_transition.leave.end=e}}[i](e)}(t,n,e):function(t,e,i){Tt(t,St);let n=!e.includes("in")&&!e.includes("out")&&!i,s=n||e.includes("in")||["enter"].includes(i),a=n||e.includes("out")||["leave"].includes(i);e.includes("in")&&!n&&(e=e.filter(((t,i)=>i<e.indexOf("out"))));e.includes("out")&&!n&&(e=e.filter(((t,i)=>i>e.indexOf("out"))));let r=!e.includes("opacity")&&!e.includes("scale"),o=r||e.includes("opacity"),l=r||e.includes("scale"),h=o?0:1,c=l?Nt(e,"scale",95)/100:1,d=Nt(e,"delay",0),u=Nt(e,"origin","center"),p="opacity, transform",f=Nt(e,"duration",150)/1e3,g=Nt(e,"duration",75)/1e3,m="cubic-bezier(0.4, 0.0, 0.2, 1)";s&&(t._x_transition.enter.during={transformOrigin:u,transitionDelay:d,transitionProperty:p,transitionDuration:`${f}s`,transitionTimingFunction:m},t._x_transition.enter.start={opacity:h,transform:`scale(${c})`},t._x_transition.enter.end={opacity:1,transform:"scale(1)"});a&&(t._x_transition.leave.during={transformOrigin:u,transitionDelay:d,transitionProperty:p,transitionDuration:`${g}s`,transitionTimingFunction:m},t._x_transition.leave.start={opacity:1,transform:"scale(1)"},t._x_transition.leave.end={opacity:h,transform:`scale(${c})`})}(t,i,e)})),window.Element.prototype._x_toggleAndCascadeWithTransitions=function(t,e,i,n){let s=()=>{"visible"===document.visibilityState?requestAnimationFrame(i):setTimeout(i)};e?t._x_transition&&(t._x_transition.enter||t._x_transition.leave)?t._x_transition.enter&&(Object.entries(t._x_transition.enter.during).length||Object.entries(t._x_transition.enter.start).length||Object.entries(t._x_transition.enter.end).length)?t._x_transition.in(i):s():t._x_transition?t._x_transition.in(i):s():(t._x_hidePromise=t._x_transition?new Promise(((e,i)=>{t._x_transition.out((()=>{}),(()=>e(n))),t._x_transitioning.beforeCancel((()=>i({isFromCancelledTransition:!0})))})):Promise.resolve(n),queueMicrotask((()=>{let e=$t(t);e?(e._x_hideChildren||(e._x_hideChildren=[]),e._x_hideChildren.push(t)):queueMicrotask((()=>{let e=t=>{let i=Promise.all([t._x_hidePromise,...(t._x_hideChildren||[]).map(e)]).then((([t])=>t()));return delete t._x_hidePromise,delete t._x_hideChildren,i};e(t).catch((t=>{if(!t.isFromCancelledTransition)throw t}))}))})))};var Lt=!1;function Pt(t,e=(()=>{})){return(...i)=>Lt?e(...i):t(...i)}function It(e,i,n,s=[]){switch(e._x_bindings||(e._x_bindings=t({})),e._x_bindings[i]=n,i=s.includes("camel")?i.toLowerCase().replace(/-(\w)/g,((t,e)=>e.toUpperCase())):i){case"value":!function(t,e){if("radio"===t.type)void 0===t.attributes.value&&(t.value=e),window.fromModel&&(t.checked=Yt(t.value,e));else if("checkbox"===t.type)Number.isInteger(e)?t.value=e:Number.isInteger(e)||Array.isArray(e)||"boolean"==typeof e||[null,void 0].includes(e)?Array.isArray(e)?t.checked=e.some((e=>Yt(e,t.value))):t.checked=!!e:t.value=String(e);else if("SELECT"===t.tagName)!function(t,e){const i=[].concat(e).map((t=>t+""));Array.from(t.options).forEach((t=>{t.selected=i.includes(t.value)}))}(t,e);else{if(t.value===e)return;t.value=e}}(e,n);break;case"style":!function(t,e){t._x_undoAddedStyles&&t._x_undoAddedStyles();t._x_undoAddedStyles=St(t,e)}(e,n);break;case"class":!function(t,e){t._x_undoAddedClasses&&t._x_undoAddedClasses();t._x_undoAddedClasses=Dt(t,e)}(e,n);break;default:!function(t,e,i){[null,void 0,!1].includes(i)&&function(t){return!["aria-pressed","aria-checked","aria-expanded","aria-selected"].includes(t)}(e)?t.removeAttribute(e):(Ht(e)&&(i=e),function(t,e,i){t.getAttribute(e)!=i&&t.setAttribute(e,i)}(t,e,i))}(e,i,n)}}function Yt(t,e){return t==e}function Ht(t){return["disabled","checked","required","readonly","hidden","open","selected","autofocus","itemscope","multiple","novalidate","allowfullscreen","allowpaymentrequest","formnovalidate","autoplay","controls","loop","muted","playsinline","default","ismap","reversed","async","defer","nomodule"].includes(t)}function Rt(t,e){var i;return function(){var n=this,s=arguments,a=function(){i=null,t.apply(n,s)};clearTimeout(i),i=setTimeout(a,e)}}function Wt(t,e){let i;return function(){let n=this,s=arguments;i||(t.apply(n,s),i=!0,setTimeout((()=>i=!1),e))}}var jt={},zt=!1;var Ft={};var Bt={};var Xt={get reactive(){return t},get release(){return i},get effect(){return e},get raw(){return n},version:"3.9.6",flushAndStopDeferringMutations:function(){k=!1,D(A),A=[]},disableEffectScheduling:function(t){c=!1,t(),c=!0},setReactivityEngine:function(s){t=s.reactive,i=s.release,e=t=>s.effect(t,{scheduler:t=>{c?o(t):t()}}),n=s.raw},closestDataStack:T,skipDuringClone:Pt,addRootSelector:xt,addInitSelector:wt,addScopeToNode:S,deferMutations:function(){k=!0},mapAttributes:st,evaluateLater:j,setEvaluator:function(t){z=t},mergeProxies:$,findClosest:kt,closestRoot:Et,interceptor:N,transition:Ot,setStyles:St,mutateDom:E,directive:G,throttle:Wt,debounce:Rt,evaluate:W,initTree:At,nextTick:pt,prefixed:q,prefix:function(t){V=t},plugin:function(t){t(Xt)},magic:I,store:function(e,i){if(zt||(jt=t(jt),zt=!0),void 0===i)return jt[e];jt[e]=i,"object"==typeof i&&null!==i&&i.hasOwnProperty("init")&&"function"==typeof i.init&&jt[e].init(),O(jt[e])},start:function(){var t;document.body||mt("Unable to initialize. Trying to load Alpine before `<body>` is available. Did you forget to add `defer` in Alpine's `<script>` tag?"),ct(document,"alpine:init"),ct(document,"alpine:initializing"),b(),t=t=>At(t,gt),f.push(t),g((t=>{gt(t,(t=>m(t)))})),function(t){u.push(t)}(((t,e)=>{K(t,e).forEach((t=>t()))})),Array.from(document.querySelectorAll(yt())).filter((t=>!Et(t.parentElement,!0))).forEach((t=>{At(t)})),ct(document,"alpine:initialized")},clone:function(t,n){n._x_dataStack||(n._x_dataStack=t._x_dataStack),Lt=!0,function(t){let n=e;d(((t,e)=>{let s=n(t);return i(s),()=>{}})),t(),d(n)}((()=>{!function(t){let e=!1;At(t,((t,i)=>{gt(t,((t,n)=>{if(e&&function(t){return bt().some((e=>t.matches(e)))}(t))return n();e=!0,i(t,n)}))}))}(n)})),Lt=!1},bound:function(t,e,i){if(t._x_bindings&&void 0!==t._x_bindings[e])return t._x_bindings[e];let n=t.getAttribute(e);return null===n?"function"==typeof i?i():i:Ht(e)?!![e,"true"].includes(n):""===n||n},$data:M,data:function(t,e){Bt[t]=e},bind:function(t,e){Ft[t]="function"!=typeof e?()=>e:e}};function Vt(t,e){const i=Object.create(null),n=t.split(",");for(let t=0;t<n.length;t++)i[n[t]]=!0;return e?t=>!!i[t.toLowerCase()]:t=>!!i[t]}var qt,Ut=Object.freeze({}),Gt=(Object.freeze([]),Object.assign),Kt=Object.prototype.hasOwnProperty,Jt=(t,e)=>Kt.call(t,e),Qt=Array.isArray,Zt=t=>"[object Map]"===ne(t),te=t=>"symbol"==typeof t,ee=t=>null!==t&&"object"==typeof t,ie=Object.prototype.toString,ne=t=>ie.call(t),se=t=>ne(t).slice(8,-1),ae=t=>"string"==typeof t&&"NaN"!==t&&"-"!==t[0]&&""+parseInt(t,10)===t,re=t=>{const e=Object.create(null);return i=>e[i]||(e[i]=t(i))},oe=/-(\w)/g,le=(re((t=>t.replace(oe,((t,e)=>e?e.toUpperCase():"")))),/\B([A-Z])/g),he=(re((t=>t.replace(le,"-$1").toLowerCase())),re((t=>t.charAt(0).toUpperCase()+t.slice(1)))),ce=(re((t=>t?`on${he(t)}`:"")),(t,e)=>t!==e&&(t==t||e==e)),de=new WeakMap,ue=[],pe=Symbol("iterate"),fe=Symbol("Map key iterate");var ge=0;function me(t){const{deps:e}=t;if(e.length){for(let i=0;i<e.length;i++)e[i].delete(t);e.length=0}}var _e=!0,ve=[];function be(){const t=ve.pop();_e=void 0===t||t}function ye(t,e,i){if(!_e||void 0===qt)return;let n=de.get(t);n||de.set(t,n=new Map);let s=n.get(i);s||n.set(i,s=new Set),s.has(qt)||(s.add(qt),qt.deps.push(s),qt.options.onTrack&&qt.options.onTrack({effect:qt,target:t,type:e,key:i}))}function xe(t,e,i,n,s,a){const r=de.get(t);if(!r)return;const o=new Set,l=t=>{t&&t.forEach((t=>{(t!==qt||t.allowRecurse)&&o.add(t)}))};if("clear"===e)r.forEach(l);else if("length"===i&&Qt(t))r.forEach(((t,e)=>{("length"===e||e>=n)&&l(t)}));else switch(void 0!==i&&l(r.get(i)),e){case"add":Qt(t)?ae(i)&&l(r.get("length")):(l(r.get(pe)),Zt(t)&&l(r.get(fe)));break;case"delete":Qt(t)||(l(r.get(pe)),Zt(t)&&l(r.get(fe)));break;case"set":Zt(t)&&l(r.get(pe))}o.forEach((r=>{r.options.onTrigger&&r.options.onTrigger({effect:r,target:t,key:i,type:e,newValue:n,oldValue:s,oldTarget:a}),r.options.scheduler?r.options.scheduler(r):r()}))}var we=Vt("__proto__,__v_isRef,__isVue"),Ee=new Set(Object.getOwnPropertyNames(Symbol).map((t=>Symbol[t])).filter(te)),ke=Ce(),Ae=Ce(!1,!0),De=Ce(!0),Me=Ce(!0,!0),Se={};function Ce(t=!1,e=!1){return function(i,n,s){if("__v_isReactive"===n)return!t;if("__v_isReadonly"===n)return t;if("__v_raw"===n&&s===(t?e?si:ni:e?ii:ei).get(i))return i;const a=Qt(i);if(!t&&a&&Jt(Se,n))return Reflect.get(Se,n,s);const r=Reflect.get(i,n,s);if(te(n)?Ee.has(n):we(n))return r;if(t||ye(i,"get",n),e)return r;if(hi(r)){return!a||!ae(n)?r.value:r}return ee(r)?t?ri(r):ai(r):r}}function Te(t=!1){return function(e,i,n,s){let a=e[i];if(!t&&(n=li(n),a=li(a),!Qt(e)&&hi(a)&&!hi(n)))return a.value=n,!0;const r=Qt(e)&&ae(i)?Number(i)<e.length:Jt(e,i),o=Reflect.set(e,i,n,s);return e===li(s)&&(r?ce(n,a)&&xe(e,"set",i,n,a):xe(e,"add",i,n)),o}}["includes","indexOf","lastIndexOf"].forEach((t=>{const e=Array.prototype[t];Se[t]=function(...t){const i=li(this);for(let t=0,e=this.length;t<e;t++)ye(i,"get",t+"");const n=e.apply(i,t);return-1===n||!1===n?e.apply(i,t.map(li)):n}})),["push","pop","shift","unshift","splice"].forEach((t=>{const e=Array.prototype[t];Se[t]=function(...t){ve.push(_e),_e=!1;const i=e.apply(this,t);return be(),i}}));var $e={get:ke,set:Te(),deleteProperty:function(t,e){const i=Jt(t,e),n=t[e],s=Reflect.deleteProperty(t,e);return s&&i&&xe(t,"delete",e,void 0,n),s},has:function(t,e){const i=Reflect.has(t,e);return te(e)&&Ee.has(e)||ye(t,"has",e),i},ownKeys:function(t){return ye(t,"iterate",Qt(t)?"length":pe),Reflect.ownKeys(t)}},Oe={get:De,set:(t,e)=>(console.warn(`Set operation on key "${String(e)}" failed: target is readonly.`,t),!0),deleteProperty:(t,e)=>(console.warn(`Delete operation on key "${String(e)}" failed: target is readonly.`,t),!0)},Ne=(Gt({},$e,{get:Ae,set:Te(!0)}),Gt({},Oe,{get:Me}),t=>ee(t)?ai(t):t),Le=t=>ee(t)?ri(t):t,Pe=t=>t,Ie=t=>Reflect.getPrototypeOf(t);function Ye(t,e,i=!1,n=!1){const s=li(t=t.__v_raw),a=li(e);e!==a&&!i&&ye(s,"get",e),!i&&ye(s,"get",a);const{has:r}=Ie(s),o=n?Pe:i?Le:Ne;return r.call(s,e)?o(t.get(e)):r.call(s,a)?o(t.get(a)):void(t!==s&&t.get(e))}function He(t,e=!1){const i=this.__v_raw,n=li(i),s=li(t);return t!==s&&!e&&ye(n,"has",t),!e&&ye(n,"has",s),t===s?i.has(t):i.has(t)||i.has(s)}function Re(t,e=!1){return t=t.__v_raw,!e&&ye(li(t),"iterate",pe),Reflect.get(t,"size",t)}function We(t){t=li(t);const e=li(this);return Ie(e).has.call(e,t)||(e.add(t),xe(e,"add",t,t)),this}function je(t,e){e=li(e);const i=li(this),{has:n,get:s}=Ie(i);let a=n.call(i,t);a?ti(i,n,t):(t=li(t),a=n.call(i,t));const r=s.call(i,t);return i.set(t,e),a?ce(e,r)&&xe(i,"set",t,e,r):xe(i,"add",t,e),this}function ze(t){const e=li(this),{has:i,get:n}=Ie(e);let s=i.call(e,t);s?ti(e,i,t):(t=li(t),s=i.call(e,t));const a=n?n.call(e,t):void 0,r=e.delete(t);return s&&xe(e,"delete",t,void 0,a),r}function Fe(){const t=li(this),e=0!==t.size,i=Zt(t)?new Map(t):new Set(t),n=t.clear();return e&&xe(t,"clear",void 0,void 0,i),n}function Be(t,e){return function(i,n){const s=this,a=s.__v_raw,r=li(a),o=e?Pe:t?Le:Ne;return!t&&ye(r,"iterate",pe),a.forEach(((t,e)=>i.call(n,o(t),o(e),s)))}}function Xe(t,e,i){return function(...n){const s=this.__v_raw,a=li(s),r=Zt(a),o="entries"===t||t===Symbol.iterator&&r,l="keys"===t&&r,h=s[t](...n),c=i?Pe:e?Le:Ne;return!e&&ye(a,"iterate",l?fe:pe),{next(){const{value:t,done:e}=h.next();return e?{value:t,done:e}:{value:o?[c(t[0]),c(t[1])]:c(t),done:e}},[Symbol.iterator](){return this}}}}function Ve(t){return function(...e){{const i=e[0]?`on key "${e[0]}" `:"";console.warn(`${he(t)} operation ${i}failed: target is readonly.`,li(this))}return"delete"!==t&&this}}var qe={get(t){return Ye(this,t)},get size(){return Re(this)},has:He,add:We,set:je,delete:ze,clear:Fe,forEach:Be(!1,!1)},Ue={get(t){return Ye(this,t,!1,!0)},get size(){return Re(this)},has:He,add:We,set:je,delete:ze,clear:Fe,forEach:Be(!1,!0)},Ge={get(t){return Ye(this,t,!0)},get size(){return Re(this,!0)},has(t){return He.call(this,t,!0)},add:Ve("add"),set:Ve("set"),delete:Ve("delete"),clear:Ve("clear"),forEach:Be(!0,!1)},Ke={get(t){return Ye(this,t,!0,!0)},get size(){return Re(this,!0)},has(t){return He.call(this,t,!0)},add:Ve("add"),set:Ve("set"),delete:Ve("delete"),clear:Ve("clear"),forEach:Be(!0,!0)};function Je(t,e){const i=e?t?Ke:Ue:t?Ge:qe;return(e,n,s)=>"__v_isReactive"===n?!t:"__v_isReadonly"===n?t:"__v_raw"===n?e:Reflect.get(Jt(i,n)&&n in e?i:e,n,s)}["keys","values","entries",Symbol.iterator].forEach((t=>{qe[t]=Xe(t,!1,!1),Ge[t]=Xe(t,!0,!1),Ue[t]=Xe(t,!1,!0),Ke[t]=Xe(t,!0,!0)}));var Qe={get:Je(!1,!1)},Ze=(Je(!1,!0),{get:Je(!0,!1)});Je(!0,!0);function ti(t,e,i){const n=li(i);if(n!==i&&e.call(t,n)){const e=se(t);console.warn(`Reactive ${e} contains both the raw and reactive versions of the same object${"Map"===e?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}var ei=new WeakMap,ii=new WeakMap,ni=new WeakMap,si=new WeakMap;function ai(t){return t&&t.__v_isReadonly?t:oi(t,!1,$e,Qe,ei)}function ri(t){return oi(t,!0,Oe,Ze,ni)}function oi(t,e,i,n,s){if(!ee(t))return console.warn(`value cannot be made reactive: ${String(t)}`),t;if(t.__v_raw&&(!e||!t.__v_isReactive))return t;const a=s.get(t);if(a)return a;const r=(o=t).__v_skip||!Object.isExtensible(o)?0:function(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}(se(o));var o;if(0===r)return t;const l=new Proxy(t,2===r?n:i);return s.set(t,l),l}function li(t){return t&&li(t.__v_raw)||t}function hi(t){return Boolean(t&&!0===t.__v_isRef)}I("nextTick",(()=>pt)),I("dispatch",(t=>ct.bind(ct,t))),I("watch",((t,{evaluateLater:e,effect:i})=>(n,s)=>{let a,r=e(n),o=!0,l=i((()=>r((t=>{JSON.stringify(t),o?a=t:queueMicrotask((()=>{s(t,a),a=t})),o=!1}))));t._x_effects.delete(l)})),I("store",(function(){return jt})),I("data",(t=>M(t))),I("root",(t=>Et(t))),I("refs",(t=>(t._x_refs_proxy||(t._x_refs_proxy=$(function(t){let e=[],i=t;for(;i;)i._x_refs&&e.push(i._x_refs),i=i.parentNode;return e}(t))),t._x_refs_proxy)));var ci={};function di(t){return ci[t]||(ci[t]=0),++ci[t]}function ui(t,e,i){I(e,(e=>mt(`You can't use [$${directiveName}] without first installing the "${t}" plugin here: https://alpine.dev/plugins/${i}`,e)))}I("id",(t=>(e,i=null)=>{let n=function(t,e){return kt(t,(t=>{if(t._x_ids&&t._x_ids[e])return!0}))}(t,e),s=n?n._x_ids[e]:di(e);return i?`${e}-${s}-${i}`:`${e}-${s}`})),I("el",(t=>t)),ui("Focus","focus","focus"),ui("Persist","persist","persist"),G("modelable",((t,{expression:e},{effect:i,evaluateLater:n})=>{let s=n(e),a=()=>{let t;return s((e=>t=e)),t},r=n(`${e} = __placeholder`),o=t=>r((()=>{}),{scope:{__placeholder:t}}),l=a();o(l),queueMicrotask((()=>{if(!t._x_model)return;t._x_removeModelListeners.default();let e=t._x_model.get,n=t._x_model.set;i((()=>o(e()))),i((()=>n(a())))}))})),G("teleport",((t,{expression:e},{cleanup:i})=>{"template"!==t.tagName.toLowerCase()&&mt("x-teleport can only be used on a <template> tag",t);let n=document.querySelector(e);n||mt(`Cannot find x-teleport element for selector: "${e}"`);let s=t.content.cloneNode(!0).firstElementChild;t._x_teleport=s,s._x_teleportBack=t,t._x_forwardEvents&&t._x_forwardEvents.forEach((e=>{s.addEventListener(e,(e=>{e.stopPropagation(),t.dispatchEvent(new e.constructor(e.type,e))}))})),S(s,{},t),E((()=>{n.appendChild(s),At(s),s._x_ignore=!0})),i((()=>s.remove()))}));var pi=()=>{};function fi(t,e,i,n){let s=t,a=t=>n(t),r={},o=(t,e)=>i=>e(t,i);if(i.includes("dot")&&(e=e.replace(/-/g,".")),i.includes("camel")&&(e=function(t){return t.toLowerCase().replace(/-(\w)/g,((t,e)=>e.toUpperCase()))}(e)),i.includes("passive")&&(r.passive=!0),i.includes("capture")&&(r.capture=!0),i.includes("window")&&(s=window),i.includes("document")&&(s=document),i.includes("prevent")&&(a=o(a,((t,e)=>{e.preventDefault(),t(e)}))),i.includes("stop")&&(a=o(a,((t,e)=>{e.stopPropagation(),t(e)}))),i.includes("self")&&(a=o(a,((e,i)=>{i.target===t&&e(i)}))),(i.includes("away")||i.includes("outside"))&&(s=document,a=o(a,((e,i)=>{t.contains(i.target)||!1!==i.target.isConnected&&(t.offsetWidth<1&&t.offsetHeight<1||!1!==t._x_isShown&&e(i))}))),i.includes("once")&&(a=o(a,((t,i)=>{t(i),s.removeEventListener(e,a,r)}))),a=o(a,((t,n)=>{(function(t){return["keydown","keyup"].includes(t)})(e)&&function(t,e){let i=e.filter((t=>!["window","document","prevent","stop","once"].includes(t)));if(i.includes("debounce")){let t=i.indexOf("debounce");i.splice(t,gi((i[t+1]||"invalid-wait").split("ms")[0])?2:1)}if(0===i.length)return!1;if(1===i.length&&mi(t.key).includes(i[0]))return!1;const n=["ctrl","shift","alt","meta","cmd","super"].filter((t=>i.includes(t)));if(i=i.filter((t=>!n.includes(t))),n.length>0){if(n.filter((e=>("cmd"!==e&&"super"!==e||(e="meta"),t[`${e}Key`]))).length===n.length&&mi(t.key).includes(i[0]))return!1}return!0}(n,i)||t(n)})),i.includes("debounce")){let t=i[i.indexOf("debounce")+1]||"invalid-wait",e=gi(t.split("ms")[0])?Number(t.split("ms")[0]):250;a=Rt(a,e)}if(i.includes("throttle")){let t=i[i.indexOf("throttle")+1]||"invalid-wait",e=gi(t.split("ms")[0])?Number(t.split("ms")[0]):250;a=Wt(a,e)}return s.addEventListener(e,a,r),()=>{s.removeEventListener(e,a,r)}}function gi(t){return!Array.isArray(t)&&!isNaN(t)}function mi(t){if(!t)return[];t=t.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[_\s]/,"-").toLowerCase();let e={ctrl:"control",slash:"/",space:"-",spacebar:"-",cmd:"meta",esc:"escape",up:"arrow-up",down:"arrow-down",left:"arrow-left",right:"arrow-right",period:".",equal:"="};return e[t]=t,Object.keys(e).map((i=>{if(e[i]===t)return i})).filter((t=>t))}function _i(t){let e=t?parseFloat(t):null;return i=e,Array.isArray(i)||isNaN(i)?t:e;var i}function vi(t,e,i,n){let s={};if(/^\[.*\]$/.test(t.item)&&Array.isArray(e)){t.item.replace("[","").replace("]","").split(",").map((t=>t.trim())).forEach(((t,i)=>{s[t]=e[i]}))}else if(/^\{.*\}$/.test(t.item)&&!Array.isArray(e)&&"object"==typeof e){t.item.replace("{","").replace("}","").split(",").map((t=>t.trim())).forEach((t=>{s[t]=e[t]}))}else s[t.item]=e;return t.index&&(s[t.index]=i),t.collection&&(s[t.collection]=n),s}function bi(){}function yi(t,e,i){G(e,(n=>mt(`You can't use [x-${e}] without first installing the "${t}" plugin here: https://alpine.dev/plugins/${i}`,n)))}pi.inline=(t,{modifiers:e},{cleanup:i})=>{e.includes("self")?t._x_ignoreSelf=!0:t._x_ignore=!0,i((()=>{e.includes("self")?delete t._x_ignoreSelf:delete t._x_ignore}))},G("ignore",pi),G("effect",((t,{expression:e},{effect:i})=>i(j(t,e)))),G("model",((t,{modifiers:e,expression:i},{effect:n,cleanup:s})=>{let a=j(t,i),r=j(t,`${i} = rightSideOfExpression($event, ${i})`);var o="select"===t.tagName.toLowerCase()||["checkbox","radio"].includes(t.type)||e.includes("lazy")?"change":"input";let l=function(t,e,i){"radio"===t.type&&E((()=>{t.hasAttribute("name")||t.setAttribute("name",i)}));return(i,n)=>E((()=>{if(i instanceof CustomEvent&&void 0!==i.detail)return i.detail||i.target.value;if("checkbox"===t.type){if(Array.isArray(n)){let t=e.includes("number")?_i(i.target.value):i.target.value;return i.target.checked?n.concat([t]):n.filter((e=>!(e==t)))}return i.target.checked}if("select"===t.tagName.toLowerCase()&&t.multiple)return e.includes("number")?Array.from(i.target.selectedOptions).map((t=>_i(t.value||t.text))):Array.from(i.target.selectedOptions).map((t=>t.value||t.text));{let t=i.target.value;return e.includes("number")?_i(t):e.includes("trim")?t.trim():t}}))}(t,e,i),h=fi(t,o,e,(t=>{r((()=>{}),{scope:{$event:t,rightSideOfExpression:l}})}));t._x_removeModelListeners||(t._x_removeModelListeners={}),t._x_removeModelListeners.default=h,s((()=>t._x_removeModelListeners.default()));let c=j(t,`${i} = __placeholder`);t._x_model={get(){let t;return a((e=>t=e)),t},set(t){c((()=>{}),{scope:{__placeholder:t}})}},t._x_forceModelUpdate=()=>{a((e=>{void 0===e&&i.match(/\./)&&(e=""),window.fromModel=!0,E((()=>It(t,"value",e))),delete window.fromModel}))},n((()=>{e.includes("unintrusive")&&document.activeElement.isSameNode(t)||t._x_forceModelUpdate()}))})),G("cloak",(t=>queueMicrotask((()=>E((()=>t.removeAttribute(q("cloak")))))))),wt((()=>`[${q("init")}]`)),G("init",Pt(((t,{expression:e},{evaluate:i})=>"string"==typeof e?!!e.trim()&&i(e,{},!1):i(e,{},!1)))),G("text",((t,{expression:e},{effect:i,evaluateLater:n})=>{let s=n(e);i((()=>{s((e=>{E((()=>{t.textContent=e}))}))}))})),G("html",((t,{expression:e},{effect:i,evaluateLater:n})=>{let s=n(e);i((()=>{s((e=>{E((()=>{t.innerHTML=e,t._x_ignoreSelf=!0,At(t),delete t._x_ignoreSelf}))}))}))})),st(et(":",q("bind:"))),G("bind",((t,{value:e,modifiers:i,expression:n,original:s},{effect:a})=>{if(!e)return function(t,e,i,n){let s={};a=s,Object.entries(Ft).forEach((([t,e])=>{Object.defineProperty(a,t,{get:()=>(...t)=>e(...t)})}));var a;let r=j(t,e),o=[];for(;o.length;)o.pop()();r((e=>{let n=Object.entries(e).map((([t,e])=>({name:t,value:e}))),s=function(t){return Array.from(t).map(it()).filter((t=>!at(t)))}(n);n=n.map((t=>s.find((e=>e.name===t.name))?{name:`x-bind:${t.name}`,value:`"${t.value}"`}:t)),K(t,n,i).map((t=>{o.push(t.runCleanups),t()}))}),{scope:s})}(t,n,s);if("key"===e)return function(t,e){t._x_keyExpression=e}(t,n);let r=j(t,n);a((()=>r((s=>{void 0===s&&n.match(/\./)&&(s=""),E((()=>It(t,e,s,i)))}))))})),xt((()=>`[${q("data")}]`)),G("data",Pt(((e,{expression:i},{cleanup:n})=>{i=""===i?"{}":i;let s={};Y(s,e);let a={};var r,o;r=a,o=s,Object.entries(Bt).forEach((([t,e])=>{Object.defineProperty(r,t,{get:()=>(...t)=>e.bind(o)(...t),enumerable:!1})}));let l=W(e,i,{scope:a});void 0===l&&(l={}),Y(l,e);let h=t(l);O(h);let c=S(e,h);h.init&&W(e,h.init),n((()=>{h.destroy&&W(e,h.destroy),c()}))}))),G("show",((t,{modifiers:e,expression:i},{effect:n})=>{let s=j(t,i);t._x_doHide||(t._x_doHide=()=>{E((()=>t.style.display="none"))}),t._x_doShow||(t._x_doShow=()=>{E((()=>{1===t.style.length&&"none"===t.style.display?t.removeAttribute("style"):t.style.removeProperty("display")}))});let a,r=()=>{t._x_doHide(),t._x_isShown=!1},o=()=>{t._x_doShow(),t._x_isShown=!0},l=()=>setTimeout(o),h=Ct((t=>t?o():r()),(e=>{"function"==typeof t._x_toggleAndCascadeWithTransitions?t._x_toggleAndCascadeWithTransitions(t,e,o,r):e?l():r()})),c=!0;n((()=>s((t=>{(c||t!==a)&&(e.includes("immediate")&&(t?l():r()),h(t),a=t,c=!1)}))))})),G("for",((e,{expression:i},{effect:n,cleanup:s})=>{let a=function(t){let e=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,i=/^\s*\(|\)\s*$/g,n=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,s=t.match(n);if(!s)return;let a={};a.items=s[2].trim();let r=s[1].replace(i,"").trim(),o=r.match(e);o?(a.item=r.replace(e,"").trim(),a.index=o[1].trim(),o[2]&&(a.collection=o[2].trim())):a.item=r;return a}(i),r=j(e,a.items),o=j(e,e._x_keyExpression||"index");e._x_prevKeys=[],e._x_lookup={},n((()=>function(e,i,n,s){let a=t=>"object"==typeof t&&!Array.isArray(t),r=e;n((n=>{var o;o=n,!Array.isArray(o)&&!isNaN(o)&&n>=0&&(n=Array.from(Array(n).keys(),(t=>t+1))),void 0===n&&(n=[]);let h=e._x_lookup,c=e._x_prevKeys,d=[],u=[];if(a(n))n=Object.entries(n).map((([t,e])=>{let a=vi(i,e,t,n);s((t=>u.push(t)),{scope:{index:t,...a}}),d.push(a)}));else for(let t=0;t<n.length;t++){let e=vi(i,n[t],t,n);s((t=>u.push(t)),{scope:{index:t,...e}}),d.push(e)}let p=[],f=[],g=[],m=[];for(let t=0;t<c.length;t++){let e=c[t];-1===u.indexOf(e)&&g.push(e)}c=c.filter((t=>!g.includes(t)));let _="template";for(let t=0;t<u.length;t++){let e=u[t],i=c.indexOf(e);if(-1===i)c.splice(t,0,e),p.push([_,t]);else if(i!==t){let e=c.splice(t,1)[0],n=c.splice(i-1,1)[0];c.splice(t,0,n),c.splice(i,0,e),f.push([e,n])}else m.push(e);_=e}for(let t=0;t<g.length;t++){let e=g[t];h[e]._x_effects&&h[e]._x_effects.forEach(l),h[e].remove(),h[e]=null,delete h[e]}for(let t=0;t<f.length;t++){let[e,i]=f[t],n=h[e],s=h[i],a=document.createElement("div");E((()=>{s.after(a),n.after(s),s._x_currentIfEl&&s.after(s._x_currentIfEl),a.before(n),n._x_currentIfEl&&n.after(n._x_currentIfEl),a.remove()})),C(s,d[u.indexOf(i)])}for(let e=0;e<p.length;e++){let[i,n]=p[e],s="template"===i?r:h[i];s._x_currentIfEl&&(s=s._x_currentIfEl);let a=d[n],o=u[n],l=document.importNode(r.content,!0).firstElementChild;S(l,t(a),r),E((()=>{s.after(l),At(l)})),"object"==typeof o&&mt("x-for key cannot be an object, it must be a string or an integer",r),h[o]=l}for(let t=0;t<m.length;t++)C(h[m[t]],d[u.indexOf(m[t])]);r._x_prevKeys=u}))}(e,a,r,o))),s((()=>{Object.values(e._x_lookup).forEach((t=>t.remove())),delete e._x_prevKeys,delete e._x_lookup}))})),bi.inline=(t,{expression:e},{cleanup:i})=>{let n=Et(t);n._x_refs||(n._x_refs={}),n._x_refs[e]=t,i((()=>delete n._x_refs[e]))},G("ref",bi),G("if",((t,{expression:e},{effect:i,cleanup:n})=>{let s=j(t,e);i((()=>s((e=>{e?(()=>{if(t._x_currentIfEl)return t._x_currentIfEl;let e=t.content.cloneNode(!0).firstElementChild;S(e,{},t),E((()=>{t.after(e),At(e)})),t._x_currentIfEl=e,t._x_undoIf=()=>{gt(e,(t=>{t._x_effects&&t._x_effects.forEach(l)})),e.remove(),delete t._x_currentIfEl}})():t._x_undoIf&&(t._x_undoIf(),delete t._x_undoIf)})))),n((()=>t._x_undoIf&&t._x_undoIf()))})),G("id",((t,{expression:e},{evaluate:i})=>{i(e).forEach((e=>function(t,e){t._x_ids||(t._x_ids={}),t._x_ids[e]||(t._x_ids[e]=di(e))}(t,e)))})),st(et("@",q("on:"))),G("on",Pt(((t,{value:e,modifiers:i,expression:n},{cleanup:s})=>{let a=n?j(t,n):()=>{};"template"===t.tagName.toLowerCase()&&(t._x_forwardEvents||(t._x_forwardEvents=[]),t._x_forwardEvents.includes(e)||t._x_forwardEvents.push(e));let r=fi(t,e,i,(t=>{a((()=>{}),{scope:{$event:t},params:[t]})}));s((()=>r()))}))),yi("Collapse","collapse","collapse"),yi("Intersect","intersect","intersect"),yi("Focus","trap","focus"),Xt.setEvaluator(F),Xt.setReactivityEngine({reactive:ai,effect:function(t,e=Ut){(function(t){return t&&!0===t._isEffect})(t)&&(t=t.raw);const i=function(t,e){const i=function(){if(!i.active)return t();if(!ue.includes(i)){me(i);try{return ve.push(_e),_e=!0,ue.push(i),qt=i,t()}finally{ue.pop(),be(),qt=ue[ue.length-1]}}};return i.id=ge++,i.allowRecurse=!!e.allowRecurse,i._isEffect=!0,i.active=!0,i.raw=t,i.deps=[],i.options=e,i}(t,e);return e.lazy||i(),i},release:function(t){t.active&&(me(t),t.options.onStop&&t.options.onStop(),t.active=!1)},raw:li});var xi=Xt;const wi="year",Ei="month",ki="day",Ai="hour",Di="minute",Mi="second",Si="millisecond",Ci={en:["January","February","March","April","May","June","July","August","September","October","November","December"],es:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],ru:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],ptBr:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],fr:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],tr:["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"],zh:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]},Ti={parse(t,e="-",i=/[.:]/){if(t instanceof Date)return t;if("string"==typeof t){let n,s;const a=t.split(" ");n=a[0].split(e).map((t=>parseInt(t,10))),s=a[1]&&a[1].split(i),n[1]=n[1]-1;let r=n;return s&&s.length&&(4==s.length&&(s[3]="0."+s[3],s[3]=1e3*parseFloat(s[3])),r=r.concat(s)),new Date(...r)}},to_string(t,e=!1){if(!(t instanceof Date))throw new TypeError("Invalid argument type");const i=this.get_date_values(t).map(((t,e)=>(1===e&&(t+=1),$i(t+"",6===e?3:2,"0")))),n=`${i[0]}-${i[1]}-${i[2]}`,s=`${i[3]}:${i[4]}:${i[5]}.${i[6]}`;return n+(e?" "+s:"")},format(t,e="YYYY-MM-DD HH:mm:ss.SSS",i="en"){const n=this.get_date_values(t).map((t=>$i(t,2,0))),s={YYYY:n[0],MM:$i(+n[1]+1,2,0),DD:n[2],HH:n[3],mm:n[4],ss:n[5],SSS:n[6],D:n[2],MMMM:Ci[i][+n[1]],MMM:Ci[i][+n[1]]};let a=e;const r=[];return Object.keys(s).sort(((t,e)=>e.length-t.length)).forEach((t=>{a.includes(t)&&(a=a.replace(t,`$${r.length}`),r.push(s[t]))})),r.forEach(((t,e)=>{a=a.replace(`$${e}`,t)})),a},diff(t,e,i=ki){let n,s,a,r,o,l,h;return n=t-e,s=n/1e3,r=s/60,a=r/60,o=a/24,l=o/30,h=l/12,i.endsWith("s")||(i+="s"),Math.floor({milliseconds:n,seconds:s,minutes:r,hours:a,days:o,months:l,years:h}[i])},today(){const t=this.get_date_values(new Date).slice(0,3);return new Date(...t)},now:()=>new Date,add(t,e,i){e=parseInt(e,10);const n=[t.getFullYear()+(i===wi?e:0),t.getMonth()+(i===Ei?e:0),t.getDate()+(i===ki?e:0),t.getHours()+(i===Ai?e:0),t.getMinutes()+(i===Di?e:0),t.getSeconds()+(i===Mi?e:0),t.getMilliseconds()+(i===Si?e:0)];return new Date(...n)},start_of(t,e){const i={[wi]:6,[Ei]:5,[ki]:4,[Ai]:3,[Di]:2,[Mi]:1,[Si]:0};function n(t){return i[t]<=i[e]}const s=[t.getFullYear(),n(wi)?0:t.getMonth(),n(Ei)?1:t.getDate(),n(ki)?0:t.getHours(),n(Ai)?0:t.getMinutes(),n(Di)?0:t.getSeconds(),n(Mi)?0:t.getMilliseconds()];return new Date(...s)},clone(t){return new Date(...this.get_date_values(t))},get_date_values:t=>[t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()],get_days_in_month(t){const e=[31,28,31,30,31,30,31,31,30,31,30,31],i=t.getMonth();if(1!==i)return e[i];const n=t.getFullYear();return n%4==0&&n%100!=0||n%400==0?29:28}};function $i(t,e,i){return t+="",e>>=0,i=String(void 0!==i?i:" "),t.length>e?String(t):((e-=t.length)>i.length&&(i+=i.repeat(e/i.length)),i.slice(0,e)+String(t))}function Oi(t,e){return"string"==typeof t?(e||document).querySelector(t):t||null}function Ni(t,e){const i=document.createElementNS("http://www.w3.org/2000/svg",t);for(let t in e)if("append_to"===t){e.append_to.appendChild(i)}else"innerHTML"===t?i.innerHTML=e.innerHTML:i.setAttribute(t,e[t]);return i}function Li(t,e,i,n){const s=function(t,e,i,n,s="0.4s",a="0.1s"){const r=t.querySelector("animate");if(r)return Oi.attr(r,{attributeName:e,from:i,to:n,dur:s,begin:"click + "+a}),t;const o=Ni("animate",{attributeName:e,from:i,to:n,dur:s,begin:a,calcMode:"spline",values:i+";"+n,keyTimes:"0; 1",keySplines:Pi("ease-out")});return t.appendChild(o),t}(t,e,i,n);if(s===t){const t=document.createEvent("HTMLEvents");t.initEvent("click",!0,!0),t.eventName="click",s.dispatchEvent(t)}}function Pi(t){return{ease:".25 .1 .25 1",linear:"0 0 1 1","ease-in":".42 0 1 1","ease-out":"0 0 .58 1","ease-in-out":".42 0 .58 1"}[t]}Oi.on=(t,e,i,n)=>{n?Oi.delegate(t,e,i,n):(n=i,Oi.bind(t,e,n))},Oi.off=(t,e,i)=>{t.removeEventListener(e,i)},Oi.bind=(t,e,i)=>{e.split(/\s+/).forEach((function(e){t.addEventListener(e,i)}))},Oi.delegate=(t,e,i,n)=>{t.addEventListener(e,(function(t){const e=t.target.closest(i);e&&(t.delegatedTarget=e,n.call(this,t,e))}))},Oi.closest=(t,e)=>e?e.matches(t)?e:Oi.closest(t,e.parentNode):null,Oi.attr=(t,e,i)=>{if(!i&&"string"==typeof e)return t.getAttribute(e);if("object"!=typeof e)t.setAttribute(e,i);else for(let i in e)Oi.attr(t,i,e[i])};class Ii{constructor(t,e){this.set_defaults(t,e),this.prepare(),this.draw(),this.bind()}set_defaults(t,e){this.action_completed=!1,this.gantt=t,this.task=e}prepare(){this.prepare_values(),this.prepare_helpers()}prepare_values(){this.invalid=this.task.invalid,this.height=this.gantt.options.bar_height,this.x=this.compute_x(),this.y=this.compute_y(),this.corner_radius=this.gantt.options.bar_corner_radius,this.duration=Ti.diff(this.task._end,this.task._start,"hour")/this.gantt.options.step,this.width=this.gantt.options.column_width*this.duration,this.progress_width=this.gantt.options.column_width*this.duration*(this.task.progress/100)||0,this.group=Ni("g",{class:"bar-wrapper "+(this.task.custom_class||""),"data-id":this.task.id}),this.bar_group=Ni("g",{class:"bar-group",append_to:this.group}),this.handle_group=Ni("g",{class:"handle-group",append_to:this.group})}prepare_helpers(){SVGElement.prototype.getX=function(){return+this.getAttribute("x")},SVGElement.prototype.getY=function(){return+this.getAttribute("y")},SVGElement.prototype.getWidth=function(){return+this.getAttribute("width")},SVGElement.prototype.getHeight=function(){return+this.getAttribute("height")},SVGElement.prototype.getEndX=function(){return this.getX()+this.getWidth()}}draw(){this.draw_bar(),this.draw_progress_bar(),this.draw_label(),this.draw_resize_handles()}draw_bar(){this.$bar=Ni("rect",{x:this.x,y:this.y,width:this.width,height:this.height,rx:this.corner_radius,ry:this.corner_radius,class:"bar",append_to:this.bar_group}),Li(this.$bar,"width",0,this.width),this.invalid&&this.$bar.classList.add("bar-invalid")}draw_progress_bar(){this.invalid||(this.$bar_progress=Ni("rect",{x:this.x,y:this.y,width:this.progress_width,height:this.height,rx:this.corner_radius,ry:this.corner_radius,class:"bar-progress",append_to:this.bar_group}),Li(this.$bar_progress,"width",0,this.progress_width))}draw_label(){Ni("text",{x:this.x+this.width/2,y:this.y+this.height/2,innerHTML:this.task.name,class:"bar-label",append_to:this.bar_group}),requestAnimationFrame((()=>this.update_label_position()))}draw_resize_handles(){if(this.invalid)return;const t=this.$bar;Ni("rect",{x:t.getX()+t.getWidth()-9,y:t.getY()+1,width:8,height:this.height-2,rx:this.corner_radius,ry:this.corner_radius,class:"handle right",append_to:this.handle_group}),Ni("rect",{x:t.getX()+1,y:t.getY()+1,width:8,height:this.height-2,rx:this.corner_radius,ry:this.corner_radius,class:"handle left",append_to:this.handle_group}),this.task.progress&&this.task.progress<100&&(this.$handle_progress=Ni("polygon",{points:this.get_progress_polygon_points().join(","),class:"handle progress",append_to:this.handle_group}))}get_progress_polygon_points(){const t=this.$bar_progress;return[t.getEndX()-5,t.getY()+t.getHeight(),t.getEndX()+5,t.getY()+t.getHeight(),t.getEndX(),t.getY()+t.getHeight()-8.66]}bind(){this.invalid||this.setup_click_event()}setup_click_event(){Oi.on(this.group,"focus "+this.gantt.options.popup_trigger,(t=>{this.action_completed||(this.show_popup(),this.gantt.unselect_all(),this.group.classList.add("active"))})),Oi.on(this.group,"dblclick",(t=>{this.action_completed||this.gantt.trigger_event("click",[this.task])}))}show_popup(){if(this.gantt.bar_being_dragged)return;const t=Ti.format(this.task._start,"MMM D",this.gantt.options.language)+" - "+Ti.format(Ti.add(this.task._end,-1,"second"),"MMM D",this.gantt.options.language);this.gantt.show_popup({target_element:this.$bar,title:this.task.name,subtitle:t,task:this.task})}update_bar_position({x:t=null,width:e=null}){const i=this.$bar;if(t){if(!this.task.dependencies.map((t=>this.gantt.get_bar(t).$bar.getX())).reduce(((e,i)=>t>=i),t))return void(e=null);this.update_attr(i,"x",t)}e&&e>=this.gantt.options.column_width&&this.update_attr(i,"width",e),this.update_label_position(),this.update_handle_position(),this.update_progressbar_position(),this.update_arrow_position()}date_changed(){let t=!1;const{new_start_date:e,new_end_date:i}=this.compute_start_end_date();Number(this.task._start)!==Number(e)&&(t=!0,this.task._start=e),Number(this.task._end)!==Number(i)&&(t=!0,this.task._end=i),t&&this.gantt.trigger_event("date_change",[this.task,e,Ti.add(i,-1,"second")])}progress_changed(){const t=this.compute_progress();this.task.progress=t,this.gantt.trigger_event("progress_change",[this.task,t])}set_action_completed(){this.action_completed=!0,setTimeout((()=>this.action_completed=!1),1e3)}compute_start_end_date(){const t=this.$bar,e=t.getX()/this.gantt.options.column_width,i=Ti.add(this.gantt.gantt_start,e*this.gantt.options.step,"hour"),n=t.getWidth()/this.gantt.options.column_width;return{new_start_date:i,new_end_date:Ti.add(i,n*this.gantt.options.step,"hour")}}compute_progress(){const t=this.$bar_progress.getWidth()/this.$bar.getWidth()*100;return parseInt(t,10)}compute_x(){const{step:t,column_width:e}=this.gantt.options,i=this.task._start,n=this.gantt.gantt_start;let s=Ti.diff(i,n,"hour")/t*e;if(this.gantt.view_is("Month")){s=Ti.diff(i,n,"day")*e/30}return s}compute_y(){return this.gantt.options.header_height+this.gantt.options.padding+this.task._index*(this.height+this.gantt.options.padding)}get_snap_position(t){let e,i,n=t;return this.gantt.view_is("Week")?(e=t%(this.gantt.options.column_width/7),i=n-e+(e<this.gantt.options.column_width/14?0:this.gantt.options.column_width/7)):this.gantt.view_is("Month")?(e=t%(this.gantt.options.column_width/30),i=n-e+(e<this.gantt.options.column_width/60?0:this.gantt.options.column_width/30)):(e=t%this.gantt.options.column_width,i=n-e+(e<this.gantt.options.column_width/2?0:this.gantt.options.column_width)),i}update_attr(t,e,i){return i=+i,isNaN(i)||t.setAttribute(e,i),t}update_progressbar_position(){this.$bar_progress.setAttribute("x",this.$bar.getX()),this.$bar_progress.setAttribute("width",this.$bar.getWidth()*(this.task.progress/100))}update_label_position(){const t=this.$bar,e=this.group.querySelector(".bar-label");e.getBBox().width>t.getWidth()?(e.classList.add("big"),e.setAttribute("x",t.getX()+t.getWidth()+5)):(e.classList.remove("big"),e.setAttribute("x",t.getX()+t.getWidth()/2))}update_handle_position(){const t=this.$bar;this.handle_group.querySelector(".handle.left").setAttribute("x",t.getX()+1),this.handle_group.querySelector(".handle.right").setAttribute("x",t.getEndX()-9);const e=this.group.querySelector(".handle.progress");e&&e.setAttribute("points",this.get_progress_polygon_points())}update_arrow_position(){this.arrows=this.arrows||[];for(let t of this.arrows)t.update()}}class Yi{constructor(t,e,i){this.gantt=t,this.from_task=e,this.to_task=i,this.calculate_path(),this.draw()}calculate_path(){let t=this.from_task.$bar.getX()+this.from_task.$bar.getWidth()/2;const e=()=>this.to_task.$bar.getX()<t+this.gantt.options.padding&&t>this.from_task.$bar.getX()+this.gantt.options.padding;for(;e();)t-=10;const i=this.gantt.options.header_height+this.gantt.options.bar_height+(this.gantt.options.padding+this.gantt.options.bar_height)*this.from_task.task._index+this.gantt.options.padding,n=this.to_task.$bar.getX()-this.gantt.options.padding/2,s=this.gantt.options.header_height+this.gantt.options.bar_height/2+(this.gantt.options.padding+this.gantt.options.bar_height)*this.to_task.task._index+this.gantt.options.padding,a=this.from_task.task._index>this.to_task.task._index,r=this.gantt.options.arrow_curve,o=a?1:0,l=a?-r:r,h=a?s+this.gantt.options.arrow_curve:s-this.gantt.options.arrow_curve;if(this.path=`\n            M ${t} ${i}\n            V ${h}\n            a ${r} ${r} 0 0 ${o} ${r} ${l}\n            L ${n} ${s}\n            m -5 -5\n            l 5 5\n            l -5 5`,this.to_task.$bar.getX()<this.from_task.$bar.getX()+this.gantt.options.padding){const e=this.gantt.options.padding/2-r,a=this.to_task.$bar.getY()+this.to_task.$bar.getHeight()/2-l,h=this.to_task.$bar.getX()-this.gantt.options.padding;this.path=`\n                M ${t} ${i}\n                v ${e}\n                a ${r} ${r} 0 0 1 -${r} ${r}\n                H ${h}\n                a ${r} ${r} 0 0 ${o} -${r} ${l}\n                V ${a}\n                a ${r} ${r} 0 0 ${o} ${r} ${l}\n                L ${n} ${s}\n                m -5 -5\n                l 5 5\n                l -5 5`}}draw(){this.element=Ni("path",{d:this.path,"data-from":this.from_task.task.id,"data-to":this.to_task.task.id})}update(){this.calculate_path(),this.element.setAttribute("d",this.path)}}class Hi{constructor(t,e){this.parent=t,this.custom_html=e,this.make()}make(){this.parent.innerHTML='\n            <div class="title"></div>\n            <div class="subtitle"></div>\n            <div class="pointer"></div>\n        ',this.hide(),this.title=this.parent.querySelector(".title"),this.subtitle=this.parent.querySelector(".subtitle"),this.pointer=this.parent.querySelector(".pointer")}show(t){if(!t.target_element)throw new Error("target_element is required to show popup");t.position||(t.position="left");const e=t.target_element;if(this.custom_html){let e=this.custom_html(t.task);e+='<div class="pointer"></div>',this.parent.innerHTML=e,this.pointer=this.parent.querySelector(".pointer")}else this.title.innerHTML=t.title,this.subtitle.innerHTML=t.subtitle,this.parent.style.width=this.parent.clientWidth+"px";let i;e instanceof HTMLElement?i=e.getBoundingClientRect():e instanceof SVGElement&&(i=t.target_element.getBBox()),"left"===t.position&&(this.parent.style.left=i.x+(i.width+10)+"px",this.parent.style.top=i.y+"px",this.pointer.style.transform="rotateZ(90deg)",this.pointer.style.left="-7px",this.pointer.style.top="2px"),this.parent.style.opacity=1}hide(){this.parent.style.opacity=0,this.parent.style.left=0}}const Ri={QUARTER_DAY:"Quarter Day",HALF_DAY:"Half Day",DAY:"Day",WEEK:"Week",MONTH:"Month",YEAR:"Year"};class Wi{constructor(t,e,i){this.setup_wrapper(t),this.setup_options(i),this.setup_tasks(e),this.change_view_mode(),this.bind_events()}setup_wrapper(t){let e,i;if("string"==typeof t&&(t=document.querySelector(t)),t instanceof HTMLElement)i=t,e=t.querySelector("svg");else{if(!(t instanceof SVGElement))throw new TypeError("Frappé Gantt only supports usage of a string CSS selector, HTML DOM element or SVG DOM element for the 'element' parameter");e=t}e?(this.$svg=e,this.$svg.classList.add("gantt")):this.$svg=Ni("svg",{append_to:i,class:"gantt"}),this.$container=document.createElement("div"),this.$container.classList.add("gantt-container");this.$svg.parentElement.appendChild(this.$container),this.$container.appendChild(this.$svg),this.popup_wrapper=document.createElement("div"),this.popup_wrapper.classList.add("popup-wrapper"),this.$container.appendChild(this.popup_wrapper)}setup_options(t){const e={header_height:50,column_width:30,step:24,view_modes:[...Object.values(Ri)],bar_height:20,bar_corner_radius:3,arrow_curve:5,padding:18,view_mode:"Day",date_format:"YYYY-MM-DD",popup_trigger:"click",custom_popup_html:null,language:"en"};this.options=Object.assign({},e,t)}setup_tasks(t){this.tasks=t.map(((t,e)=>{if(t._start=Ti.parse(t.start),t._end=Ti.parse(t.end),Ti.diff(t._end,t._start,"year")>10&&(t.end=null),t._index=e,!t.start&&!t.end){const e=Ti.today();t._start=e,t._end=Ti.add(e,2,"day")}!t.start&&t.end&&(t._start=Ti.add(t._end,-2,"day")),t.start&&!t.end&&(t._end=Ti.add(t._start,2,"day"));if(Ti.get_date_values(t._end).slice(3).every((t=>0===t))&&(t._end=Ti.add(t._end,24,"hour")),t.start&&t.end||(t.invalid=!0),"string"==typeof t.dependencies||!t.dependencies){let e=[];t.dependencies&&(e=t.dependencies.split(",").map((t=>t.trim())).filter((t=>t))),t.dependencies=e}return t.id||(t.id=function(t){return t.name+"_"+Math.random().toString(36).slice(2,12)}(t)),t})),this.setup_dependencies()}setup_dependencies(){this.dependency_map={};for(let t of this.tasks)for(let e of t.dependencies)this.dependency_map[e]=this.dependency_map[e]||[],this.dependency_map[e].push(t.id)}refresh(t){this.setup_tasks(t),this.change_view_mode()}change_view_mode(t=this.options.view_mode){this.update_view_scale(t),this.setup_dates(),this.render(),this.trigger_event("view_change",[t])}update_view_scale(t){this.options.view_mode=t,t===Ri.DAY?(this.options.step=24,this.options.column_width=38):t===Ri.HALF_DAY?(this.options.step=12,this.options.column_width=38):t===Ri.QUARTER_DAY?(this.options.step=6,this.options.column_width=38):t===Ri.WEEK?(this.options.step=168,this.options.column_width=140):t===Ri.MONTH?(this.options.step=720,this.options.column_width=120):t===Ri.YEAR&&(this.options.step=8760,this.options.column_width=120)}setup_dates(){this.setup_gantt_dates(),this.setup_date_values()}setup_gantt_dates(){this.gantt_start=this.gantt_end=null;for(let t of this.tasks)(!this.gantt_start||t._start<this.gantt_start)&&(this.gantt_start=t._start),(!this.gantt_end||t._end>this.gantt_end)&&(this.gantt_end=t._end);this.gantt_start=Ti.start_of(this.gantt_start,"day"),this.gantt_end=Ti.start_of(this.gantt_end,"day"),this.view_is([Ri.QUARTER_DAY,Ri.HALF_DAY])?(this.gantt_start=Ti.add(this.gantt_start,-7,"day"),this.gantt_end=Ti.add(this.gantt_end,7,"day")):this.view_is(Ri.MONTH)?(this.gantt_start=Ti.start_of(this.gantt_start,"year"),this.gantt_end=Ti.add(this.gantt_end,1,"year")):this.view_is(Ri.YEAR)?(this.gantt_start=Ti.add(this.gantt_start,-2,"year"),this.gantt_end=Ti.add(this.gantt_end,2,"year")):(this.gantt_start=Ti.add(this.gantt_start,-1,"month"),this.gantt_end=Ti.add(this.gantt_end,1,"month"))}setup_date_values(){this.dates=[];let t=null;for(;null===t||t<this.gantt_end;)t=t?this.view_is(Ri.YEAR)?Ti.add(t,1,"year"):this.view_is(Ri.MONTH)?Ti.add(t,1,"month"):Ti.add(t,this.options.step,"hour"):Ti.clone(this.gantt_start),this.dates.push(t)}bind_events(){this.bind_grid_click(),this.bind_bar_events()}render(){this.clear(),this.setup_layers(),this.make_grid(),this.make_dates(),this.make_bars(),this.make_arrows(),this.map_arrows_on_bars(),this.set_width(),this.set_scroll_position()}setup_layers(){this.layers={};const t=["grid","date","arrow","progress","bar","details"];for(let e of t)this.layers[e]=Ni("g",{class:e,append_to:this.$svg})}make_grid(){this.make_grid_background(),this.make_grid_rows(),this.make_grid_header(),this.make_grid_ticks(),this.make_grid_highlights()}make_grid_background(){const t=this.dates.length*this.options.column_width,e=this.options.header_height+this.options.padding+(this.options.bar_height+this.options.padding)*this.tasks.length;Ni("rect",{x:0,y:0,width:t,height:e,class:"grid-background",append_to:this.layers.grid}),Oi.attr(this.$svg,{height:e+this.options.padding+100,width:"100%"})}make_grid_rows(){const t=Ni("g",{append_to:this.layers.grid}),e=Ni("g",{append_to:this.layers.grid}),i=this.dates.length*this.options.column_width,n=this.options.bar_height+this.options.padding;let s=this.options.header_height+this.options.padding/2;for(let a of this.tasks)Ni("rect",{x:0,y:s,width:i,height:n,class:"grid-row",append_to:t}),Ni("line",{x1:0,y1:s+n,x2:i,y2:s+n,class:"row-line",append_to:e}),s+=this.options.bar_height+this.options.padding}make_grid_header(){Ni("rect",{x:0,y:0,width:this.dates.length*this.options.column_width,height:this.options.header_height+10,class:"grid-header",append_to:this.layers.grid})}make_grid_ticks(){let t=0,e=this.options.header_height+this.options.padding/2,i=(this.options.bar_height+this.options.padding)*this.tasks.length;for(let n of this.dates){let s="tick";this.view_is(Ri.DAY)&&1===n.getDate()&&(s+=" thick"),this.view_is(Ri.WEEK)&&n.getDate()>=1&&n.getDate()<8&&(s+=" thick"),this.view_is(Ri.MONTH)&&(n.getMonth()+1)%3==0&&(s+=" thick"),Ni("path",{d:`M ${t} ${e} v ${i}`,class:s,append_to:this.layers.grid}),this.view_is(Ri.MONTH)?t+=Ti.get_days_in_month(n)*this.options.column_width/30:t+=this.options.column_width}}make_grid_highlights(){if(this.view_is(Ri.DAY)){Ni("rect",{x:Ti.diff(Ti.today(),this.gantt_start,"hour")/this.options.step*this.options.column_width,y:0,width:this.options.column_width,height:(this.options.bar_height+this.options.padding)*this.tasks.length+this.options.header_height+this.options.padding/2,class:"today-highlight",append_to:this.layers.grid})}}make_dates(){for(let t of this.get_dates_to_draw())if(Ni("text",{x:t.lower_x,y:t.lower_y,innerHTML:t.lower_text,class:"lower-text",append_to:this.layers.date}),t.upper_text){const e=Ni("text",{x:t.upper_x,y:t.upper_y,innerHTML:t.upper_text,class:"upper-text",append_to:this.layers.date});e.getBBox().x2>this.layers.grid.getBBox().width&&e.remove()}}get_dates_to_draw(){let t=null;return this.dates.map(((e,i)=>{const n=this.get_date_info(e,t,i);return t=e,n}))}get_date_info(t,e,i){e||(e=Ti.add(t,1,"year"));const n={"Quarter Day_lower":Ti.format(t,"HH",this.options.language),"Half Day_lower":Ti.format(t,"HH",this.options.language),Day_lower:t.getDate()!==e.getDate()?Ti.format(t,"D",this.options.language):"",Week_lower:t.getMonth()!==e.getMonth()?Ti.format(t,"D MMM",this.options.language):Ti.format(t,"D",this.options.language),Month_lower:Ti.format(t,"MMMM",this.options.language),Year_lower:Ti.format(t,"YYYY",this.options.language),"Quarter Day_upper":t.getDate()!==e.getDate()?Ti.format(t,"D MMM",this.options.language):"","Half Day_upper":t.getDate()!==e.getDate()?t.getMonth()!==e.getMonth()?Ti.format(t,"D MMM",this.options.language):Ti.format(t,"D",this.options.language):"",Day_upper:t.getMonth()!==e.getMonth()?Ti.format(t,"MMMM",this.options.language):"",Week_upper:t.getMonth()!==e.getMonth()?Ti.format(t,"MMMM",this.options.language):"",Month_upper:t.getFullYear()!==e.getFullYear()?Ti.format(t,"YYYY",this.options.language):"",Year_upper:t.getFullYear()!==e.getFullYear()?Ti.format(t,"YYYY",this.options.language):""},s={x:i*this.options.column_width,lower_y:this.options.header_height,upper_y:this.options.header_height-25},a={"Quarter Day_lower":4*this.options.column_width/2,"Quarter Day_upper":0,"Half Day_lower":2*this.options.column_width/2,"Half Day_upper":0,Day_lower:this.options.column_width/2,Day_upper:30*this.options.column_width/2,Week_lower:0,Week_upper:4*this.options.column_width/2,Month_lower:this.options.column_width/2,Month_upper:12*this.options.column_width/2,Year_lower:this.options.column_width/2,Year_upper:30*this.options.column_width/2};return{upper_text:n[`${this.options.view_mode}_upper`],lower_text:n[`${this.options.view_mode}_lower`],upper_x:s.x+a[`${this.options.view_mode}_upper`],upper_y:s.upper_y,lower_x:s.x+a[`${this.options.view_mode}_lower`],lower_y:s.lower_y}}make_bars(){this.bars=this.tasks.map((t=>{const e=new Ii(this,t);return this.layers.bar.appendChild(e.group),e}))}make_arrows(){this.arrows=[];for(let t of this.tasks){let e=[];e=t.dependencies.map((e=>{const i=this.get_task(e);if(!i)return;const n=new Yi(this,this.bars[i._index],this.bars[t._index]);return this.layers.arrow.appendChild(n.element),n})).filter(Boolean),this.arrows=this.arrows.concat(e)}}map_arrows_on_bars(){for(let t of this.bars)t.arrows=this.arrows.filter((e=>e.from_task.task.id===t.task.id||e.to_task.task.id===t.task.id))}set_width(){const t=this.$svg.getBoundingClientRect().width,e=this.$svg.querySelector(".grid .grid-row").getAttribute("width");t<e&&this.$svg.setAttribute("width",e)}set_scroll_position(){const t=this.$svg.parentElement;if(!t)return;const e=Ti.diff(this.get_oldest_starting_date(),this.gantt_start,"hour")/this.options.step*this.options.column_width-this.options.column_width;t.scrollLeft=e}bind_grid_click(){Oi.on(this.$svg,this.options.popup_trigger,".grid-row, .grid-header",(()=>{this.unselect_all(),this.hide_popup()}))}bind_bar_events(){let t=!1,e=0,i=0,n=!1,s=!1,a=null,r=[];this.bar_being_dragged=null,Oi.on(this.$svg,"mousedown",".bar-wrapper, .handle",((o,l)=>{const h=Oi.closest(".bar-wrapper",l);l.classList.contains("left")?n=!0:l.classList.contains("right")?s=!0:l.classList.contains("bar-wrapper")&&(t=!0),h.classList.add("active"),e=o.offsetX,i=o.offsetY,a=h.getAttribute("data-id");const c=[a,...this.get_all_dependent_tasks(a)];r=c.map((t=>this.get_bar(t))),this.bar_being_dragged=a,r.forEach((t=>{const e=t.$bar;e.ox=e.getX(),e.oy=e.getY(),e.owidth=e.getWidth(),e.finaldx=0}))})),Oi.on(this.$svg,"mousemove",(i=>{if(!(t||n||s))return;const o=i.offsetX-e;i.offsetY;r.forEach((e=>{const i=e.$bar;i.finaldx=this.get_snap_position(o),this.hide_popup(),n?a===e.task.id?e.update_bar_position({x:i.ox+i.finaldx,width:i.owidth-i.finaldx}):e.update_bar_position({x:i.ox+i.finaldx}):s?a===e.task.id&&e.update_bar_position({width:i.owidth+i.finaldx}):t&&e.update_bar_position({x:i.ox+i.finaldx})}))})),document.addEventListener("mouseup",(e=>{(t||n||s)&&r.forEach((t=>t.group.classList.remove("active"))),t=!1,n=!1,s=!1})),Oi.on(this.$svg,"mouseup",(t=>{this.bar_being_dragged=null,r.forEach((t=>{t.$bar.finaldx&&(t.date_changed(),t.set_action_completed())}))})),this.bind_bar_progress()}bind_bar_progress(){let t=0,e=0,i=null,n=null,s=null,a=null;Oi.on(this.$svg,"mousedown",".handle.progress",((r,o)=>{i=!0,t=r.offsetX,e=r.offsetY;const l=Oi.closest(".bar-wrapper",o).getAttribute("data-id");n=this.get_bar(l),s=n.$bar_progress,a=n.$bar,s.finaldx=0,s.owidth=s.getWidth(),s.min_dx=-s.getWidth(),s.max_dx=a.getWidth()-s.getWidth()})),Oi.on(this.$svg,"mousemove",(e=>{if(!i)return;let a=e.offsetX-t;e.offsetY;a>s.max_dx&&(a=s.max_dx),a<s.min_dx&&(a=s.min_dx);const r=n.$handle_progress;Oi.attr(s,"width",s.owidth+a),Oi.attr(r,"points",n.get_progress_polygon_points()),s.finaldx=a})),Oi.on(this.$svg,"mouseup",(()=>{i=!1,s&&s.finaldx&&(n.progress_changed(),n.set_action_completed())}))}get_all_dependent_tasks(t){let e=[],i=[t];for(;i.length;){const t=i.reduce(((t,e)=>t=t.concat(this.dependency_map[e])),[]);e=e.concat(t),i=t.filter((t=>!i.includes(t)))}return e.filter(Boolean)}get_snap_position(t){let e,i,n=t;return this.view_is(Ri.WEEK)?(e=t%(this.options.column_width/7),i=n-e+(e<this.options.column_width/14?0:this.options.column_width/7)):this.view_is(Ri.MONTH)?(e=t%(this.options.column_width/30),i=n-e+(e<this.options.column_width/60?0:this.options.column_width/30)):(e=t%this.options.column_width,i=n-e+(e<this.options.column_width/2?0:this.options.column_width)),i}unselect_all(){[...this.$svg.querySelectorAll(".bar-wrapper")].forEach((t=>{t.classList.remove("active")}))}view_is(t){return"string"==typeof t?this.options.view_mode===t:!!Array.isArray(t)&&t.some((t=>this.options.view_mode===t))}get_task(t){return this.tasks.find((e=>e.id===t))}get_bar(t){return this.bars.find((e=>e.task.id===t))}show_popup(t){this.popup||(this.popup=new Hi(this.popup_wrapper,this.options.custom_popup_html)),this.popup.show(t)}hide_popup(){this.popup&&this.popup.hide()}trigger_event(t,e){this.options["on_"+t]&&this.options["on_"+t].apply(null,e)}get_oldest_starting_date(){return this.tasks.map((t=>t._start)).reduce(((t,e)=>e<=t?e:t))}clear(){this.$svg.innerHTML=""}}Wi.VIEW_MODE=Ri;function ji(t,e){return"string"==typeof t?(e||document).querySelector(t):t||null}function zi(t){let e=t.getBoundingClientRect();return{top:e.top+(document.documentElement.scrollTop||document.body.scrollTop),left:e.left+(document.documentElement.scrollLeft||document.body.scrollLeft)}}ji.create=(t,e)=>{var i=document.createElement(t);for(var n in e){var s=e[n];if("inside"===n)ji(s).appendChild(i);else if("around"===n){var a=ji(s);a.parentNode.insertBefore(i,a),i.appendChild(a)}else"styles"===n?"object"==typeof s&&Object.keys(s).map((t=>{i.style[t]=s[t]})):n in i?i[n]=s:i.setAttribute(n,s)}return i};const Fi={margins:{top:10,bottom:10,left:20,right:20},paddings:{top:20,bottom:40,left:30,right:10},baseHeight:240,titleHeight:20,legendHeight:30,titleFontSize:12};function Bi(t){return t.titleHeight+t.margins.top+t.paddings.top}function Xi(t){return t.margins.left+t.paddings.left}function Vi(t){return t.margins.top+t.margins.bottom+t.paddings.top+t.paddings.bottom+t.titleHeight+t.legendHeight}function qi(t){return t.margins.left+t.margins.right+t.paddings.left+t.paddings.right}const Ui=["line","bar"],Gi=10,Ki=["light-blue","blue","violet","red","orange","yellow","green","light-green","purple","magenta","light-grey","dark-grey"],Ji={bar:Ki,line:Ki,pie:Ki,percentage:Ki,heatmap:["#ebedf0","#c6e48b","#7bc96f","#239a3b","#196127"],donut:Ki},Qi=Math.PI/180;class Zi{constructor({parent:t=null,colors:e=[]}){this.parent=t,this.colors=e,this.titleName="",this.titleValue="",this.listValues=[],this.titleValueFirst=0,this.x=0,this.y=0,this.top=0,this.left=0,this.setup()}setup(){this.makeTooltip()}refresh(){this.fill(),this.calcPosition()}makeTooltip(){this.container=ji.create("div",{inside:this.parent,className:"graph-svg-tip comparison",innerHTML:'<span class="title"></span>\n\t\t\t\t<ul class="data-point-list"></ul>\n\t\t\t\t<div class="svg-pointer"></div>'}),this.hideTip(),this.title=this.container.querySelector(".title"),this.dataPointList=this.container.querySelector(".data-point-list"),this.parent.addEventListener("mouseleave",(()=>{this.hideTip()}))}fill(){let t;this.index&&this.container.setAttribute("data-point-index",this.index),t=this.titleValueFirst?`<strong>${this.titleValue}</strong>${this.titleName}`:`${this.titleName}<strong>${this.titleValue}</strong>`,this.title.innerHTML=t,this.dataPointList.innerHTML="",this.listValues.map(((t,e)=>{const i=this.colors[e]||"black";let n=0===t.formatted||t.formatted?t.formatted:t.value,s=ji.create("li",{styles:{"border-top":`3px solid ${i}`},innerHTML:`<strong style="display: block;">${0===n||n?n:""}</strong>\n\t\t\t\t\t${t.title?t.title:""}`});this.dataPointList.appendChild(s)}))}calcPosition(){let t=this.container.offsetWidth;this.top=this.y-this.container.offsetHeight-5,this.left=this.x-t/2;let e=this.parent.offsetWidth-t,i=this.container.querySelector(".svg-pointer");if(this.left<0)i.style.left=`calc(50% - ${-1*this.left}px)`,this.left=0;else if(this.left>e){let t=`calc(50% + ${this.left-e}px)`;i.style.left=t,this.left=e}else i.style.left="50%"}setValues(t,e,i={},n=[],s=-1){this.titleName=i.name,this.titleValue=i.value,this.listValues=n,this.x=t,this.y=e,this.titleValueFirst=i.valueFirst||0,this.index=s,this.refresh()}hideTip(){this.container.style.top="0px",this.container.style.left="0px",this.container.style.opacity="0"}showTip(){this.container.style.top=this.top+"px",this.container.style.left=this.left+"px",this.container.style.opacity="1"}}function tn(t){return parseFloat(t.toFixed(2))}function en(t,e,i,n=!1){i||(i=n?t[0]:t[t.length-1]);let s=new Array(Math.abs(e)).fill(i);return t=n?s.concat(t):t.concat(s)}function nn(t,e){return(t+"").length*e}function sn(t,e){return{x:Math.sin(t*Qi)*e,y:Math.cos(t*Qi)*e}}function an(t,e=!1){return!Number.isNaN(t)&&(void 0!==t&&(!!Number.isFinite(t)&&!(e&&t<0)))}function rn(t){let e,i,n;if(t instanceof Date)return new Date(t.getTime());if("object"!=typeof t||null===t)return t;for(n in e=Array.isArray(t)?[]:{},t)i=t[n],e[n]=rn(i);return e}function on(t,e){let i,n;return t<=e?(i=e-t,n=t):(i=t-e,n=e),[i,n]}function ln(t,e,i=e.length-t.length){return i>0?t=en(t,i):e=en(e,i),[t,e]}function hn(t,e){if(t)return t.length>e?t.slice(0,e-3)+"...":t}function cn(t,e){let i=[];for(let n=0;n<t.length;n++)i.push([t[n],e[n]]);let n=(t,e,i,n)=>{let s=((t,e)=>{let i=e[0]-t[0],n=e[1]-t[1];return{length:Math.sqrt(Math.pow(i,2)+Math.pow(n,2)),angle:Math.atan2(n,i)}})(e||t,i||t),a=s.angle+(n?Math.PI:0),r=.2*s.length;return[t[0]+Math.cos(a)*r,t[1]+Math.sin(a)*r]};return((t,e)=>t.reduce(((t,i,n,s)=>0===n?`${i[0]},${i[1]}`:`${t} ${e(i,n,s)}`),""))(i,((t,e,i)=>{let s=n(i[e-1],i[e-2],t),a=n(t,i[e-1],i[e+1],!0);return`C ${s[0]},${s[1]} ${a[0]},${a[1]} ${t[0]},${t[1]}`}))}const dn={"light-blue":"#7cd6fd",blue:"#5e64ff",violet:"#743ee2",red:"#ff5858",orange:"#ffa00a",yellow:"#feef72",green:"#28a745","light-green":"#98d85b",purple:"#b554ff",magenta:"#ffa3ef",black:"#36114C",grey:"#bdd3e6","light-grey":"#f0f4f7","dark-grey":"#b8c2cc"};function un(t){return t>255?255:t<0?0:t}function pn(t,e){let i=fn(t),n=!1;"#"==i[0]&&(i=i.slice(1),n=!0);let s=parseInt(i,16),a=un((s>>16)+e),r=un((s>>8&255)+e);return(n?"#":"")+(un((255&s)+e)|r<<8|a<<16).toString(16)}const fn=t=>/rgb[a]{0,1}\([\d, ]+\)/gim.test(t)?/\D+(\d*)\D+(\d*)\D+(\d*)/gim.exec(t).map(((t,e)=>0!==e?Number(t).toString(16):"#")).reduce(((t,e)=>`${t}${e}`)):dn[t]||t,gn=10,mn="#dadada",_n="#555b51";function vn(t,e){return"string"==typeof t?(e||document).querySelector(t):t||null}function bn(t,e){var i=document.createElementNS("http://www.w3.org/2000/svg",t);for(var n in e){var s=e[n];if("inside"===n)vn(s).appendChild(i);else if("around"===n){var a=vn(s);a.parentNode.insertBefore(i,a),i.appendChild(a)}else"styles"===n?"object"==typeof s&&Object.keys(s).map((t=>{i.style[t]=s[t]})):("className"===n&&(n="class"),"innerHTML"===n?i.textContent=s:i.setAttribute(n,s))}return i}function yn(t,e,i,n){return bn("stop",{inside:t,style:`stop-color: ${i}`,offset:e,"stop-opacity":n})}function xn(t,e="",i){let n={className:t,transform:e};return i&&(n.inside=i),bn("g",n)}function wn(t,e="",i="none",n="none",s=2){return bn("path",{className:e,d:t,styles:{stroke:i,fill:n,"stroke-width":s}})}function En(t,e,i=!1){let n="path-fill-gradient-"+e+"-"+(i?"lighter":"default"),s=function(t,e){return bn("linearGradient",{inside:t,id:e,x1:0,x2:0,y1:0,y2:1})}(t,n),a=[1,.6,.2];return i&&(a=[.4,.2,0]),yn(s,"0%",e,a[0]),yn(s,"50%",e,a[1]),yn(s,"100%",e,a[2]),n}function kn(t,e,i,n,s,a="none",r={}){let o={className:t,x:e,y:i,width:n,height:n,rx:s,fill:a};return Object.keys(r).map((t=>{o[t]=r[t]})),bn("rect",o)}function An(t,e,i,n,s={}){let a=s.fontSize||gn;return bn("text",{className:t,x:e,y:i,dy:(void 0!==s.dy?s.dy:a/2)+"px","font-size":a+"px",fill:s.fill||_n,"text-anchor":s.textAnchor||"start",innerHTML:n})}function Dn(t,e,i,n,s={}){s.stroke||(s.stroke=mn),s.lineType||(s.lineType=""),s.shortenNumbers&&(e=function(t){let e;if("number"==typeof t)e=t;else if("string"==typeof t&&(e=Number(t),Number.isNaN(e)))return t;let i=Math.floor(Math.log10(Math.abs(e)));if(i<=2)return e;let n=Math.floor(i/3),s=Math.pow(10,i-3*n)*+(e/Math.pow(10,i)).toFixed(1);return Math.round(100*s)/100+" "+["","K","M","B","T"][n]}(e));let a=bn("line",{className:"line-horizontal "+s.className+("dashed"===s.lineType?"dashed":""),x1:i,x2:n,y1:0,y2:0,styles:{stroke:s.stroke}}),r=bn("text",{x:i<n?i-4:i+4,y:0,dy:"3px","font-size":"10px","text-anchor":i<n?"end":"start",innerHTML:e+""}),o=bn("g",{transform:`translate(0, ${t})`,"stroke-opacity":1});return 0!==r&&"0"!==r||(o.style.stroke="rgba(27, 31, 35, 0.6)"),o.appendChild(a),o.appendChild(r),o}function Mn(t,e,i,n={}){an(t)||(t=0),n.pos||(n.pos="bottom"),n.offset||(n.offset=0),n.mode||(n.mode="span"),n.stroke||(n.stroke=mn),n.className||(n.className="");let s=i+6,a="span"===n.mode?-6:i;return"tick"===n.mode&&"top"===n.pos&&(s=-6,a=0),function(t,e,i,n,s={}){s.stroke||(s.stroke=mn);let a=bn("line",{className:"line-vertical "+s.className,x1:0,x2:0,y1:i,y2:n,styles:{stroke:s.stroke}}),r=bn("text",{x:0,y:i>n?i+4:i-4-gn,dy:"10px","font-size":"10px","text-anchor":"middle",innerHTML:e+""}),o=bn("g",{transform:`translate(${t}, 0)`});return o.appendChild(a),o.appendChild(r),o}(t,e,s,a,{stroke:n.stroke,className:n.className,lineType:n.lineType})}let Sn={bar:t=>{let e;"rect"!==t.nodeName&&(e=t.getAttribute("transform"),t=t.childNodes[0]);let i=t.cloneNode();return i.style.fill="#000000",i.style.opacity="0.4",e&&i.setAttribute("transform",e),i},dot:t=>{let e;"circle"!==t.nodeName&&(e=t.getAttribute("transform"),t=t.childNodes[0]);let i=t.cloneNode(),n=t.getAttribute("r"),s=t.getAttribute("fill");return i.setAttribute("r",parseInt(n)+4),i.setAttribute("fill",s),i.style.opacity="0.6",e&&i.setAttribute("transform",e),i},heat_square:t=>{let e;"circle"!==t.nodeName&&(e=t.getAttribute("transform"),t=t.childNodes[0]);let i=t.cloneNode(),n=t.getAttribute("r"),s=t.getAttribute("fill");return i.setAttribute("r",parseInt(n)+4),i.setAttribute("fill",s),i.style.opacity="0.6",e&&i.setAttribute("transform",e),i}},Cn={bar:(t,e)=>{let i;"rect"!==t.nodeName&&(i=t.getAttribute("transform"),t=t.childNodes[0]);let n=["x","y","width","height"];Object.values(t.attributes).filter((t=>n.includes(t.name)&&t.specified)).map((t=>{e.setAttribute(t.name,t.nodeValue)})),i&&e.setAttribute("transform",i)},dot:(t,e)=>{let i;"circle"!==t.nodeName&&(i=t.getAttribute("transform"),t=t.childNodes[0]);let n=["cx","cy"];Object.values(t.attributes).filter((t=>n.includes(t.name)&&t.specified)).map((t=>{e.setAttribute(t.name,t.nodeValue)})),i&&e.setAttribute("transform",i)},heat_square:(t,e)=>{let i;"circle"!==t.nodeName&&(i=t.getAttribute("transform"),t=t.childNodes[0]);let n=["cx","cy"];Object.values(t.attributes).filter((t=>n.includes(t.name)&&t.specified)).map((t=>{e.setAttribute(t.name,t.nodeValue)})),i&&e.setAttribute("transform",i)}};const Tn=350,$n=Tn,On="easein";function Nn(t,e,i,n){let s="string"==typeof e?e:e.join(", ");return[t,{transform:i.join(", ")},n,On,"translate",{transform:s}]}function Ln(t,e,i){return Nn(t,[0,i],[0,e],$n)}function Pn(t,e){return[t,{d:e},Tn,On]}const In={ease:"0.25 0.1 0.25 1",linear:"0 0 1 1",easein:"0.1 0.8 0.2 1",easeout:"0 0 0.58 1",easeinout:"0.42 0 0.58 1"};function Yn(t,e){t.style.transform=e,t.style.webkitTransform=e,t.style.msTransform=e,t.style.mozTransform=e,t.style.oTransform=e}function Hn(t,e){let i=[],n=[];e.map((t=>{let e,s,a=t[0],r=a.parentNode;t[0]=a,[e,s]=function(t,e,i,n="linear",s,a={}){let r=t.cloneNode(!0),o=t.cloneNode(!0);for(var l in e){let c;c="transform"===l?document.createElementNS("http://www.w3.org/2000/svg","animateTransform"):document.createElementNS("http://www.w3.org/2000/svg","animate");let d=a[l]||t.getAttribute(l),u=e[l],p={attributeName:l,from:d,to:u,begin:"0s",dur:i/1e3+"s",values:d+";"+u,keySplines:In[n],keyTimes:"0;1",calcMode:"spline",fill:"freeze"};for(var h in s&&(p.type=s),p)c.setAttribute(h,p[h]);r.appendChild(c),s?o.setAttribute(l,`translate(${u})`):o.setAttribute(l,u)}return[r,o]}(...t),i.push(s),n.push([e,r]),r&&r.replaceChild(e,a)}));let s=t.cloneNode(!0);return n.map(((t,n)=>{t[1]&&(t[1].replaceChild(i[n],t[0]),e[n][0]=i[n])})),s}class Rn{constructor(t,e){if(e=rn(e),this.parent="string"==typeof t?document.querySelector(t):t,!(this.parent instanceof HTMLElement))throw new Error("No `parent` element to render on was provided.");this.rawChartArgs=e,this.title=e.title||"",this.type=e.type||"",this.realData=this.prepareData(e.data),this.data=this.prepareFirstData(this.realData),this.colors=this.validateColors(e.colors,this.type),this.config={showTooltip:1,showLegend:1,isNavigable:e.isNavigable||0,animate:void 0!==e.animate?e.animate:1,truncateLegends:e.truncateLegends||1},this.measures=JSON.parse(JSON.stringify(Fi));let i=this.measures;this.setMeasures(e),this.title.length||(i.titleHeight=0),this.config.showLegend||(i.legendHeight=0),this.argHeight=e.height||i.baseHeight,this.state={},this.options={},this.initTimeout=700,this.config.isNavigable&&(this.overlays=[]),this.configure(e)}prepareData(t){return t}prepareFirstData(t){return t}validateColors(t,e){const i=[];return(t=(t||[]).concat(Ji[e])).forEach((t=>{const e=fn(t);!function(t){return/(^\s*)(#)((?:[A-Fa-f0-9]{3}){1,2})$/i.test(t)||/(^\s*)(rgb|hsl)(a?)[(]\s*([\d.]+\s*%?)\s*,\s*([\d.]+\s*%?)\s*,\s*([\d.]+\s*%?)\s*(?:,\s*([\d.]+)\s*)?[)]$/i.test(t)}(e)?console.warn('"'+t+'" is not a valid color.'):i.push(e)})),i}setMeasures(){}configure(){let t=this.argHeight;this.baseHeight=t,this.height=t-Vi(this.measures),this.boundDrawFn=()=>this.draw(!0),ResizeObserver&&(this.resizeObserver=new ResizeObserver(this.boundDrawFn),this.resizeObserver.observe(this.parent)),window.addEventListener("resize",this.boundDrawFn),window.addEventListener("orientationchange",this.boundDrawFn)}destroy(){this.resizeObserver&&this.resizeObserver.disconnect(),window.removeEventListener("resize",this.boundDrawFn),window.removeEventListener("orientationchange",this.boundDrawFn)}setup(){this.makeContainer(),this.updateWidth(),this.makeTooltip(),this.draw(!1,!0)}makeContainer(){this.parent.innerHTML="";let t={inside:this.parent,className:"chart-container"};this.independentWidth&&(t.styles={width:this.independentWidth+"px"}),this.container=ji.create("div",t)}makeTooltip(){this.tip=new Zi({parent:this.container,colors:this.colors}),this.bindTooltip()}bindTooltip(){}draw(t=!1,e=!1){t&&null===this.parent.offsetParent||(this.updateWidth(),this.calc(t),this.makeChartArea(),this.setupComponents(),this.components.forEach((t=>t.setup(this.drawArea))),this.render(this.components,!1),e&&(this.data=this.realData,setTimeout((()=>{this.update(this.data)}),this.initTimeout)),this.renderLegend(),this.setupNavigation(e))}calc(){}updateWidth(){var t,e,i;this.baseWidth=(t=this.parent,e=window.getComputedStyle(t),i=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight),t.clientWidth-i),this.width=this.baseWidth-qi(this.measures)}makeChartArea(){this.svg&&this.container.removeChild(this.svg);let t=this.measures;var e,i,n,s;this.svg=(e=this.container,i="frappe-chart chart",n=this.baseWidth,s=this.baseHeight,bn("svg",{className:i,inside:e,width:n,height:s})),this.svgDefs=bn("defs",{inside:this.svg}),this.title.length&&(this.titleEL=An("title",t.margins.left,t.margins.top,this.title,{fontSize:t.titleFontSize,fill:"#666666",dy:t.titleFontSize}));let a=Bi(t);this.drawArea=xn(this.type+"-chart chart-draw-area",`translate(${Xi(t)}, ${a})`),this.config.showLegend&&(a+=this.height+t.paddings.bottom,this.legendArea=xn("chart-legend",`translate(${Xi(t)}, ${a})`)),this.title.length&&this.svg.appendChild(this.titleEL),this.svg.appendChild(this.drawArea),this.config.showLegend&&this.svg.appendChild(this.legendArea),this.updateTipOffset(Xi(t),Bi(t))}updateTipOffset(t,e){this.tip.offset={x:t,y:e}}setupComponents(){this.components=new Map}update(t){t||console.error("No data to update."),this.data=this.prepareData(t),this.calc(),this.render(this.components,this.config.animate),this.renderLegend()}render(t=this.components,e=!0){this.config.isNavigable&&this.overlays.map((t=>t.parentNode.removeChild(t)));let i=[];t.forEach((t=>{i=i.concat(t.update(e))})),i.length>0?(!function(t,e,i){if(0===i.length)return;let n=Hn(e,i);e.parentNode==t&&(t.removeChild(e),t.appendChild(n)),setTimeout((()=>{n.parentNode==t&&(t.removeChild(n),t.appendChild(e))}),250)}(this.container,this.svg,i),setTimeout((()=>{t.forEach((t=>t.make())),this.updateNav()}),400)):(t.forEach((t=>t.make())),this.updateNav())}updateNav(){this.config.isNavigable&&(this.makeOverlay(),this.bindUnits())}renderLegend(){}setupNavigation(t=!1){this.config.isNavigable&&t&&(this.bindOverlay(),this.keyActions={13:this.onEnterKey.bind(this),37:this.onLeftArrow.bind(this),38:this.onUpArrow.bind(this),39:this.onRightArrow.bind(this),40:this.onDownArrow.bind(this)},document.addEventListener("keydown",(t=>{var e,i;e=this.container,(i=e.getBoundingClientRect()).top>=0&&i.left>=0&&i.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&i.right<=(window.innerWidth||document.documentElement.clientWidth)&&(t=t||window.event,this.keyActions[t.keyCode]&&this.keyActions[t.keyCode]())})))}makeOverlay(){}updateOverlay(){}bindOverlay(){}bindUnits(){}onLeftArrow(){}onRightArrow(){}onUpArrow(){}onDownArrow(){}onEnterKey(){}addDataPoint(){}removeDataPoint(){}getDataPoint(){}setCurrentDataPoint(){}updateDataset(){}export(){let t=function(t){let e=t.cloneNode(!0);e.classList.add("chart-container"),e.setAttribute("xmlns","http://www.w3.org/2000/svg"),e.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink");let i=ji.create("style",{innerHTML:".chart-container{position:relative;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif}.chart-container .axis,.chart-container .chart-label{fill:#555b51}.chart-container .axis line,.chart-container .chart-label line{stroke:#dadada}.chart-container .dataset-units circle{stroke:#fff;stroke-width:2}.chart-container .dataset-units path{fill:none;stroke-opacity:1;stroke-width:2px}.chart-container .dataset-path{stroke-width:2px}.chart-container .path-group path{fill:none;stroke-opacity:1;stroke-width:2px}.chart-container line.dashed{stroke-dasharray:5,3}.chart-container .axis-line .specific-value{text-anchor:start}.chart-container .axis-line .y-line{text-anchor:end}.chart-container .axis-line .x-line{text-anchor:middle}.chart-container .legend-dataset-text{fill:#6c7680;font-weight:600}.graph-svg-tip{position:absolute;z-index:99999;padding:10px;font-size:12px;color:#959da5;text-align:center;background:rgba(0,0,0,.8);border-radius:3px}.graph-svg-tip ul{padding-left:0;display:flex}.graph-svg-tip ol{padding-left:0;display:flex}.graph-svg-tip ul.data-point-list li{min-width:90px;flex:1;font-weight:600}.graph-svg-tip strong{color:#dfe2e5;font-weight:600}.graph-svg-tip .svg-pointer{position:absolute;height:5px;margin:0 0 0 -5px;content:' ';border:5px solid transparent;border-top-color:rgba(0,0,0,.8)}.graph-svg-tip.comparison{padding:0;text-align:left;pointer-events:none}.graph-svg-tip.comparison .title{display:block;padding:10px;margin:0;font-weight:600;line-height:1;pointer-events:none}.graph-svg-tip.comparison ul{margin:0;white-space:nowrap;list-style:none}.graph-svg-tip.comparison li{display:inline-block;padding:5px 10px}"});e.insertBefore(i,e.firstChild);let n=ji.create("div");return n.appendChild(e),n.innerHTML}(this.svg);!function(t,e){var i=document.createElement("a");i.style="display: none";var n=new Blob(e,{type:"image/svg+xml; charset=utf-8"}),s=window.URL.createObjectURL(n);i.href=s,i.download=t,document.body.appendChild(i),i.click(),setTimeout((function(){document.body.removeChild(i),window.URL.revokeObjectURL(s)}),300)}(this.title||"Chart",[t])}}class Wn extends Rn{constructor(t,e){super(t,e)}configure(t){super.configure(t),this.config.formatTooltipY=(t.tooltipOptions||{}).formatTooltipY,this.config.maxSlices=t.maxSlices||20,this.config.maxLegendPoints=t.maxLegendPoints||20}calc(){let t=this.state,e=this.config.maxSlices;t.sliceTotals=[];let i=this.data.labels.map(((t,e)=>{let i=0;return this.data.datasets.map((t=>{i+=t.values[e]})),[i,t]})).filter((t=>t[0]>=0)),n=i;if(i.length>e){i.sort(((t,e)=>e[0]-t[0])),n=i.slice(0,e-1);let t=i.slice(e-1),s=0;t.map((t=>{s+=t[0]})),n.push([s,"Rest"]),this.colors[e-1]="grey"}t.labels=[],n.map((e=>{t.sliceTotals.push(function(t){return Number(Math.round(t+"e4")+"e-4")}(e[0])),t.labels.push(e[1])})),t.grandTotal=t.sliceTotals.reduce(((t,e)=>t+e),0),this.center={x:this.width/2,y:this.height/2}}renderLegend(){let t=this.state;this.legendArea.textContent="",this.legendTotals=t.sliceTotals.slice(0,this.config.maxLegendPoints);let e=0,i=0;this.legendTotals.map(((n,s)=>{let a=150,r=Math.floor((this.width-qi(this.measures))/a);this.legendTotals.length<r&&(a=this.width/this.legendTotals.length),e>r&&(e=0,i+=20);let o=a*e+5,l=this.config.truncateLegends?hn(t.labels[s],a/10):t.labels[s],h=this.config.formatTooltipY?this.config.formatTooltipY(n):n,c=function(t,e,i,n="none",s,a=!1){s=a?hn(s,15):s;let r={className:"legend-dot",cx:0,cy:0,r:i,fill:n},o=bn("text",{className:"legend-dataset-text",x:0,y:0,dx:"10px",dy:gn/3+"px","font-size":"12px","text-anchor":"start",fill:_n,innerHTML:s}),l=bn("g",{transform:`translate(${t}, ${e})`});return l.appendChild(bn("circle",r)),l.appendChild(o),l}(o,i,5,this.colors[s],`${l}: ${h}`,!1);this.legendArea.appendChild(c),e++}))}}const jn=1e3,zn=["January","February","March","April","May","June","July","August","September","October","November","December"],Fn=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function Bn(t){let e=new Date(t);return e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),e}function Xn(t){let e=t.getDate(),i=t.getMonth()+1;return[t.getFullYear(),(i>9?"":"0")+i,(e>9?"":"0")+e].join("-")}function Vn(t){return new Date(t.getTime())}function qn(t,e){let i=Jn(t);return Math.ceil(function(t,e){let i=864e5;return(Bn(e)-Bn(t))/i}(i,e)/7)}function Un(t,e){return t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()}function Gn(t,e=!1){let i=zn[t];return e?i.slice(0,3):i}function Kn(t,e){return new Date(e,t+1,0)}function Jn(t){let e=Vn(t);const i=e.getDay();return 0!==i&&Qn(e,-1*i),e}function Qn(t,e){t.setDate(t.getDate()+e)}class Zn{constructor({layerClass:t="",layerTransform:e="",constants:i,getData:n,makeElements:s,animateElements:a}){this.layerTransform=e,this.constants=i,this.makeElements=s,this.getData=n,this.animateElements=a,this.store=[],this.labels=[],this.layerClass=t,this.layerClass="function"==typeof this.layerClass?this.layerClass():this.layerClass,this.refresh()}refresh(t){this.data=t||this.getData()}setup(t){this.layer=xn(this.layerClass,this.layerTransform,t)}make(){this.render(this.data),this.oldData=this.data}render(t){this.store=this.makeElements(t),this.layer.textContent="",this.store.forEach((t=>{this.layer.appendChild(t)})),this.labels.forEach((t=>{this.layer.appendChild(t)}))}update(t=!0){this.refresh();let e=[];return t&&(e=this.animateElements(this.data)||[]),e}}let ts={donutSlices:{layerClass:"donut-slices",makeElements:t=>t.sliceStrings.map(((e,i)=>{let n=wn(e,"donut-path",t.colors[i],"none",t.strokeWidth);return n.style.transition="transform .3s;",n})),animateElements(t){return this.store.map(((e,i)=>Pn(e,t.sliceStrings[i])))}},pieSlices:{layerClass:"pie-slices",makeElements:t=>t.sliceStrings.map(((e,i)=>{let n=wn(e,"pie-path","none",t.colors[i]);return n.style.transition="transform .3s;",n})),animateElements(t){return this.store.map(((e,i)=>Pn(e,t.sliceStrings[i])))}},percentageBars:{layerClass:"percentage-bars",makeElements(t){return t.xPositions.map(((e,i)=>{let n=function(t,e,i,n,s=2,a="none"){return bn("rect",{className:"percentage-bar",x:t,y:e,width:i,height:n,fill:a,styles:{stroke:pn(a,-25),"stroke-dasharray":`0, ${n+i}, ${i}, ${n}`,"stroke-width":s}})}(e,0,t.widths[i],this.constants.barHeight,this.constants.barDepth,t.colors[i]);return n}))},animateElements(t){if(t)return[]}},yAxis:{layerClass:"y axis",makeElements(t){return t.positions.map(((e,i)=>function(t,e,i,n={}){an(t)||(t=0),n.pos||(n.pos="left"),n.offset||(n.offset=0),n.mode||(n.mode="span"),n.stroke||(n.stroke=mn),n.className||(n.className="");let s=-6,a="span"===n.mode?i+6:0;return"tick"===n.mode&&"right"===n.pos&&(s=i+6,a=i),s+=n.offset,a+=n.offset,Dn(t,e,s,a,{stroke:n.stroke,className:n.className,lineType:n.lineType,shortenNumbers:n.shortenNumbers})}(e,t.labels[i],this.constants.width,{mode:this.constants.mode,pos:this.constants.pos,shortenNumbers:this.constants.shortenNumbers})))},animateElements(t){let e=t.positions,i=t.labels,n=this.oldData.positions,s=this.oldData.labels;return[n,e]=ln(n,e),[s,i]=ln(s,i),this.render({positions:n,labels:i}),this.store.map(((t,i)=>Ln(t,e[i],n[i])))}},xAxis:{layerClass:"x axis",makeElements(t){return t.positions.map(((e,i)=>Mn(e,t.calcLabels[i],this.constants.height,{mode:this.constants.mode,pos:this.constants.pos})))},animateElements(t){let e=t.positions,i=t.calcLabels,n=this.oldData.positions,s=this.oldData.calcLabels;return[n,e]=ln(n,e),[s,i]=ln(s,i),this.render({positions:n,calcLabels:i}),this.store.map(((t,i)=>function(t,e,i){return Nn(t,[i,0],[e,0],$n)}(t,e[i],n[i])))}},yMarkers:{layerClass:"y-markers",makeElements(t){return t.map((t=>function(t,e,i,n={}){n.labelPos||(n.labelPos="right");let s=bn("text",{className:"chart-label",x:"left"===n.labelPos?4:i-nn(e,5)-4,y:0,dy:"-5px","font-size":"10px","text-anchor":"start",innerHTML:e+""}),a=Dn(t,"",0,i,{stroke:n.stroke||mn,className:n.className||"",lineType:n.lineType});return a.appendChild(s),a}(t.position,t.label,this.constants.width,{labelPos:t.options.labelPos,mode:"span",lineType:"dashed"})))},animateElements(t){[this.oldData,t]=ln(this.oldData,t);let e=t.map((t=>t.position)),i=t.map((t=>t.label)),n=t.map((t=>t.options)),s=this.oldData.map((t=>t.position));return this.render(s.map(((t,e)=>({position:s[e],label:i[e],options:n[e]})))),this.store.map(((t,i)=>Ln(t,e[i],s[i])))}},yRegions:{layerClass:"y-regions",makeElements(t){return t.map((t=>function(t,e,i,n,s={}){let a=t-e,r=bn("rect",{className:"bar mini",styles:{fill:"rgba(228, 234, 239, 0.49)",stroke:mn,"stroke-dasharray":`${i}, ${a}`},x:0,y:0,width:i,height:a});s.labelPos||(s.labelPos="right");let o=bn("text",{className:"chart-label",x:"left"===s.labelPos?4:i-nn(n+"",4.5)-4,y:0,dy:"-5px","font-size":"10px","text-anchor":"start",innerHTML:n+""}),l=bn("g",{transform:`translate(0, ${e})`});return l.appendChild(r),l.appendChild(o),l}(t.startPos,t.endPos,this.constants.width,t.label,{labelPos:t.options.labelPos})))},animateElements(t){[this.oldData,t]=ln(this.oldData,t);let e=t.map((t=>t.endPos)),i=t.map((t=>t.label)),n=t.map((t=>t.startPos)),s=t.map((t=>t.options)),a=this.oldData.map((t=>t.endPos)),r=this.oldData.map((t=>t.startPos));this.render(a.map(((t,e)=>({startPos:r[e],endPos:a[e],label:i[e],options:s[e]}))));let o=[];return this.store.map(((t,i)=>{o=o.concat(function(t,e,i,n){let s=e-i,a=t.childNodes[0],r=a.getAttribute("width");return[[a,{height:s,"stroke-dasharray":`${r}, ${s}`},$n,On],Nn(t,[0,n],[0,i],$n)]}(t,n[i],e[i],a[i]))})),o}},heatDomain:{layerClass:function(){return"heat-domain domain-"+this.constants.index},makeElements(t){let{index:e,colWidth:i,rowHeight:n,squareSize:s,radius:a,xTranslate:r}=this.constants,o=r,l=0;return this.serializedSubDomains=[],t.cols.map(((t,r)=>{1===r&&this.labels.push(An("domain-name",o,-12,Gn(e,!0).toUpperCase(),{fontSize:9})),t.map(((t,e)=>{if(t.fill){let i={"data-date":t.yyyyMmDd,"data-value":t.dataValue,"data-day":e},n=kn("day",o,l,s,a,t.fill,i);this.serializedSubDomains.push(n)}l+=n})),l=0,o+=i})),this.serializedSubDomains},animateElements(t){if(t)return[]}},barGraph:{layerClass:function(){return"dataset-units dataset-bars dataset-"+this.constants.index},makeElements(t){let e=this.constants;return this.unitType="bar",this.units=t.yPositions.map(((i,n)=>function(t,e,i,n,s="",a=0,r=0,o={}){let[l,h]=on(e,o.zeroLine);h-=r,0===l&&(l=o.minHeight,h-=o.minHeight),an(t)||(t=0),an(h)||(h=0),an(l,!0)||(l=0),an(i,!0)||(i=0);let c=bn("rect",{className:"bar mini",style:`fill: ${n}`,"data-point-index":a,x:t,y:h,width:i,height:l});if((s+="")||s.length){c.setAttribute("y",0),c.setAttribute("x",0);let e=bn("text",{className:"data-point-value",x:i/2,y:0,dy:"-5px","font-size":"10px","text-anchor":"middle",innerHTML:s}),n=bn("g",{"data-point-index":a,transform:`translate(${t}, ${h})`});return n.appendChild(c),n.appendChild(e),n}return c}(t.xPositions[n],i,t.barWidth,e.color,t.labels[n],n,t.offsets[n],{zeroLine:t.zeroLine,barsWidth:t.barsWidth,minHeight:e.minHeight}))),this.units},animateElements(t){let e=t.xPositions,i=t.yPositions,n=t.offsets,s=t.labels,a=this.oldData.xPositions,r=this.oldData.yPositions,o=this.oldData.offsets,l=this.oldData.labels;[a,e]=ln(a,e),[r,i]=ln(r,i),[o,n]=ln(o,n),[l,s]=ln(l,s),this.render({xPositions:a,yPositions:r,offsets:o,labels:s,zeroLine:this.oldData.zeroLine,barsWidth:this.oldData.barsWidth,barWidth:this.oldData.barWidth});let h=[];return this.store.map(((s,a)=>{h=h.concat(function(t,e,i,n,s=0,a={}){let[r,o]=on(i,a.zeroLine);if(o-=s,"rect"!==t.nodeName){let i=[t.childNodes[0],{width:n,height:r},Tn,On],s=t.getAttribute("transform").split("(")[1].slice(0,-1);return[i,Nn(t,s,[e,o],$n)]}return[[t,{width:n,height:r,x:e,y:o},Tn,On]]}(s,e[a],i[a],t.barWidth,n[a],{zeroLine:t.zeroLine}))})),h}},lineGraph:{layerClass:function(){return"dataset-units dataset-line dataset-"+this.constants.index},makeElements(t){let e=this.constants;return this.unitType="dot",this.paths={},e.hideLine||(this.paths=function(t,e,i,n={},s={}){let a=e.map(((e,i)=>t[i]+","+e)).join("L");n.spline&&(a=cn(t,e));let r=wn("M"+a,"line-graph-path",i);if(n.heatline){let t=En(s.svgDefs,i);r.style.stroke=`url(#${t})`}let o={path:r};if(n.regionFill){let e=En(s.svgDefs,i,!0),n=`M${t[0]},${s.zeroLine}L`+a+`L${t.slice(-1)[0]},${s.zeroLine}`;o.region=wn(n,"region-fill","none",`url(#${e})`)}return o}(t.xPositions,t.yPositions,e.color,{heatline:e.heatline,regionFill:e.regionFill,spline:e.spline},{svgDefs:e.svgDefs,zeroLine:t.zeroLine})),this.units=[],e.hideDots||(this.units=t.yPositions.map(((i,n)=>function(t,e,i,n,s="",a=0){let r=bn("circle",{style:`fill: ${n}`,"data-point-index":a,cx:t,cy:e,r:i});if((s+="")||s.length){r.setAttribute("cy",0),r.setAttribute("cx",0);let n=bn("text",{className:"data-point-value",x:0,y:0,dy:-5-i+"px","font-size":"10px","text-anchor":"middle",innerHTML:s}),o=bn("g",{"data-point-index":a,transform:`translate(${t}, ${e})`});return o.appendChild(r),o.appendChild(n),o}return r}(t.xPositions[n],i,t.radius,e.color,e.valuesOverPoints?t.values[n]:"",n)))),Object.values(this.paths).concat(this.units)},animateElements(t){let e=t.xPositions,i=t.yPositions,n=t.values,s=this.oldData.xPositions,a=this.oldData.yPositions,r=this.oldData.values;[s,e]=ln(s,e),[a,i]=ln(a,i),[r,n]=ln(r,n),this.render({xPositions:s,yPositions:a,values:n,zeroLine:this.oldData.zeroLine,radius:this.oldData.radius});let o=[];return Object.keys(this.paths).length&&(o=o.concat(function(t,e,i,n,s){let a=[],r=i.map(((t,i)=>e[i]+","+t)).join("L");s&&(r=cn(e,i));const o=[t.path,{d:"M"+r},350,On];if(a.push(o),t.region){let i=`${e[0]},${n}L`,s=`L${e.slice(-1)[0]}, ${n}`;const o=[t.region,{d:"M"+i+r+s},350,On];a.push(o)}return a}(this.paths,e,i,t.zeroLine,this.constants.spline))),this.units.length&&this.units.map(((t,n)=>{o=o.concat(function(t,e,i){if("circle"!==t.nodeName){let n=t.getAttribute("transform").split("(")[1].slice(0,-1);return[Nn(t,n,[e,i],$n)]}return[[t,{cx:e,cy:i},Tn,On]]}(t,e[n],i[n]))})),o}}};function es(t,e,i){let n=Object.keys(ts).filter((e=>t.includes(e))),s=ts[n[0]];return Object.assign(s,{constants:e,getData:i}),new Zn(s)}function is(t){if(0===t)return[0,0];if(isNaN(t))return{mantissa:-6755399441055744,exponent:972};var e=t>0?1:-1;if(!isFinite(t))return{mantissa:4503599627370496*e,exponent:972};t=Math.abs(t);var i=Math.floor(Math.log10(t));return[e*(t/Math.pow(10,i)),i]}function ns(t,e=0){let[i,n]=is(t),s=e?e/Math.pow(10,n):0;i=i.toFixed(6);let a=function(t,e=0){let i=Math.ceil(t),n=Math.floor(e),s=i-n,a=s,r=1;s>5&&(s%2!=0&&(i++,s=i-n),a=s/2,r=2),s<=2&&(a=4,r=s/a),0===s&&(a=5,r=1);let o=[];for(var l=0;l<=a;l++)o.push(n+r*l);return o}(i,s);return a=a.map((t=>t*Math.pow(10,n))),a}function ss(t){return t[1]-t[0]}function as(t,e){return tn(e.zeroLine-t*e.scaleMultiplier)}const rs=12,os=rs;class ls extends Rn{constructor(t,e){super(t,e),this.barOptions=e.barOptions||{},this.lineOptions=e.lineOptions||{},this.type=e.type||"line",this.init=1,this.setup()}setMeasures(){this.data.datasets.length<=1&&(this.config.showLegend=0,this.measures.paddings.bottom=30)}configure(t){super.configure(t),t.axisOptions=t.axisOptions||{},t.tooltipOptions=t.tooltipOptions||{},this.config.xAxisMode=t.axisOptions.xAxisMode||"span",this.config.yAxisMode=t.axisOptions.yAxisMode||"span",this.config.xIsSeries=t.axisOptions.xIsSeries||0,this.config.shortenYAxisNumbers=t.axisOptions.shortenYAxisNumbers||0,this.config.formatTooltipX=t.tooltipOptions.formatTooltipX,this.config.formatTooltipY=t.tooltipOptions.formatTooltipY,this.config.valuesOverPoints=t.valuesOverPoints}prepareData(t=this.data){return function(t,e){t.labels=t.labels||[];let i=t.labels.length,n=t.datasets,s=new Array(i).fill(0);return n||(n=[{values:s}]),n.map((t=>{if(t.values){let e=t.values;e=e.map((t=>isNaN(t)?0:t)),e=e.length>i?e.slice(0,i):en(e,i-e.length,0),t.values=e}else t.values=s;t.chartType||(Ui.includes(e),t.chartType=e)})),t.yRegions&&t.yRegions.map((t=>{t.end<t.start&&([t.start,t.end]=[t.end,t.start])})),t}(t,this.type)}prepareFirstData(t=this.data){return function(t){let e=t.labels.length,i=new Array(e).fill(0),n={labels:t.labels.slice(0,-1),datasets:t.datasets.map((t=>({name:"",values:i.slice(0,-1),chartType:t.chartType})))};return t.yMarkers&&(n.yMarkers=[{value:0,label:""}]),t.yRegions&&(n.yRegions=[{start:0,end:0,label:""}]),n}(t)}calc(t=!1){this.calcXPositions(),t||this.calcYAxisParameters(this.getAllYValues(),"line"===this.type),this.makeDataByIndex()}calcXPositions(){let t=this.state,e=this.data.labels;t.datasetLength=e.length,t.unitWidth=this.width/t.datasetLength,t.xOffset=t.unitWidth/2,t.xAxis={labels:e,positions:e.map(((e,i)=>tn(t.xOffset+i*t.unitWidth)))}}calcYAxisParameters(t,e="false"){const i=function(t,e=!1){let i=Math.max(...t),n=Math.min(...t),s=0,a=[];function r(t,e){let i=ns(t),n=i[1]-i[0],s=0;for(var a=1;s<e;a++)s+=n,i.unshift(-1*s);return i}if(i>=0&&n>=0)s=is(i)[1],a=e?ns(i,n):ns(i);else if(i>0&&n<0){let t=Math.abs(n);i>=t?(s=is(i)[1],a=r(i,t)):(s=is(t)[1],a=r(t,i).reverse().map((t=>-1*t)))}else if(i<=0&&n<=0){let t=Math.abs(n),r=Math.abs(i);s=is(t)[1],a=e?ns(t,r):ns(t),a=a.reverse().map((t=>-1*t))}return a}(t,e),n=this.height/((s=i)[s.length-1]-s[0]);var s;const a=ss(i)*n,r=this.height-function(t){let e,i=ss(t);e=t.indexOf(0)>=0?t.indexOf(0):t[0]>0?-1*t[0]/i:-1*t[t.length-1]/i+(t.length-1);return e}(i)*a;this.state.yAxis={labels:i,positions:i.map((t=>r-t*n)),scaleMultiplier:n,zeroLine:r},this.calcDatasetPoints(),this.calcYExtremes(),this.calcYRegions()}calcDatasetPoints(){let t=this.state,e=e=>e.map((e=>as(e,t.yAxis)));t.datasets=this.data.datasets.map(((t,i)=>{let n=t.values,s=t.cumulativeYs||[];return{name:t.name&&t.name.replace(/<|>|&/g,(t=>"&"==t?"&amp;":"<"==t?"&lt;":"&gt;")),index:i,chartType:t.chartType,values:n,yPositions:e(n),cumulativeYs:s,cumulativeYPos:e(s)}}))}calcYExtremes(){let t=this.state;this.barOptions.stacked?t.yExtremes=t.datasets[t.datasets.length-1].cumulativeYPos:(t.yExtremes=new Array(t.datasetLength).fill(9999),t.datasets.map((e=>{e.yPositions.map(((e,i)=>{e<t.yExtremes[i]&&(t.yExtremes[i]=e)}))})))}calcYRegions(){let t=this.state;this.data.yMarkers&&(this.state.yMarkers=this.data.yMarkers.map((e=>(e.position=as(e.value,t.yAxis),e.options||(e.options={}),e)))),this.data.yRegions&&(this.state.yRegions=this.data.yRegions.map((e=>(e.startPos=as(e.start,t.yAxis),e.endPos=as(e.end,t.yAxis),e.options||(e.options={}),e))))}getAllYValues(){let t="values";if(this.barOptions.stacked){t="cumulativeYs";let e=new Array(this.state.datasetLength).fill(0);this.data.datasets.map(((i,n)=>{let s=this.data.datasets[n].values;i[t]=e=e.map(((t,e)=>t+s[e]))}))}let e=this.data.datasets.map((e=>e[t]));return this.data.yMarkers&&e.push(this.data.yMarkers.map((t=>t.value))),this.data.yRegions&&this.data.yRegions.map((t=>{e.push([t.end,t.start])})),[].concat(...e)}setupComponents(){let t=[["yAxis",{mode:this.config.yAxisMode,width:this.width,shortenNumbers:this.config.shortenYAxisNumbers},function(){return this.state.yAxis}.bind(this)],["xAxis",{mode:this.config.xAxisMode,height:this.height},function(){let t=this.state;return t.xAxis.calcLabels=function(t,e=[],i=!0){let n=t/e.length;n<=0&&(n=1);let s,a=n/7;if(i){let t=Math.max(...e.map((t=>t.length)));s=Math.ceil(t/a)}return e.map(((t,e)=>((t+="").length>a&&(i?e%s!=0&&(t=""):t=a-3>0?t.slice(0,a-3)+" ...":t.slice(0,a)+".."),t)))}(this.width,t.xAxis.labels,this.config.xIsSeries),t.xAxis}.bind(this)],["yRegions",{width:this.width,pos:"right"},function(){return this.state.yRegions}.bind(this)]],e=this.state.datasets.filter((t=>"bar"===t.chartType)),i=this.state.datasets.filter((t=>"line"===t.chartType)),n=e.map((t=>{let i=t.index;return["barGraph-"+t.index,{index:i,color:this.colors[i],stacked:this.barOptions.stacked,valuesOverPoints:this.config.valuesOverPoints,minHeight:0*this.height},function(){let t=this.state,n=t.datasets[i],s=this.barOptions.stacked,a=this.barOptions.spaceRatio||.5,r=t.unitWidth*(1-a),o=r/(s?1:e.length),l=t.xAxis.positions.map((t=>t-r/2));s||(l=l.map((t=>t+o*i)));let h=new Array(t.datasetLength).fill("");this.config.valuesOverPoints&&(h=s&&n.index===t.datasets.length-1?n.cumulativeYs:n.values);let c=new Array(t.datasetLength).fill(0);return s&&(c=n.yPositions.map(((t,e)=>t-n.cumulativeYPos[e]))),{xPositions:l,yPositions:n.yPositions,offsets:c,labels:h,zeroLine:t.yAxis.zeroLine,barsWidth:r,barWidth:o}}.bind(this)]})),s=i.map((t=>{let e=t.index;return["lineGraph-"+t.index,{index:e,color:this.colors[e],svgDefs:this.svgDefs,heatline:this.lineOptions.heatline,regionFill:this.lineOptions.regionFill,spline:this.lineOptions.spline,hideDots:this.lineOptions.hideDots,hideLine:this.lineOptions.hideLine,valuesOverPoints:this.config.valuesOverPoints},function(){let t=this.state,i=t.datasets[e],n=t.yAxis.positions[0]<t.yAxis.zeroLine?t.yAxis.positions[0]:t.yAxis.zeroLine;return{xPositions:t.xAxis.positions,yPositions:i.yPositions,values:i.values,zeroLine:n,radius:this.lineOptions.dotSize||4}}.bind(this)]})),a=[["yMarkers",{width:this.width,pos:"right"},function(){return this.state.yMarkers}.bind(this)]];t=t.concat(n,s,a);let r=["yMarkers","yRegions"];this.dataUnitComponents=[],this.components=new Map(t.filter((t=>!r.includes(t[0])||this.state[t[0]])).map((t=>{let e=es(...t);return(t[0].includes("lineGraph")||t[0].includes("barGraph"))&&this.dataUnitComponents.push(e),[t[0],e]})))}makeDataByIndex(){this.dataByIndex={};let t=this.state,e=this.config.formatTooltipX,i=this.config.formatTooltipY;t.xAxis.labels.map(((n,s)=>{let a=this.state.datasets.map(((t,e)=>{let n=t.values[s];return{title:t.name,value:n,yPos:t.yPositions[s],color:this.colors[e],formatted:i?i(n):n}}));this.dataByIndex[s]={label:n,formattedLabel:e?e(n):n,xPos:t.xAxis.positions[s],values:a,yExtreme:t.yExtremes[s]}}))}bindTooltip(){this.container.addEventListener("mousemove",(t=>{let e=this.measures,i=zi(this.container),n=t.pageX-i.left-Xi(e),s=t.pageY-i.top;s<this.height+Bi(e)&&s>Bi(e)?this.mapTooltipXPosition(n):this.tip.hideTip()}))}mapTooltipXPosition(t){let e=this.state;if(!e.yExtremes)return;let i=function(t,e,i=!1){let n=e.reduce((function(e,i){return Math.abs(i-t)<Math.abs(e-t)?i:e}),[]);return i?e.indexOf(n):n}(t,e.xAxis.positions,!0);if(i>=0){let t=this.dataByIndex[i];this.tip.setValues(t.xPos+this.tip.offset.x,t.yExtreme+this.tip.offset.y,{name:t.formattedLabel,value:""},t.values,i),this.tip.showTip()}}renderLegend(){let t=this.data;t.datasets.length>1&&(this.legendArea.textContent="",t.datasets.map(((t,e)=>{let i=function(t,e,i,n="none",s,a=!1){s=a?hn(s,15):s;let r={className:"legend-bar",x:0,y:0,width:i,height:"2px",fill:n},o=bn("text",{className:"legend-dataset-text",x:0,y:0,dy:"20px","font-size":"12px","text-anchor":"start",fill:_n,innerHTML:s}),l=bn("g",{transform:`translate(${t}, ${e})`});return l.appendChild(bn("rect",r)),l.appendChild(o),l}(100*e,"0",100,this.colors[e],t.name,this.config.truncateLegends);this.legendArea.appendChild(i)})))}makeOverlay(){this.init?this.init=0:(this.overlayGuides&&this.overlayGuides.forEach((t=>{let e=t.overlay;e.parentNode.removeChild(e)})),this.overlayGuides=this.dataUnitComponents.map((t=>({type:t.unitType,overlay:void 0,units:t.units}))),void 0===this.state.currentIndex&&(this.state.currentIndex=this.state.datasetLength-1),this.overlayGuides.map((t=>{let e=t.units[this.state.currentIndex];t.overlay=Sn[t.type](e),this.drawArea.appendChild(t.overlay)})))}updateOverlayGuides(){this.overlayGuides&&this.overlayGuides.forEach((t=>{let e=t.overlay;e.parentNode.removeChild(e)}))}bindOverlay(){this.parent.addEventListener("data-select",(()=>{this.updateOverlay()}))}bindUnits(){this.dataUnitComponents.map((t=>{t.units.map((t=>{t.addEventListener("click",(()=>{let e=t.getAttribute("data-point-index");this.setCurrentDataPoint(e)}))}))})),this.tip.container.addEventListener("click",(()=>{let t=this.tip.container.getAttribute("data-point-index");this.setCurrentDataPoint(t)}))}updateOverlay(){this.overlayGuides.map((t=>{let e=t.units[this.state.currentIndex];Cn[t.type](e,t.overlay)}))}onLeftArrow(){this.setCurrentDataPoint(this.state.currentIndex-1)}onRightArrow(){this.setCurrentDataPoint(this.state.currentIndex+1)}getDataPoint(t=this.state.currentIndex){let e=this.state;return{index:t,label:e.xAxis.labels[t],values:e.datasets.map((e=>e.values[t]))}}setCurrentDataPoint(t){let e=this.state;(t=parseInt(t))<0&&(t=0),t>=e.xAxis.labels.length&&(t=e.xAxis.labels.length-1),t!==e.currentIndex&&(e.currentIndex=t,function(t,e,i){var n=document.createEvent("HTMLEvents");for(var s in n.initEvent(e,!0,!0),i)n[s]=i[s];t.dispatchEvent(n)}(this.parent,"data-select",this.getDataPoint()))}addDataPoint(t,e,i=this.state.datasetLength){super.addDataPoint(t,e,i),this.data.labels.splice(i,0,t),this.data.datasets.map(((t,n)=>{t.values.splice(i,0,e[n])})),this.update(this.data)}removeDataPoint(t=this.state.datasetLength-1){this.data.labels.length<=1||(super.removeDataPoint(t),this.data.labels.splice(t,1),this.data.datasets.map((e=>{e.values.splice(t,1)})),this.update(this.data))}updateDataset(t,e=0){this.data.datasets[e].values=t,this.update(this.data)}updateDatasets(t){this.data.datasets.map(((e,i)=>{t[i]&&(e.values=t[i])})),this.update(this.data)}}const hs={bar:ls,line:ls,percentage:class extends Wn{constructor(t,e){super(t,e),this.type="percentage",this.setup()}setMeasures(t){let e=this.measures;this.barOptions=t.barOptions||{};let i=this.barOptions;i.height=i.height||20,i.depth=i.depth||2,e.paddings.right=30,e.legendHeight=60,e.baseHeight=8*(i.height+.5*i.depth)}setupComponents(){let t=this.state,e=[["percentageBars",{barHeight:this.barOptions.height,barDepth:this.barOptions.depth},function(){return{xPositions:t.xPositions,widths:t.widths,colors:this.colors}}.bind(this)]];this.components=new Map(e.map((t=>{let e=es(...t);return[t[0],e]})))}calc(){super.calc();let t=this.state;t.xPositions=[],t.widths=[];let e=0;t.sliceTotals.map((i=>{let n=this.width*i/t.grandTotal;t.widths.push(n),t.xPositions.push(e),e+=n}))}makeDataByIndex(){}bindTooltip(){let t=this.state;this.container.addEventListener("mousemove",(e=>{let i=this.components.get("percentageBars").store,n=e.target;if(i.includes(n)){let e=i.indexOf(n),s=zi(this.container),a=zi(n),r=a.left-s.left+parseInt(n.getAttribute("width"))/2,o=a.top-s.top,l=(this.formattedLabels&&this.formattedLabels.length>0?this.formattedLabels[e]:this.state.labels[e])+": ",h=t.sliceTotals[e]/t.grandTotal;this.tip.setValues(r,o,{name:l,value:(100*h).toFixed(1)+"%"}),this.tip.showTip()}}))}},heatmap:class extends Rn{constructor(t,e){super(t,e),this.type="heatmap",this.countLabel=e.countLabel||"";let i=["Sunday","Monday"],n=i.includes(e.startSubDomain)?e.startSubDomain:"Sunday";this.startSubDomainIndex=i.indexOf(n),this.setup()}setMeasures(t){let e=this.measures;this.discreteDomains=0===t.discreteDomains?0:1,e.paddings.top=36,e.paddings.bottom=0,e.legendHeight=24,e.baseHeight=84+Vi(e);let i=this.data,n=this.discreteDomains?12:0;this.independentWidth=(qn(i.start,i.end)+n)*rs+qi(e)}updateWidth(){let t=this.discreteDomains?12:0,e=this.state.noOfWeeks?this.state.noOfWeeks:52;this.baseWidth=(e+t)*rs+qi(this.measures)}prepareData(t=this.data){if(t.start&&t.end&&t.start>t.end)throw new Error("Start date cannot be greater than end date.");if(t.start||(t.start=new Date,t.start.setFullYear(t.start.getFullYear()-1)),t.end||(t.end=new Date),t.dataPoints=t.dataPoints||{},parseInt(Object.keys(t.dataPoints)[0])>1e5){let e={};Object.keys(t.dataPoints).forEach((i=>{let n=new Date(i*jn);e[Xn(n)]=t.dataPoints[i]})),t.dataPoints=e}return t}calc(){let t=this.state;t.start=Vn(this.data.start),t.end=Vn(this.data.end),t.firstWeekStart=Vn(t.start),t.noOfWeeks=qn(t.start,t.end),t.distribution=function(t,e){let i=Math.max(...t),n=1/(e-1),s=[];for(var a=0;a<e;a++){let t=i*(n*a);s.push(t)}return s}(Object.values(this.data.dataPoints),5),t.domainConfigs=this.getDomains()}setupComponents(){let t=this.state,e=this.discreteDomains?0:1,i=t.domainConfigs.map(((i,n)=>["heatDomain",{index:i.index,colWidth:rs,rowHeight:os,squareSize:Gi,radius:this.rawChartArgs.radius||0,xTranslate:t.domainConfigs.filter(((t,e)=>e<n)).map((t=>t.cols.length-e)).reduce(((t,e)=>t+e),0)*rs},function(){return t.domainConfigs[n]}.bind(this)]));this.components=new Map(i.map(((t,e)=>{let i=es(...t);return[t[0]+"-"+e,i]})));let n=0;Fn.forEach(((t,e)=>{if([1,3,5].includes(e)){let e=An("subdomain-name",-6,n,t,{fontSize:Gi,dy:8,textAnchor:"end"});this.drawArea.appendChild(e)}n+=os}))}update(t){t||console.error("No data to update."),this.data=this.prepareData(t),this.draw(),this.bindTooltip()}bindTooltip(){this.container.addEventListener("mousemove",(t=>{this.components.forEach((e=>{let i=e.store,n=t.target;if(i.includes(n)){let e=n.getAttribute("data-value"),i=n.getAttribute("data-date").split("-"),s=Gn(parseInt(i[1])-1,!0),a=this.container.getBoundingClientRect(),r=n.getBoundingClientRect(),o=parseInt(t.target.getAttribute("width")),l=r.left-a.left+o/2,h=r.top-a.top,c=e+" "+this.countLabel,d=" on "+s+" "+i[0]+", "+i[2];this.tip.setValues(l,h,{name:d,value:c,valueFirst:1},[]),this.tip.showTip()}}))}))}renderLegend(){this.legendArea.textContent="";let t=0,e=this.rawChartArgs.radius||0,i=An("subdomain-name",t,12,"Less",{fontSize:11,dy:9});t=30,this.legendArea.appendChild(i),this.colors.slice(0,5).map(((i,n)=>{const s=kn("heatmap-legend-unit",t+15*n,12,Gi,e,i);this.legendArea.appendChild(s)}));let n=An("subdomain-name",t+75+3,12,"More",{fontSize:11,dy:9});this.legendArea.appendChild(n)}getDomains(){let t=this.state;const[e,i]=[t.start.getMonth(),t.start.getFullYear()],[n,s]=[t.end.getMonth(),t.end.getFullYear()],a=n-e+1+12*(s-i);let r=[],o=Vn(t.start);for(var l=0;l<a;l++){let e=t.end;if(!Un(o,t.end)){let[t,i]=[o.getMonth(),o.getFullYear()];e=Kn(t,i)}r.push(this.getDomainConfig(o,e)),Qn(e,1),o=e}return r}getDomainConfig(t,e=""){let[i,n]=[t.getMonth(),t.getFullYear()],s=Jn(t),a={index:i,cols:[]};Qn(e=Vn(e)||Kn(i,n),1);let r,o=qn(s,e),l=[];for(var h=0;h<o;h++)r=this.getCol(s,i),l.push(r),s=new Date(r[6].yyyyMmDd),Qn(s,1);return void 0!==r[6].dataValue&&(Qn(s,1),l.push(this.getCol(s,i,!0))),a.cols=l,a}getCol(t,e,i=!1){let n=this.state,s=Vn(t),a=[];for(var r=0;r<7;r++,Qn(s,1)){let t={},r=s>=n.start&&s<=n.end;i||s.getMonth()!==e||!r?t.yyyyMmDd=Xn(s):t=this.getSubDomainConfig(s),a.push(t)}return a}getSubDomainConfig(t){let e=Xn(t),i=this.data.dataPoints[e];var n,s;return{yyyyMmDd:e,dataValue:i||0,fill:this.colors[(n=i,s=this.state.distribution,s.filter((t=>t<n)).length)]}}},pie:class extends Wn{constructor(t,e){super(t,e),this.type="pie",this.initTimeout=0,this.init=1,this.setup()}configure(t){super.configure(t),this.mouseMove=this.mouseMove.bind(this),this.mouseLeave=this.mouseLeave.bind(this),this.hoverRadio=t.hoverRadio||.1,this.config.startAngle=t.startAngle||0,this.clockWise=t.clockWise||!1}calc(){super.calc();let t=this.state;this.radius=this.height>this.width?this.center.x:this.center.y;const{radius:e,clockWise:i}=this,n=t.slicesProperties||[];t.sliceStrings=[],t.slicesProperties=[];let s=180-this.config.startAngle;t.sliceTotals.map(((a,r)=>{const o=s,l=a/t.grandTotal*360,h=l>180?1:0,c=i?-l:l,d=s+=c,u=sn(o,e),p=sn(d,e),f=this.init&&n[r];let g,m;this.init?(g=f?f.startPosition:u,m=f?f.endPosition:u):(g=u,m=p);const _=360===l?function(t,e,i,n,s=1,a=0){let[r,o]=[i.x+t.x,i.y+t.y],[l,h,c]=[i.x+e.x,2*i.y,i.y+e.y];return`M${i.x} ${i.y}\n\t\tL${r} ${o}\n\t\tA ${n} ${n} 0 ${a} ${s?1:0}\n\t\t${l} ${h} z\n\t\tL${r} ${h}\n\t\tA ${n} ${n} 0 ${a} ${s?1:0}\n\t\t${l} ${c} z`}(g,m,this.center,this.radius,i,h):function(t,e,i,n,s=1,a=0){let[r,o]=[i.x+t.x,i.y+t.y],[l,h]=[i.x+e.x,i.y+e.y];return`M${i.x} ${i.y}\n\t\tL${r} ${o}\n\t\tA ${n} ${n} 0 ${a} ${s?1:0}\n\t\t${l} ${h} z`}(g,m,this.center,this.radius,i,h);t.sliceStrings.push(_),t.slicesProperties.push({startPosition:u,endPosition:p,value:a,total:t.grandTotal,startAngle:o,endAngle:d,angle:c})})),this.init=0}setupComponents(){let t=this.state,e=[["pieSlices",{},function(){return{sliceStrings:t.sliceStrings,colors:this.colors}}.bind(this)]];this.components=new Map(e.map((t=>{let e=es(...t);return[t[0],e]})))}calTranslateByAngle(t){const{radius:e,hoverRadio:i}=this,n=sn(t.startAngle+t.angle/2,e);return`translate3d(${n.x*i}px,${n.y*i}px,0)`}hoverSlice(t,e,i,n){if(!t)return;const s=this.colors[e];if(i){Yn(t,this.calTranslateByAngle(this.state.slicesProperties[e])),t.style.fill=pn(s,50);let i=zi(this.svg),a=n.pageX-i.left+10,r=n.pageY-i.top-10,o=(this.formatted_labels&&this.formatted_labels.length>0?this.formatted_labels[e]:this.state.labels[e])+": ",l=(100*this.state.sliceTotals[e]/this.state.grandTotal).toFixed(1);this.tip.setValues(a,r,{name:o,value:l+"%"}),this.tip.showTip()}else Yn(t,"translate3d(0,0,0)"),this.tip.hideTip(),t.style.fill=s}bindTooltip(){this.container.addEventListener("mousemove",this.mouseMove),this.container.addEventListener("mouseleave",this.mouseLeave)}mouseMove(t){const e=t.target;let i=this.components.get("pieSlices").store,n=this.curActiveSliceIndex,s=this.curActiveSlice;if(i.includes(e)){let a=i.indexOf(e);this.hoverSlice(s,n,!1),this.curActiveSlice=e,this.curActiveSliceIndex=a,this.hoverSlice(e,a,!0,t)}else this.mouseLeave()}mouseLeave(){this.hoverSlice(this.curActiveSlice,this.curActiveSliceIndex,!1)}},donut:class extends Wn{constructor(t,e){super(t,e),this.type="donut",this.initTimeout=0,this.init=1,this.setup()}configure(t){super.configure(t),this.mouseMove=this.mouseMove.bind(this),this.mouseLeave=this.mouseLeave.bind(this),this.hoverRadio=t.hoverRadio||.1,this.config.startAngle=t.startAngle||0,this.clockWise=t.clockWise||!1,this.strokeWidth=t.strokeWidth||30}calc(){super.calc();let t=this.state;this.radius=this.height>this.width?this.center.x-this.strokeWidth/2:this.center.y-this.strokeWidth/2;const{radius:e,clockWise:i}=this,n=t.slicesProperties||[];t.sliceStrings=[],t.slicesProperties=[];let s=180-this.config.startAngle;t.sliceTotals.map(((a,r)=>{const o=s,l=a/t.grandTotal*360,h=l>180?1:0,c=i?-l:l,d=s+=c,u=sn(o,e),p=sn(d,e),f=this.init&&n[r];let g,m;this.init?(g=f?f.startPosition:u,m=f?f.endPosition:u):(g=u,m=p);const _=360===l?function(t,e,i,n,s=1,a=0){let[r,o]=[i.x+t.x,i.y+t.y],[l,h,c]=[i.x+e.x,2*n+o,i.y+t.y];return`M${r} ${o}\n\t\tA ${n} ${n} 0 ${a} ${s?1:0}\n\t\t${l} ${h}\n\t\tM${r} ${h}\n\t\tA ${n} ${n} 0 ${a} ${s?1:0}\n\t\t${l} ${c}`}(g,m,this.center,this.radius,this.clockWise,h):function(t,e,i,n,s=1,a=0){let[r,o]=[i.x+t.x,i.y+t.y],[l,h]=[i.x+e.x,i.y+e.y];return`M${r} ${o}\n\t\tA ${n} ${n} 0 ${a} ${s?1:0}\n\t\t${l} ${h}`}(g,m,this.center,this.radius,this.clockWise,h);t.sliceStrings.push(_),t.slicesProperties.push({startPosition:u,endPosition:p,value:a,total:t.grandTotal,startAngle:o,endAngle:d,angle:c})})),this.init=0}setupComponents(){let t=this.state,e=[["donutSlices",{},function(){return{sliceStrings:t.sliceStrings,colors:this.colors,strokeWidth:this.strokeWidth}}.bind(this)]];this.components=new Map(e.map((t=>{let e=es(...t);return[t[0],e]})))}calTranslateByAngle(t){const{radius:e,hoverRadio:i}=this,n=sn(t.startAngle+t.angle/2,e);return`translate3d(${n.x*i}px,${n.y*i}px,0)`}hoverSlice(t,e,i,n){if(!t)return;const s=this.colors[e];if(i){Yn(t,this.calTranslateByAngle(this.state.slicesProperties[e])),t.style.stroke=pn(s,50);let i=zi(this.svg),a=n.pageX-i.left+10,r=n.pageY-i.top-10,o=(this.formatted_labels&&this.formatted_labels.length>0?this.formatted_labels[e]:this.state.labels[e])+": ",l=(100*this.state.sliceTotals[e]/this.state.grandTotal).toFixed(1);this.tip.setValues(a,r,{name:o,value:l+"%"}),this.tip.showTip()}else Yn(t,"translate3d(0,0,0)"),this.tip.hideTip(),t.style.stroke=s}bindTooltip(){this.container.addEventListener("mousemove",this.mouseMove),this.container.addEventListener("mouseleave",this.mouseLeave)}mouseMove(t){const e=t.target;let i=this.components.get("donutSlices").store,n=this.curActiveSliceIndex,s=this.curActiveSlice;if(i.includes(e)){let a=i.indexOf(e);this.hoverSlice(s,n,!1),this.curActiveSlice=e,this.curActiveSliceIndex=a,this.hoverSlice(e,a,!0,t)}else this.mouseLeave()}mouseLeave(){this.hoverSlice(this.curActiveSlice,this.curActiveSliceIndex,!1)}}};class cs{constructor(t,e){return function(t="line",e,i){return"axis-mixed"===t?(i.type="line",new ls(e,i)):hs[t]?new hs[t](e,i):void console.error("Undefined chart type: "+t)}(e.type,t,e)}}function ds(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function us(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?ds(Object(i),!0).forEach((function(e){fs(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ds(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function ps(t){return ps="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ps(t)}function fs(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function gs(){return gs=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},gs.apply(this,arguments)}function ms(t,e){if(null==t)return{};var i,n,s=function(t,e){if(null==t)return{};var i,n,s={},a=Object.keys(t);for(n=0;n<a.length;n++)i=a[n],e.indexOf(i)>=0||(s[i]=t[i]);return s}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)i=a[n],e.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(t,i)&&(s[i]=t[i])}return s}function _s(t){return function(t){if(Array.isArray(t))return vs(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return vs(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return vs(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vs(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function bs(t){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(t)}var ys=bs(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),xs=bs(/Edge/i),ws=bs(/firefox/i),Es=bs(/safari/i)&&!bs(/chrome/i)&&!bs(/android/i),ks=bs(/iP(ad|od|hone)/i),As=bs(/chrome/i)&&bs(/android/i),Ds={capture:!1,passive:!1};function Ms(t,e,i){t.addEventListener(e,i,!ys&&Ds)}function Ss(t,e,i){t.removeEventListener(e,i,!ys&&Ds)}function Cs(t,e){if(e){if(">"===e[0]&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch(t){return!1}return!1}}function Ts(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function $s(t,e,i,n){if(t){i=i||document;do{if(null!=e&&(">"===e[0]?t.parentNode===i&&Cs(t,e):Cs(t,e))||n&&t===i)return t;if(t===i)break}while(t=Ts(t))}return null}var Os,Ns=/\s+/g;function Ls(t,e,i){if(t&&e)if(t.classList)t.classList[i?"add":"remove"](e);else{var n=(" "+t.className+" ").replace(Ns," ").replace(" "+e+" "," ");t.className=(n+(i?" "+e:"")).replace(Ns," ")}}function Ps(t,e,i){var n=t&&t.style;if(n){if(void 0===i)return document.defaultView&&document.defaultView.getComputedStyle?i=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(i=t.currentStyle),void 0===e?i:i[e];e in n||-1!==e.indexOf("webkit")||(e="-webkit-"+e),n[e]=i+("string"==typeof i?"":"px")}}function Is(t,e){var i="";if("string"==typeof t)i=t;else do{var n=Ps(t,"transform");n&&"none"!==n&&(i=n+" "+i)}while(!e&&(t=t.parentNode));var s=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return s&&new s(i)}function Ys(t,e,i){if(t){var n=t.getElementsByTagName(e),s=0,a=n.length;if(i)for(;s<a;s++)i(n[s],s);return n}return[]}function Hs(){var t=document.scrollingElement;return t||document.documentElement}function Rs(t,e,i,n,s){if(t.getBoundingClientRect||t===window){var a,r,o,l,h,c,d;if(t!==window&&t.parentNode&&t!==Hs()?(r=(a=t.getBoundingClientRect()).top,o=a.left,l=a.bottom,h=a.right,c=a.height,d=a.width):(r=0,o=0,l=window.innerHeight,h=window.innerWidth,c=window.innerHeight,d=window.innerWidth),(e||i)&&t!==window&&(s=s||t.parentNode,!ys))do{if(s&&s.getBoundingClientRect&&("none"!==Ps(s,"transform")||i&&"static"!==Ps(s,"position"))){var u=s.getBoundingClientRect();r-=u.top+parseInt(Ps(s,"border-top-width")),o-=u.left+parseInt(Ps(s,"border-left-width")),l=r+a.height,h=o+a.width;break}}while(s=s.parentNode);if(n&&t!==window){var p=Is(s||t),f=p&&p.a,g=p&&p.d;p&&(l=(r/=g)+(c/=g),h=(o/=f)+(d/=f))}return{top:r,left:o,bottom:l,right:h,width:d,height:c}}}function Ws(t,e,i){for(var n=Xs(t,!0),s=Rs(t)[e];n;){var a=Rs(n)[i];if(!("top"===i||"left"===i?s>=a:s<=a))return n;if(n===Hs())break;n=Xs(n,!1)}return!1}function js(t,e,i,n){for(var s=0,a=0,r=t.children;a<r.length;){if("none"!==r[a].style.display&&r[a]!==Ja.ghost&&(n||r[a]!==Ja.dragged)&&$s(r[a],i.draggable,t,!1)){if(s===e)return r[a];s++}a++}return null}function zs(t,e){for(var i=t.lastElementChild;i&&(i===Ja.ghost||"none"===Ps(i,"display")||e&&!Cs(i,e));)i=i.previousElementSibling;return i||null}function Fs(t,e){var i=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)"TEMPLATE"===t.nodeName.toUpperCase()||t===Ja.clone||e&&!Cs(t,e)||i++;return i}function Bs(t){var e=0,i=0,n=Hs();if(t)do{var s=Is(t),a=s.a,r=s.d;e+=t.scrollLeft*a,i+=t.scrollTop*r}while(t!==n&&(t=t.parentNode));return[e,i]}function Xs(t,e){if(!t||!t.getBoundingClientRect)return Hs();var i=t,n=!1;do{if(i.clientWidth<i.scrollWidth||i.clientHeight<i.scrollHeight){var s=Ps(i);if(i.clientWidth<i.scrollWidth&&("auto"==s.overflowX||"scroll"==s.overflowX)||i.clientHeight<i.scrollHeight&&("auto"==s.overflowY||"scroll"==s.overflowY)){if(!i.getBoundingClientRect||i===document.body)return Hs();if(n||e)return i;n=!0}}}while(i=i.parentNode);return Hs()}function Vs(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}function qs(t,e){return function(){if(!Os){var i=arguments,n=this;1===i.length?t.call(n,i[0]):t.apply(n,i),Os=setTimeout((function(){Os=void 0}),e)}}}function Us(t,e,i){t.scrollLeft+=e,t.scrollTop+=i}function Gs(t){var e=window.Polymer,i=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):i?i(t).clone(!0)[0]:t.cloneNode(!0)}function Ks(t,e){Ps(t,"position","absolute"),Ps(t,"top",e.top),Ps(t,"left",e.left),Ps(t,"width",e.width),Ps(t,"height",e.height)}function Js(t){Ps(t,"position",""),Ps(t,"top",""),Ps(t,"left",""),Ps(t,"width",""),Ps(t,"height","")}var Qs="Sortable"+(new Date).getTime();function Zs(){var t,e=[];return{captureAnimationState:function(){(e=[],this.options.animation)&&[].slice.call(this.el.children).forEach((function(t){if("none"!==Ps(t,"display")&&t!==Ja.ghost){e.push({target:t,rect:Rs(t)});var i=us({},e[e.length-1].rect);if(t.thisAnimationDuration){var n=Is(t,!0);n&&(i.top-=n.f,i.left-=n.e)}t.fromRect=i}}))},addAnimationState:function(t){e.push(t)},removeAnimationState:function(t){e.splice(function(t,e){for(var i in t)if(t.hasOwnProperty(i))for(var n in e)if(e.hasOwnProperty(n)&&e[n]===t[i][n])return Number(i);return-1}(e,{target:t}),1)},animateAll:function(i){var n=this;if(!this.options.animation)return clearTimeout(t),void("function"==typeof i&&i());var s=!1,a=0;e.forEach((function(t){var e=0,i=t.target,r=i.fromRect,o=Rs(i),l=i.prevFromRect,h=i.prevToRect,c=t.rect,d=Is(i,!0);d&&(o.top-=d.f,o.left-=d.e),i.toRect=o,i.thisAnimationDuration&&Vs(l,o)&&!Vs(r,o)&&(c.top-o.top)/(c.left-o.left)==(r.top-o.top)/(r.left-o.left)&&(e=function(t,e,i,n){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-i.top,2)+Math.pow(e.left-i.left,2))*n.animation}(c,l,h,n.options)),Vs(o,r)||(i.prevFromRect=r,i.prevToRect=o,e||(e=n.options.animation),n.animate(i,c,o,e)),e&&(s=!0,a=Math.max(a,e),clearTimeout(i.animationResetTimer),i.animationResetTimer=setTimeout((function(){i.animationTime=0,i.prevFromRect=null,i.fromRect=null,i.prevToRect=null,i.thisAnimationDuration=null}),e),i.thisAnimationDuration=e)})),clearTimeout(t),s?t=setTimeout((function(){"function"==typeof i&&i()}),a):"function"==typeof i&&i(),e=[]},animate:function(t,e,i,n){if(n){Ps(t,"transition",""),Ps(t,"transform","");var s=Is(this.el),a=s&&s.a,r=s&&s.d,o=(e.left-i.left)/(a||1),l=(e.top-i.top)/(r||1);t.animatingX=!!o,t.animatingY=!!l,Ps(t,"transform","translate3d("+o+"px,"+l+"px,0)"),this.forRepaintDummy=function(t){return t.offsetWidth}(t),Ps(t,"transition","transform "+n+"ms"+(this.options.easing?" "+this.options.easing:"")),Ps(t,"transform","translate3d(0,0,0)"),"number"==typeof t.animated&&clearTimeout(t.animated),t.animated=setTimeout((function(){Ps(t,"transition",""),Ps(t,"transform",""),t.animated=!1,t.animatingX=!1,t.animatingY=!1}),n)}}}}var ta=[],ea={initializeByDefault:!0},ia={mount:function(t){for(var e in ea)ea.hasOwnProperty(e)&&!(e in t)&&(t[e]=ea[e]);ta.forEach((function(e){if(e.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")})),ta.push(t)},pluginEvent:function(t,e,i){var n=this;this.eventCanceled=!1,i.cancel=function(){n.eventCanceled=!0};var s=t+"Global";ta.forEach((function(n){e[n.pluginName]&&(e[n.pluginName][s]&&e[n.pluginName][s](us({sortable:e},i)),e.options[n.pluginName]&&e[n.pluginName][t]&&e[n.pluginName][t](us({sortable:e},i)))}))},initializePlugins:function(t,e,i,n){for(var s in ta.forEach((function(n){var s=n.pluginName;if(t.options[s]||n.initializeByDefault){var a=new n(t,e,t.options);a.sortable=t,a.options=t.options,t[s]=a,gs(i,a.defaults)}})),t.options)if(t.options.hasOwnProperty(s)){var a=this.modifyOption(t,s,t.options[s]);void 0!==a&&(t.options[s]=a)}},getEventProperties:function(t,e){var i={};return ta.forEach((function(n){"function"==typeof n.eventProperties&&gs(i,n.eventProperties.call(e[n.pluginName],t))})),i},modifyOption:function(t,e,i){var n;return ta.forEach((function(s){t[s.pluginName]&&s.optionListeners&&"function"==typeof s.optionListeners[e]&&(n=s.optionListeners[e].call(t[s.pluginName],i))})),n}};function na(t){var e=t.sortable,i=t.rootEl,n=t.name,s=t.targetEl,a=t.cloneEl,r=t.toEl,o=t.fromEl,l=t.oldIndex,h=t.newIndex,c=t.oldDraggableIndex,d=t.newDraggableIndex,u=t.originalEvent,p=t.putSortable,f=t.extraEventProperties;if(e=e||i&&i[Qs]){var g,m=e.options,_="on"+n.charAt(0).toUpperCase()+n.substr(1);!window.CustomEvent||ys||xs?(g=document.createEvent("Event")).initEvent(n,!0,!0):g=new CustomEvent(n,{bubbles:!0,cancelable:!0}),g.to=r||i,g.from=o||i,g.item=s||i,g.clone=a,g.oldIndex=l,g.newIndex=h,g.oldDraggableIndex=c,g.newDraggableIndex=d,g.originalEvent=u,g.pullMode=p?p.lastPutMode:void 0;var v=us(us({},f),ia.getEventProperties(n,e));for(var b in v)g[b]=v[b];i&&i.dispatchEvent(g),m[_]&&m[_].call(e,g)}}var sa=["evt"],aa=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=i.evt,s=ms(i,sa);ia.pluginEvent.bind(Ja)(t,e,us({dragEl:oa,parentEl:la,ghostEl:ha,rootEl:ca,nextEl:da,lastDownEl:ua,cloneEl:pa,cloneHidden:fa,dragStarted:Ma,putSortable:ya,activeSortable:Ja.active,originalEvent:n,oldIndex:ga,oldDraggableIndex:_a,newIndex:ma,newDraggableIndex:va,hideGhostForTarget:qa,unhideGhostForTarget:Ua,cloneNowHidden:function(){fa=!0},cloneNowShown:function(){fa=!1},dispatchSortableEvent:function(t){ra({sortable:e,name:t,originalEvent:n})}},s))};function ra(t){na(us({putSortable:ya,cloneEl:pa,targetEl:oa,rootEl:ca,oldIndex:ga,oldDraggableIndex:_a,newIndex:ma,newDraggableIndex:va},t))}var oa,la,ha,ca,da,ua,pa,fa,ga,ma,_a,va,ba,ya,xa,wa,Ea,ka,Aa,Da,Ma,Sa,Ca,Ta,$a,Oa=!1,Na=!1,La=[],Pa=!1,Ia=!1,Ya=[],Ha=!1,Ra=[],Wa="undefined"!=typeof document,ja=ks,za=xs||ys?"cssFloat":"float",Fa=Wa&&!As&&!ks&&"draggable"in document.createElement("div"),Ba=function(){if(Wa){if(ys)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto","auto"===t.style.pointerEvents}}(),Xa=function(t,e){var i=Ps(t),n=parseInt(i.width)-parseInt(i.paddingLeft)-parseInt(i.paddingRight)-parseInt(i.borderLeftWidth)-parseInt(i.borderRightWidth),s=js(t,0,e),a=js(t,1,e),r=s&&Ps(s),o=a&&Ps(a),l=r&&parseInt(r.marginLeft)+parseInt(r.marginRight)+Rs(s).width,h=o&&parseInt(o.marginLeft)+parseInt(o.marginRight)+Rs(a).width;if("flex"===i.display)return"column"===i.flexDirection||"column-reverse"===i.flexDirection?"vertical":"horizontal";if("grid"===i.display)return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&r.float&&"none"!==r.float){var c="left"===r.float?"left":"right";return!a||"both"!==o.clear&&o.clear!==c?"horizontal":"vertical"}return s&&("block"===r.display||"flex"===r.display||"table"===r.display||"grid"===r.display||l>=n&&"none"===i[za]||a&&"none"===i[za]&&l+h>n)?"vertical":"horizontal"},Va=function(t){function e(t,i){return function(n,s,a,r){var o=n.options.group.name&&s.options.group.name&&n.options.group.name===s.options.group.name;if(null==t&&(i||o))return!0;if(null==t||!1===t)return!1;if(i&&"clone"===t)return t;if("function"==typeof t)return e(t(n,s,a,r),i)(n,s,a,r);var l=(i?n:s).options.group.name;return!0===t||"string"==typeof t&&t===l||t.join&&t.indexOf(l)>-1}}var i={},n=t.group;n&&"object"==ps(n)||(n={name:n}),i.name=n.name,i.checkPull=e(n.pull,!0),i.checkPut=e(n.put),i.revertClone=n.revertClone,t.group=i},qa=function(){!Ba&&ha&&Ps(ha,"display","none")},Ua=function(){!Ba&&ha&&Ps(ha,"display","")};Wa&&document.addEventListener("click",(function(t){if(Na)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),Na=!1,!1}),!0);var Ga=function(t){if(oa){t=t.touches?t.touches[0]:t;var e=(s=t.clientX,a=t.clientY,La.some((function(t){var e=t[Qs].options.emptyInsertThreshold;if(e&&!zs(t)){var i=Rs(t),n=s>=i.left-e&&s<=i.right+e,o=a>=i.top-e&&a<=i.bottom+e;return n&&o?r=t:void 0}})),r);if(e){var i={};for(var n in t)t.hasOwnProperty(n)&&(i[n]=t[n]);i.target=i.rootEl=e,i.preventDefault=void 0,i.stopPropagation=void 0,e[Qs]._onDragOver(i)}}var s,a,r},Ka=function(t){oa&&oa.parentNode[Qs]._isOutsideThisEl(t.target)};function Ja(t,e){if(!t||!t.nodeType||1!==t.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=gs({},e),t[Qs]=this;var i={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Xa(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(t,e){t.setData("Text",e.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==Ja.supportPointer&&"PointerEvent"in window&&!Es,emptyInsertThreshold:5};for(var n in ia.initializePlugins(this,t,i),i)!(n in e)&&(e[n]=i[n]);for(var s in Va(e),this)"_"===s.charAt(0)&&"function"==typeof this[s]&&(this[s]=this[s].bind(this));this.nativeDraggable=!e.forceFallback&&Fa,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?Ms(t,"pointerdown",this._onTapStart):(Ms(t,"mousedown",this._onTapStart),Ms(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(Ms(t,"dragover",this),Ms(t,"dragenter",this)),La.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),gs(this,Zs())}function Qa(t,e,i,n,s,a,r,o){var l,h,c=t[Qs],d=c.options.onMove;return!window.CustomEvent||ys||xs?(l=document.createEvent("Event")).initEvent("move",!0,!0):l=new CustomEvent("move",{bubbles:!0,cancelable:!0}),l.to=e,l.from=t,l.dragged=i,l.draggedRect=n,l.related=s||e,l.relatedRect=a||Rs(e),l.willInsertAfter=o,l.originalEvent=r,t.dispatchEvent(l),d&&(h=d.call(c,l,r)),h}function Za(t){t.draggable=!1}function tr(){Ha=!1}function er(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,i=e.length,n=0;i--;)n+=e.charCodeAt(i);return n.toString(36)}function ir(t){return setTimeout(t,0)}function nr(t){return clearTimeout(t)}Ja.prototype={constructor:Ja,_isOutsideThisEl:function(t){this.el.contains(t)||t===this.el||(Sa=null)},_getDirection:function(t,e){return"function"==typeof this.options.direction?this.options.direction.call(this,t,e,oa):this.options.direction},_onTapStart:function(t){if(t.cancelable){var e=this,i=this.el,n=this.options,s=n.preventOnFilter,a=t.type,r=t.touches&&t.touches[0]||t.pointerType&&"touch"===t.pointerType&&t,o=(r||t).target,l=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||o,h=n.filter;if(function(t){Ra.length=0;var e=t.getElementsByTagName("input"),i=e.length;for(;i--;){var n=e[i];n.checked&&Ra.push(n)}}(i),!oa&&!(/mousedown|pointerdown/.test(a)&&0!==t.button||n.disabled)&&!l.isContentEditable&&(this.nativeDraggable||!Es||!o||"SELECT"!==o.tagName.toUpperCase())&&!((o=$s(o,n.draggable,i,!1))&&o.animated||ua===o)){if(ga=Fs(o),_a=Fs(o,n.draggable),"function"==typeof h){if(h.call(this,t,o,this))return ra({sortable:e,rootEl:l,name:"filter",targetEl:o,toEl:i,fromEl:i}),aa("filter",e,{evt:t}),void(s&&t.cancelable&&t.preventDefault())}else if(h&&(h=h.split(",").some((function(n){if(n=$s(l,n.trim(),i,!1))return ra({sortable:e,rootEl:n,name:"filter",targetEl:o,fromEl:i,toEl:i}),aa("filter",e,{evt:t}),!0}))))return void(s&&t.cancelable&&t.preventDefault());n.handle&&!$s(l,n.handle,i,!1)||this._prepareDragStart(t,r,o)}}},_prepareDragStart:function(t,e,i){var n,s=this,a=s.el,r=s.options,o=a.ownerDocument;if(i&&!oa&&i.parentNode===a){var l=Rs(i);if(ca=a,la=(oa=i).parentNode,da=oa.nextSibling,ua=i,ba=r.group,Ja.dragged=oa,xa={target:oa,clientX:(e||t).clientX,clientY:(e||t).clientY},Aa=xa.clientX-l.left,Da=xa.clientY-l.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,oa.style["will-change"]="all",n=function(){aa("delayEnded",s,{evt:t}),Ja.eventCanceled?s._onDrop():(s._disableDelayedDragEvents(),!ws&&s.nativeDraggable&&(oa.draggable=!0),s._triggerDragStart(t,e),ra({sortable:s,name:"choose",originalEvent:t}),Ls(oa,r.chosenClass,!0))},r.ignore.split(",").forEach((function(t){Ys(oa,t.trim(),Za)})),Ms(o,"dragover",Ga),Ms(o,"mousemove",Ga),Ms(o,"touchmove",Ga),Ms(o,"mouseup",s._onDrop),Ms(o,"touchend",s._onDrop),Ms(o,"touchcancel",s._onDrop),ws&&this.nativeDraggable&&(this.options.touchStartThreshold=4,oa.draggable=!0),aa("delayStart",this,{evt:t}),!r.delay||r.delayOnTouchOnly&&!e||this.nativeDraggable&&(xs||ys))n();else{if(Ja.eventCanceled)return void this._onDrop();Ms(o,"mouseup",s._disableDelayedDrag),Ms(o,"touchend",s._disableDelayedDrag),Ms(o,"touchcancel",s._disableDelayedDrag),Ms(o,"mousemove",s._delayedDragTouchMoveHandler),Ms(o,"touchmove",s._delayedDragTouchMoveHandler),r.supportPointer&&Ms(o,"pointermove",s._delayedDragTouchMoveHandler),s._dragStartTimer=setTimeout(n,r.delay)}}},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){oa&&Za(oa),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;Ss(t,"mouseup",this._disableDelayedDrag),Ss(t,"touchend",this._disableDelayedDrag),Ss(t,"touchcancel",this._disableDelayedDrag),Ss(t,"mousemove",this._delayedDragTouchMoveHandler),Ss(t,"touchmove",this._delayedDragTouchMoveHandler),Ss(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||"touch"==t.pointerType&&t,!this.nativeDraggable||e?this.options.supportPointer?Ms(document,"pointermove",this._onTouchMove):Ms(document,e?"touchmove":"mousemove",this._onTouchMove):(Ms(oa,"dragend",this),Ms(ca,"dragstart",this._onDragStart));try{document.selection?ir((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(t){}},_dragStarted:function(t,e){if(Oa=!1,ca&&oa){aa("dragStarted",this,{evt:e}),this.nativeDraggable&&Ms(document,"dragover",Ka);var i=this.options;!t&&Ls(oa,i.dragClass,!1),Ls(oa,i.ghostClass,!0),Ja.active=this,t&&this._appendGhost(),ra({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(wa){this._lastX=wa.clientX,this._lastY=wa.clientY,qa();for(var t=document.elementFromPoint(wa.clientX,wa.clientY),e=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(wa.clientX,wa.clientY))!==e;)e=t;if(oa.parentNode[Qs]._isOutsideThisEl(t),e)do{if(e[Qs]){if(e[Qs]._onDragOver({clientX:wa.clientX,clientY:wa.clientY,target:t,rootEl:e})&&!this.options.dragoverBubble)break}t=e}while(e=e.parentNode);Ua()}},_onTouchMove:function(t){if(xa){var e=this.options,i=e.fallbackTolerance,n=e.fallbackOffset,s=t.touches?t.touches[0]:t,a=ha&&Is(ha,!0),r=ha&&a&&a.a,o=ha&&a&&a.d,l=ja&&$a&&Bs($a),h=(s.clientX-xa.clientX+n.x)/(r||1)+(l?l[0]-Ya[0]:0)/(r||1),c=(s.clientY-xa.clientY+n.y)/(o||1)+(l?l[1]-Ya[1]:0)/(o||1);if(!Ja.active&&!Oa){if(i&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<i)return;this._onDragStart(t,!0)}if(ha){a?(a.e+=h-(Ea||0),a.f+=c-(ka||0)):a={a:1,b:0,c:0,d:1,e:h,f:c};var d="matrix(".concat(a.a,",").concat(a.b,",").concat(a.c,",").concat(a.d,",").concat(a.e,",").concat(a.f,")");Ps(ha,"webkitTransform",d),Ps(ha,"mozTransform",d),Ps(ha,"msTransform",d),Ps(ha,"transform",d),Ea=h,ka=c,wa=s}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!ha){var t=this.options.fallbackOnBody?document.body:ca,e=Rs(oa,!0,ja,!0,t),i=this.options;if(ja){for($a=t;"static"===Ps($a,"position")&&"none"===Ps($a,"transform")&&$a!==document;)$a=$a.parentNode;$a!==document.body&&$a!==document.documentElement?($a===document&&($a=Hs()),e.top+=$a.scrollTop,e.left+=$a.scrollLeft):$a=Hs(),Ya=Bs($a)}Ls(ha=oa.cloneNode(!0),i.ghostClass,!1),Ls(ha,i.fallbackClass,!0),Ls(ha,i.dragClass,!0),Ps(ha,"transition",""),Ps(ha,"transform",""),Ps(ha,"box-sizing","border-box"),Ps(ha,"margin",0),Ps(ha,"top",e.top),Ps(ha,"left",e.left),Ps(ha,"width",e.width),Ps(ha,"height",e.height),Ps(ha,"opacity","0.8"),Ps(ha,"position",ja?"absolute":"fixed"),Ps(ha,"zIndex","100000"),Ps(ha,"pointerEvents","none"),Ja.ghost=ha,t.appendChild(ha),Ps(ha,"transform-origin",Aa/parseInt(ha.style.width)*100+"% "+Da/parseInt(ha.style.height)*100+"%")}},_onDragStart:function(t,e){var i=this,n=t.dataTransfer,s=i.options;aa("dragStart",this,{evt:t}),Ja.eventCanceled?this._onDrop():(aa("setupClone",this),Ja.eventCanceled||((pa=Gs(oa)).draggable=!1,pa.style["will-change"]="",this._hideClone(),Ls(pa,this.options.chosenClass,!1),Ja.clone=pa),i.cloneId=ir((function(){aa("clone",i),Ja.eventCanceled||(i.options.removeCloneOnHide||ca.insertBefore(pa,oa),i._hideClone(),ra({sortable:i,name:"clone"}))})),!e&&Ls(oa,s.dragClass,!0),e?(Na=!0,i._loopId=setInterval(i._emulateDragOver,50)):(Ss(document,"mouseup",i._onDrop),Ss(document,"touchend",i._onDrop),Ss(document,"touchcancel",i._onDrop),n&&(n.effectAllowed="move",s.setData&&s.setData.call(i,n,oa)),Ms(document,"drop",i),Ps(oa,"transform","translateZ(0)")),Oa=!0,i._dragStartId=ir(i._dragStarted.bind(i,e,t)),Ms(document,"selectstart",i),Ma=!0,Es&&Ps(document.body,"user-select","none"))},_onDragOver:function(t){var e,i,n,s,a=this.el,r=t.target,o=this.options,l=o.group,h=Ja.active,c=ba===l,d=o.sort,u=ya||h,p=this,f=!1;if(!Ha){if(void 0!==t.preventDefault&&t.cancelable&&t.preventDefault(),r=$s(r,o.draggable,a,!0),C("dragOver"),Ja.eventCanceled)return f;if(oa.contains(t.target)||r.animated&&r.animatingX&&r.animatingY||p._ignoreWhileAnimating===r)return $(!1);if(Na=!1,h&&!o.disabled&&(c?d||(n=la!==ca):ya===this||(this.lastPutMode=ba.checkPull(this,h,oa,t))&&l.checkPut(this,h,oa,t))){if(s="vertical"===this._getDirection(t,r),e=Rs(oa),C("dragOverValid"),Ja.eventCanceled)return f;if(n)return la=ca,T(),this._hideClone(),C("revert"),Ja.eventCanceled||(da?ca.insertBefore(oa,da):ca.appendChild(oa)),$(!0);var g=zs(a,o.draggable);if(!g||function(t,e,i){var n=Rs(zs(i.el,i.options.draggable)),s=10;return e?t.clientX>n.right+s||t.clientX<=n.right&&t.clientY>n.bottom&&t.clientX>=n.left:t.clientX>n.right&&t.clientY>n.top||t.clientX<=n.right&&t.clientY>n.bottom+s}(t,s,this)&&!g.animated){if(g===oa)return $(!1);if(g&&a===t.target&&(r=g),r&&(i=Rs(r)),!1!==Qa(ca,a,oa,e,r,i,t,!!r))return T(),a.appendChild(oa),la=a,O(),$(!0)}else if(g&&function(t,e,i){var n=Rs(js(i.el,0,i.options,!0)),s=10;return e?t.clientX<n.left-s||t.clientY<n.top&&t.clientX<n.right:t.clientY<n.top-s||t.clientY<n.bottom&&t.clientX<n.left}(t,s,this)){var m=js(a,0,o,!0);if(m===oa)return $(!1);if(i=Rs(r=m),!1!==Qa(ca,a,oa,e,r,i,t,!1))return T(),a.insertBefore(oa,m),la=a,O(),$(!0)}else if(r.parentNode===a){i=Rs(r);var _,v,b,y=oa.parentNode!==a,x=!function(t,e,i){var n=i?t.left:t.top,s=i?t.right:t.bottom,a=i?t.width:t.height,r=i?e.left:e.top,o=i?e.right:e.bottom,l=i?e.width:e.height;return n===r||s===o||n+a/2===r+l/2}(oa.animated&&oa.toRect||e,r.animated&&r.toRect||i,s),w=s?"top":"left",E=Ws(r,"top","top")||Ws(oa,"top","top"),k=E?E.scrollTop:void 0;if(Sa!==r&&(v=i[w],Pa=!1,Ia=!x&&o.invertSwap||y),_=function(t,e,i,n,s,a,r,o){var l=n?t.clientY:t.clientX,h=n?i.height:i.width,c=n?i.top:i.left,d=n?i.bottom:i.right,u=!1;if(!r)if(o&&Ta<h*s){if(!Pa&&(1===Ca?l>c+h*a/2:l<d-h*a/2)&&(Pa=!0),Pa)u=!0;else if(1===Ca?l<c+Ta:l>d-Ta)return-Ca}else if(l>c+h*(1-s)/2&&l<d-h*(1-s)/2)return function(t){return Fs(oa)<Fs(t)?1:-1}(e);if((u=u||r)&&(l<c+h*a/2||l>d-h*a/2))return l>c+h/2?1:-1;return 0}(t,r,i,s,x?1:o.swapThreshold,null==o.invertedSwapThreshold?o.swapThreshold:o.invertedSwapThreshold,Ia,Sa===r),0!==_){var A=Fs(oa);do{A-=_,b=la.children[A]}while(b&&("none"===Ps(b,"display")||b===ha))}if(0===_||b===r)return $(!1);Sa=r,Ca=_;var D=r.nextElementSibling,M=!1,S=Qa(ca,a,oa,e,r,i,t,M=1===_);if(!1!==S)return 1!==S&&-1!==S||(M=1===S),Ha=!0,setTimeout(tr,30),T(),M&&!D?a.appendChild(oa):r.parentNode.insertBefore(oa,M?D:r),E&&Us(E,0,k-E.scrollTop),la=oa.parentNode,void 0===v||Ia||(Ta=Math.abs(v-Rs(r)[w])),O(),$(!0)}if(a.contains(oa))return $(!1)}return!1}function C(o,l){aa(o,p,us({evt:t,isOwner:c,axis:s?"vertical":"horizontal",revert:n,dragRect:e,targetRect:i,canSort:d,fromSortable:u,target:r,completed:$,onMove:function(i,n){return Qa(ca,a,oa,e,i,Rs(i),t,n)},changed:O},l))}function T(){C("dragOverAnimationCapture"),p.captureAnimationState(),p!==u&&u.captureAnimationState()}function $(e){return C("dragOverCompleted",{insertion:e}),e&&(c?h._hideClone():h._showClone(p),p!==u&&(Ls(oa,ya?ya.options.ghostClass:h.options.ghostClass,!1),Ls(oa,o.ghostClass,!0)),ya!==p&&p!==Ja.active?ya=p:p===Ja.active&&ya&&(ya=null),u===p&&(p._ignoreWhileAnimating=r),p.animateAll((function(){C("dragOverAnimationComplete"),p._ignoreWhileAnimating=null})),p!==u&&(u.animateAll(),u._ignoreWhileAnimating=null)),(r===oa&&!oa.animated||r===a&&!r.animated)&&(Sa=null),o.dragoverBubble||t.rootEl||r===document||(oa.parentNode[Qs]._isOutsideThisEl(t.target),!e&&Ga(t)),!o.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),f=!0}function O(){ma=Fs(oa),va=Fs(oa,o.draggable),ra({sortable:p,name:"change",toEl:a,newIndex:ma,newDraggableIndex:va,originalEvent:t})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){Ss(document,"mousemove",this._onTouchMove),Ss(document,"touchmove",this._onTouchMove),Ss(document,"pointermove",this._onTouchMove),Ss(document,"dragover",Ga),Ss(document,"mousemove",Ga),Ss(document,"touchmove",Ga)},_offUpEvents:function(){var t=this.el.ownerDocument;Ss(t,"mouseup",this._onDrop),Ss(t,"touchend",this._onDrop),Ss(t,"pointerup",this._onDrop),Ss(t,"touchcancel",this._onDrop),Ss(document,"selectstart",this)},_onDrop:function(t){var e=this.el,i=this.options;ma=Fs(oa),va=Fs(oa,i.draggable),aa("drop",this,{evt:t}),la=oa&&oa.parentNode,ma=Fs(oa),va=Fs(oa,i.draggable),Ja.eventCanceled||(Oa=!1,Ia=!1,Pa=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),nr(this.cloneId),nr(this._dragStartId),this.nativeDraggable&&(Ss(document,"drop",this),Ss(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Es&&Ps(document.body,"user-select",""),Ps(oa,"transform",""),t&&(Ma&&(t.cancelable&&t.preventDefault(),!i.dropBubble&&t.stopPropagation()),ha&&ha.parentNode&&ha.parentNode.removeChild(ha),(ca===la||ya&&"clone"!==ya.lastPutMode)&&pa&&pa.parentNode&&pa.parentNode.removeChild(pa),oa&&(this.nativeDraggable&&Ss(oa,"dragend",this),Za(oa),oa.style["will-change"]="",Ma&&!Oa&&Ls(oa,ya?ya.options.ghostClass:this.options.ghostClass,!1),Ls(oa,this.options.chosenClass,!1),ra({sortable:this,name:"unchoose",toEl:la,newIndex:null,newDraggableIndex:null,originalEvent:t}),ca!==la?(ma>=0&&(ra({rootEl:la,name:"add",toEl:la,fromEl:ca,originalEvent:t}),ra({sortable:this,name:"remove",toEl:la,originalEvent:t}),ra({rootEl:la,name:"sort",toEl:la,fromEl:ca,originalEvent:t}),ra({sortable:this,name:"sort",toEl:la,originalEvent:t})),ya&&ya.save()):ma!==ga&&ma>=0&&(ra({sortable:this,name:"update",toEl:la,originalEvent:t}),ra({sortable:this,name:"sort",toEl:la,originalEvent:t})),Ja.active&&(null!=ma&&-1!==ma||(ma=ga,va=_a),ra({sortable:this,name:"end",toEl:la,originalEvent:t}),this.save())))),this._nulling()},_nulling:function(){aa("nulling",this),ca=oa=la=ha=da=pa=ua=fa=xa=wa=Ma=ma=va=ga=_a=Sa=Ca=ya=ba=Ja.dragged=Ja.ghost=Ja.clone=Ja.active=null,Ra.forEach((function(t){t.checked=!0})),Ra.length=Ea=ka=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":oa&&(this._onDragOver(t),function(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move");t.cancelable&&t.preventDefault()}(t));break;case"selectstart":t.preventDefault()}},toArray:function(){for(var t,e=[],i=this.el.children,n=0,s=i.length,a=this.options;n<s;n++)$s(t=i[n],a.draggable,this.el,!1)&&e.push(t.getAttribute(a.dataIdAttr)||er(t));return e},sort:function(t,e){var i={},n=this.el;this.toArray().forEach((function(t,e){var s=n.children[e];$s(s,this.options.draggable,n,!1)&&(i[t]=s)}),this),e&&this.captureAnimationState(),t.forEach((function(t){i[t]&&(n.removeChild(i[t]),n.appendChild(i[t]))})),e&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return $s(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var i=this.options;if(void 0===e)return i[t];var n=ia.modifyOption(this,t,e);i[t]=void 0!==n?n:e,"group"===t&&Va(i)},destroy:function(){aa("destroy",this);var t=this.el;t[Qs]=null,Ss(t,"mousedown",this._onTapStart),Ss(t,"touchstart",this._onTapStart),Ss(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(Ss(t,"dragover",this),Ss(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),(function(t){t.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),La.splice(La.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!fa){if(aa("hideClone",this),Ja.eventCanceled)return;Ps(pa,"display","none"),this.options.removeCloneOnHide&&pa.parentNode&&pa.parentNode.removeChild(pa),fa=!0}},_showClone:function(t){if("clone"===t.lastPutMode){if(fa){if(aa("showClone",this),Ja.eventCanceled)return;oa.parentNode!=ca||this.options.group.revertClone?da?ca.insertBefore(pa,da):ca.appendChild(pa):ca.insertBefore(pa,oa),this.options.group.revertClone&&this.animate(oa,pa),Ps(pa,"display",""),fa=!1}}else this._hideClone()}},Wa&&Ms(document,"touchmove",(function(t){(Ja.active||Oa)&&t.cancelable&&t.preventDefault()})),Ja.utils={on:Ms,off:Ss,css:Ps,find:Ys,is:function(t,e){return!!$s(t,e,t,!1)},extend:function(t,e){if(t&&e)for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t},throttle:qs,closest:$s,toggleClass:Ls,clone:Gs,index:Fs,nextTick:ir,cancelNextTick:nr,detectDirection:Xa,getChild:js},Ja.get=function(t){return t[Qs]},Ja.mount=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e[0].constructor===Array&&(e=e[0]),e.forEach((function(t){if(!t.prototype||!t.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(t));t.utils&&(Ja.utils=us(us({},Ja.utils),t.utils)),ia.mount(t)}))},Ja.create=function(t,e){return new Ja(t,e)},Ja.version="1.14.0";var sr,ar,rr,or,lr,hr,cr=[],dr=!1;function ur(){cr.forEach((function(t){clearInterval(t.pid)})),cr=[]}function pr(){clearInterval(hr)}var fr=qs((function(t,e,i,n){if(e.scroll){var s,a=(t.touches?t.touches[0]:t).clientX,r=(t.touches?t.touches[0]:t).clientY,o=e.scrollSensitivity,l=e.scrollSpeed,h=Hs(),c=!1;ar!==i&&(ar=i,ur(),sr=e.scroll,s=e.scrollFn,!0===sr&&(sr=Xs(i,!0)));var d=0,u=sr;do{var p=u,f=Rs(p),g=f.top,m=f.bottom,_=f.left,v=f.right,b=f.width,y=f.height,x=void 0,w=void 0,E=p.scrollWidth,k=p.scrollHeight,A=Ps(p),D=p.scrollLeft,M=p.scrollTop;p===h?(x=b<E&&("auto"===A.overflowX||"scroll"===A.overflowX||"visible"===A.overflowX),w=y<k&&("auto"===A.overflowY||"scroll"===A.overflowY||"visible"===A.overflowY)):(x=b<E&&("auto"===A.overflowX||"scroll"===A.overflowX),w=y<k&&("auto"===A.overflowY||"scroll"===A.overflowY));var S=x&&(Math.abs(v-a)<=o&&D+b<E)-(Math.abs(_-a)<=o&&!!D),C=w&&(Math.abs(m-r)<=o&&M+y<k)-(Math.abs(g-r)<=o&&!!M);if(!cr[d])for(var T=0;T<=d;T++)cr[T]||(cr[T]={});cr[d].vx==S&&cr[d].vy==C&&cr[d].el===p||(cr[d].el=p,cr[d].vx=S,cr[d].vy=C,clearInterval(cr[d].pid),0==S&&0==C||(c=!0,cr[d].pid=setInterval(function(){n&&0===this.layer&&Ja.active._onTouchMove(lr);var e=cr[this.layer].vy?cr[this.layer].vy*l:0,i=cr[this.layer].vx?cr[this.layer].vx*l:0;"function"==typeof s&&"continue"!==s.call(Ja.dragged.parentNode[Qs],i,e,t,lr,cr[this.layer].el)||Us(cr[this.layer].el,i,e)}.bind({layer:d}),24))),d++}while(e.bubbleScroll&&u!==h&&(u=Xs(u,!1)));dr=c}}),30),gr=function(t){var e=t.originalEvent,i=t.putSortable,n=t.dragEl,s=t.activeSortable,a=t.dispatchSortableEvent,r=t.hideGhostForTarget,o=t.unhideGhostForTarget;if(e){var l=i||s;r();var h=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,c=document.elementFromPoint(h.clientX,h.clientY);o(),l&&!l.el.contains(c)&&(a("spill"),this.onSpill({dragEl:n,putSortable:i}))}};function mr(){}function _r(){}mr.prototype={startIndex:null,dragStart:function(t){var e=t.oldDraggableIndex;this.startIndex=e},onSpill:function(t){var e=t.dragEl,i=t.putSortable;this.sortable.captureAnimationState(),i&&i.captureAnimationState();var n=js(this.sortable.el,this.startIndex,this.options);n?this.sortable.el.insertBefore(e,n):this.sortable.el.appendChild(e),this.sortable.animateAll(),i&&i.animateAll()},drop:gr},gs(mr,{pluginName:"revertOnSpill"}),_r.prototype={onSpill:function(t){var e=t.dragEl,i=t.putSortable||this.sortable;i.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),i.animateAll()},drop:gr},gs(_r,{pluginName:"removeOnSpill"});var vr,br,yr,xr,wr,Er=[],kr=[],Ar=!1,Dr=!1,Mr=!1;function Sr(t,e){kr.forEach((function(i,n){var s=e.children[i.sortableIndex+(t?Number(n):0)];s?e.insertBefore(i,s):e.appendChild(i)}))}function Cr(){Er.forEach((function(t){t!==yr&&t.parentNode&&t.parentNode.removeChild(t)}))}Ja.mount(new function(){function t(){for(var t in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===t.charAt(0)&&"function"==typeof this[t]&&(this[t]=this[t].bind(this))}return t.prototype={dragStarted:function(t){var e=t.originalEvent;this.sortable.nativeDraggable?Ms(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Ms(document,"pointermove",this._handleFallbackAutoScroll):e.touches?Ms(document,"touchmove",this._handleFallbackAutoScroll):Ms(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var e=t.originalEvent;this.options.dragOverBubble||e.rootEl||this._handleAutoScroll(e)},drop:function(){this.sortable.nativeDraggable?Ss(document,"dragover",this._handleAutoScroll):(Ss(document,"pointermove",this._handleFallbackAutoScroll),Ss(document,"touchmove",this._handleFallbackAutoScroll),Ss(document,"mousemove",this._handleFallbackAutoScroll)),pr(),ur(),clearTimeout(Os),Os=void 0},nulling:function(){lr=ar=sr=dr=hr=rr=or=null,cr.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,e){var i=this,n=(t.touches?t.touches[0]:t).clientX,s=(t.touches?t.touches[0]:t).clientY,a=document.elementFromPoint(n,s);if(lr=t,e||this.options.forceAutoScrollFallback||xs||ys||Es){fr(t,this.options,a,e);var r=Xs(a,!0);!dr||hr&&n===rr&&s===or||(hr&&pr(),hr=setInterval((function(){var a=Xs(document.elementFromPoint(n,s),!0);a!==r&&(r=a,ur()),fr(t,i.options,a,e)}),10),rr=n,or=s)}else{if(!this.options.bubbleScroll||Xs(a,!0)===Hs())return void ur();fr(t,this.options,Xs(a,!1),!1)}}},gs(t,{pluginName:"scroll",initializeByDefault:!0})}),Ja.mount(_r,mr);const Tr=Ja;Tr.mount(new function(){function t(t){for(var e in this)"_"===e.charAt(0)&&"function"==typeof this[e]&&(this[e]=this[e].bind(this));t.options.supportPointer?Ms(document,"pointerup",this._deselectMultiDrag):(Ms(document,"mouseup",this._deselectMultiDrag),Ms(document,"touchend",this._deselectMultiDrag)),Ms(document,"keydown",this._checkKeyDown),Ms(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(e,i){var n="";Er.length&&br===t?Er.forEach((function(t,e){n+=(e?", ":"")+t.textContent})):n=i.textContent,e.setData("Text",n)}}}return t.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(t){var e=t.dragEl;yr=e},delayEnded:function(){this.isMultiDrag=~Er.indexOf(yr)},setupClone:function(t){var e=t.sortable,i=t.cancel;if(this.isMultiDrag){for(var n=0;n<Er.length;n++)kr.push(Gs(Er[n])),kr[n].sortableIndex=Er[n].sortableIndex,kr[n].draggable=!1,kr[n].style["will-change"]="",Ls(kr[n],this.options.selectedClass,!1),Er[n]===yr&&Ls(kr[n],this.options.chosenClass,!1);e._hideClone(),i()}},clone:function(t){var e=t.sortable,i=t.rootEl,n=t.dispatchSortableEvent,s=t.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||Er.length&&br===e&&(Sr(!0,i),n("clone"),s()))},showClone:function(t){var e=t.cloneNowShown,i=t.rootEl,n=t.cancel;this.isMultiDrag&&(Sr(!1,i),kr.forEach((function(t){Ps(t,"display","")})),e(),wr=!1,n())},hideClone:function(t){var e=this,i=(t.sortable,t.cloneNowHidden),n=t.cancel;this.isMultiDrag&&(kr.forEach((function(t){Ps(t,"display","none"),e.options.removeCloneOnHide&&t.parentNode&&t.parentNode.removeChild(t)})),i(),wr=!0,n())},dragStartGlobal:function(t){t.sortable;!this.isMultiDrag&&br&&br.multiDrag._deselectMultiDrag(),Er.forEach((function(t){t.sortableIndex=Fs(t)})),Er=Er.sort((function(t,e){return t.sortableIndex-e.sortableIndex})),Mr=!0},dragStarted:function(t){var e=this,i=t.sortable;if(this.isMultiDrag){if(this.options.sort&&(i.captureAnimationState(),this.options.animation)){Er.forEach((function(t){t!==yr&&Ps(t,"position","absolute")}));var n=Rs(yr,!1,!0,!0);Er.forEach((function(t){t!==yr&&Ks(t,n)})),Dr=!0,Ar=!0}i.animateAll((function(){Dr=!1,Ar=!1,e.options.animation&&Er.forEach((function(t){Js(t)})),e.options.sort&&Cr()}))}},dragOver:function(t){var e=t.target,i=t.completed,n=t.cancel;Dr&&~Er.indexOf(e)&&(i(!1),n())},revert:function(t){var e=t.fromSortable,i=t.rootEl,n=t.sortable,s=t.dragRect;Er.length>1&&(Er.forEach((function(t){n.addAnimationState({target:t,rect:Dr?Rs(t):s}),Js(t),t.fromRect=s,e.removeAnimationState(t)})),Dr=!1,function(t,e){Er.forEach((function(i,n){var s=e.children[i.sortableIndex+(t?Number(n):0)];s?e.insertBefore(i,s):e.appendChild(i)}))}(!this.options.removeCloneOnHide,i))},dragOverCompleted:function(t){var e=t.sortable,i=t.isOwner,n=t.insertion,s=t.activeSortable,a=t.parentEl,r=t.putSortable,o=this.options;if(n){if(i&&s._hideClone(),Ar=!1,o.animation&&Er.length>1&&(Dr||!i&&!s.options.sort&&!r)){var l=Rs(yr,!1,!0,!0);Er.forEach((function(t){t!==yr&&(Ks(t,l),a.appendChild(t))})),Dr=!0}if(!i)if(Dr||Cr(),Er.length>1){var h=wr;s._showClone(e),s.options.animation&&!wr&&h&&kr.forEach((function(t){s.addAnimationState({target:t,rect:xr}),t.fromRect=xr,t.thisAnimationDuration=null}))}else s._showClone(e)}},dragOverAnimationCapture:function(t){var e=t.dragRect,i=t.isOwner,n=t.activeSortable;if(Er.forEach((function(t){t.thisAnimationDuration=null})),n.options.animation&&!i&&n.multiDrag.isMultiDrag){xr=gs({},e);var s=Is(yr,!0);xr.top-=s.f,xr.left-=s.e}},dragOverAnimationComplete:function(){Dr&&(Dr=!1,Cr())},drop:function(t){var e=t.originalEvent,i=t.rootEl,n=t.parentEl,s=t.sortable,a=t.dispatchSortableEvent,r=t.oldIndex,o=t.putSortable,l=o||this.sortable;if(e){var h=this.options,c=n.children;if(!Mr)if(h.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),Ls(yr,h.selectedClass,!~Er.indexOf(yr)),~Er.indexOf(yr))Er.splice(Er.indexOf(yr),1),vr=null,na({sortable:s,rootEl:i,name:"deselect",targetEl:yr,originalEvt:e});else{if(Er.push(yr),na({sortable:s,rootEl:i,name:"select",targetEl:yr,originalEvt:e}),e.shiftKey&&vr&&s.el.contains(vr)){var d,u,p=Fs(vr),f=Fs(yr);if(~p&&~f&&p!==f)for(f>p?(u=p,d=f):(u=f,d=p+1);u<d;u++)~Er.indexOf(c[u])||(Ls(c[u],h.selectedClass,!0),Er.push(c[u]),na({sortable:s,rootEl:i,name:"select",targetEl:c[u],originalEvt:e}))}else vr=yr;br=l}if(Mr&&this.isMultiDrag){if(Dr=!1,(n[Qs].options.sort||n!==i)&&Er.length>1){var g=Rs(yr),m=Fs(yr,":not(."+this.options.selectedClass+")");if(!Ar&&h.animation&&(yr.thisAnimationDuration=null),l.captureAnimationState(),!Ar&&(h.animation&&(yr.fromRect=g,Er.forEach((function(t){if(t.thisAnimationDuration=null,t!==yr){var e=Dr?Rs(t):g;t.fromRect=e,l.addAnimationState({target:t,rect:e})}}))),Cr(),Er.forEach((function(t){c[m]?n.insertBefore(t,c[m]):n.appendChild(t),m++})),r===Fs(yr))){var _=!1;Er.forEach((function(t){t.sortableIndex===Fs(t)||(_=!0)})),_&&a("update")}Er.forEach((function(t){Js(t)})),l.animateAll()}br=l}(i===n||o&&"clone"!==o.lastPutMode)&&kr.forEach((function(t){t.parentNode&&t.parentNode.removeChild(t)}))}},nullingGlobal:function(){this.isMultiDrag=Mr=!1,kr.length=0},destroyGlobal:function(){this._deselectMultiDrag(),Ss(document,"pointerup",this._deselectMultiDrag),Ss(document,"mouseup",this._deselectMultiDrag),Ss(document,"touchend",this._deselectMultiDrag),Ss(document,"keydown",this._checkKeyDown),Ss(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(t){if(!(void 0!==Mr&&Mr||br!==this.sortable||t&&$s(t.target,this.options.draggable,this.sortable.el,!1)||t&&0!==t.button))for(;Er.length;){var e=Er[0];Ls(e,this.options.selectedClass,!1),Er.shift(),na({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:e,originalEvt:t})}},_checkKeyDown:function(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},gs(t,{pluginName:"multiDrag",utils:{select:function(t){var e=t.parentNode[Qs];e&&e.options.multiDrag&&!~Er.indexOf(t)&&(br&&br!==e&&(br.multiDrag._deselectMultiDrag(),br=e),Ls(t,e.options.selectedClass,!0),Er.push(t))},deselect:function(t){var e=t.parentNode[Qs],i=Er.indexOf(t);e&&e.options.multiDrag&&~i&&(Ls(t,e.options.selectedClass,!1),Er.splice(i,1))}},eventProperties:function(){var t=this,e=[],i=[];return Er.forEach((function(n){var s;e.push({multiDragElement:n,index:n.sortableIndex}),s=Dr&&n!==yr?-1:Dr?Fs(n,":not(."+t.options.selectedClass+")"):Fs(n),i.push({multiDragElement:n,index:s})})),{items:_s(Er),clones:[].concat(kr),oldIndicies:e,newIndicies:i}},optionListeners:{multiDragKey:function(t){return"ctrl"===(t=t.toLowerCase())?t="Control":t.length>1&&(t=t.charAt(0).toUpperCase()+t.substr(1)),t}}})});window.Alpine=xi,xi.data("DashboardGantt",(function(t){return{gantt:null,viewMode:"Month",init:function(){this.gantt=new Wi(this.$refs.gantt,t,{view_mode:this.viewMode,custom_popup_html:function(t){return'\n<div class="px-4 py-2">\n<h5 class="text-white text-sm font-medium whitespace-nowrap">'.concat(t.name,'\n<a class="text-white font-normal text-xs underline" href="').concat(t.editLink.href,'" title="').concat(t.editLink.title,'">').concat(t.editLink.link,'</a>\n</h5>\n<p class="mt-1 text-gray-100 leading-4 text-sm">').concat(t.description,"</p>\n</div>\n")}}),this.$watch("viewMode",(function(t){return gantt.change_view_mode(t)}))}}})),xi.data("DashboardHeatmap",(function(t,e){return{chart:null,init:function(){this.chart=new cs(this.$refs.chart,{type:"heatmap",colors:["#ebedf0","#c0ddf9","#73b3f3","#3886e1","#17459e"],data:{dataPoints:t,start:e,end:new Date}})}}})),xi.data("DragParticipants",(function(t,e){return{count:t,autoAssign:e,init:function(){var t=this;Tr.create(this.$refs.list,{group:"assign",ghostClass:"bg-yellow-50",selectedClass:"bg-blue-50",multiDrag:!0,onAdd:this.assignAttendanceOnAdd(event,e),onUpdate:this.assignAttendanceOnUpdate(event,e),onSort:function(){return t.count=t.$root.querySelectorAll("ul > li").length}})},assignAttendanceOnAdd:function(){return function(t,e){fetch("/admin/api/attendance/".concat(t.item.dataset.attendanceId,"/sort"),{method:"POST",body:new URLSearchParams("newStatus=".concat(t.to.dataset.attendanceStatus,"&newIndex=").concat(t.newIndex))}).then((function(t){t.ok||alert("Ein Fehler ist aufgetreten! Bitte Seite neu laden.")})),e&&window.location.reload()}},assignAttendanceOnUpdate:function(){return function(t,e){fetch("/admin/api/attendance/".concat(t.item.dataset.attendanceId,"/sort"),{method:"POST",body:new URLSearchParams("newIndex=".concat(t.newIndex))}).then((function(t){t.ok||alert("Ein Fehler ist aufgetreten! Bitte Seite neu laden.")})),e&&window.location.reload()}}}})),xi.start()})();