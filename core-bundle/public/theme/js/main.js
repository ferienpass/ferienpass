/*! For license information please see main.js.LICENSE.txt */
(()=>{var t={443:function(t){t.exports=function(){"use strict";function t(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function e(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function i(i){for(var n=1;n<arguments.length;n++){var s=null!=arguments[n]?arguments[n]:{};n%2?e(Object(s),!0).forEach((function(e){t(i,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(s)):e(Object(s)).forEach((function(t){Object.defineProperty(i,t,Object.getOwnPropertyDescriptor(s,t))}))}return i}function n(){return new Promise((t=>{"loading"==document.readyState?document.addEventListener("DOMContentLoaded",t):t()}))}function s(t){return Array.from(new Set(t))}function a(){return navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")}function o(t,e){return t==e}function r(t,e){"template"!==t.tagName.toLowerCase()?console.warn(`Alpine: [${e}] directive should only be added to <template> tags. See https://github.com/alpinejs/alpine#${e}`):1!==t.content.childElementCount&&console.warn(`Alpine: <template> tag with [${e}] encountered with an unexpected number of root elements. Make sure <template> has a single root element. `)}function l(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[_\s]/,"-").toLowerCase()}function h(t){return t.toLowerCase().replace(/-(\w)/g,((t,e)=>e.toUpperCase()))}function c(t,e){if(!1===e(t))return;let i=t.firstElementChild;for(;i;)c(i,e),i=i.nextElementSibling}function d(t,e){var i;return function(){var n=this,s=arguments,a=function(){i=null,t.apply(n,s)};clearTimeout(i),i=setTimeout(a,e)}}const u=(t,e,i)=>{if(console.warn(`Alpine Error: "${i}"\n\nExpression: "${e}"\nElement:`,t),!a())throw Object.assign(i,{el:t,expression:e}),i};function p(t,{el:e,expression:i}){try{const n=t();return n instanceof Promise?n.catch((t=>u(e,i,t))):n}catch(t){u(e,i,t)}}function g(t,e,i,n={}){return p((()=>"function"==typeof e?e.call(i):new Function(["$data",...Object.keys(n)],`var __alpine_result; with($data) { __alpine_result = ${e} }; return __alpine_result`)(i,...Object.values(n))),{el:t,expression:e})}function f(t,e,i,n={}){return p((()=>{if("function"==typeof e)return Promise.resolve(e.call(i,n.$event));let t=Function;if(t=Object.getPrototypeOf((async function(){})).constructor,Object.keys(i).includes(e)){let t=new Function(["dataContext",...Object.keys(n)],`with(dataContext) { return ${e} }`)(i,...Object.values(n));return"function"==typeof t?Promise.resolve(t.call(i,n.$event)):Promise.resolve()}return Promise.resolve(new t(["dataContext",...Object.keys(n)],`with(dataContext) { ${e} }`)(i,...Object.values(n)))}),{el:t,expression:e})}const m=/^x-(on|bind|data|text|html|model|if|for|show|cloak|transition|ref|spread)\b/;function v(t){const e=x(t.name);return m.test(e)}function b(t,e,i){let n=Array.from(t.attributes).filter(v).map(_),s=n.filter((t=>"spread"===t.type))[0];if(s){let i=g(t,s.expression,e.$data);n=n.concat(Object.entries(i).map((([t,e])=>_({name:t,value:e}))))}return i?n.filter((t=>t.type===i)):y(n)}function y(t){let e=["bind","model","show","catch-all"];return t.sort(((t,i)=>{let n=-1===e.indexOf(t.type)?"catch-all":t.type,s=-1===e.indexOf(i.type)?"catch-all":i.type;return e.indexOf(n)-e.indexOf(s)}))}function _({name:t,value:e}){const i=x(t),n=i.match(m),s=i.match(/:([a-zA-Z0-9\-:]+)/),a=i.match(/\.[^.\]]+(?=[^\]]*$)/g)||[];return{type:n?n[1]:null,value:s?s[1]:null,modifiers:a.map((t=>t.replace(".",""))),expression:e}}function w(t){return["disabled","checked","required","readonly","hidden","open","selected","autofocus","itemscope","multiple","novalidate","allowfullscreen","allowpaymentrequest","formnovalidate","autoplay","controls","loop","muted","playsinline","default","ismap","reversed","async","defer","nomodule"].includes(t)}function x(t){return t.startsWith("@")?t.replace("@","x-on:"):t.startsWith(":")?t.replace(":","x-bind:"):t}function E(t,e=Boolean){return t.split(" ").filter(e)}const D="in",k="out",A="cancelled";function S(t,e,i,n,s=!1){if(s)return e();if(t.__x_transition&&t.__x_transition.type===D)return;const a=b(t,n,"transition"),o=b(t,n,"show")[0];if(o&&o.modifiers.includes("transition")){let n=o.modifiers;if(n.includes("out")&&!n.includes("in"))return e();const s=n.includes("in")&&n.includes("out");n=s?n.filter(((t,e)=>e<n.indexOf("out"))):n,T(t,n,e,i)}else a.some((t=>["enter","enter-start","enter-end"].includes(t.value)))?N(t,n,a,e,i):e()}function M(t,e,i,n,s=!1){if(s)return e();if(t.__x_transition&&t.__x_transition.type===k)return;const a=b(t,n,"transition"),o=b(t,n,"show")[0];if(o&&o.modifiers.includes("transition")){let n=o.modifiers;if(n.includes("in")&&!n.includes("out"))return e();const s=n.includes("in")&&n.includes("out");n=s?n.filter(((t,e)=>e>n.indexOf("out"))):n,C(t,n,s,e,i)}else a.some((t=>["leave","leave-start","leave-end"].includes(t.value)))?L(t,n,a,e,i):e()}function T(t,e,i,n){O(t,e,i,(()=>{}),n,{duration:$(e,"duration",150),origin:$(e,"origin","center"),first:{opacity:0,scale:$(e,"scale",95)},second:{opacity:1,scale:100}},D)}function C(t,e,i,n,s){O(t,e,(()=>{}),n,s,{duration:i?$(e,"duration",150):$(e,"duration",150)/2,origin:$(e,"origin","center"),first:{opacity:1,scale:100},second:{opacity:0,scale:$(e,"scale",95)}},k)}function $(t,e,i){if(-1===t.indexOf(e))return i;const n=t[t.indexOf(e)+1];if(!n)return i;if("scale"===e&&!H(n))return i;if("duration"===e){let t=n.match(/([0-9]+)ms/);if(t)return t[1]}return"origin"===e&&["top","right","left","center","bottom"].includes(t[t.indexOf(e)+2])?[n,t[t.indexOf(e)+2]].join(" "):n}function O(t,e,i,n,s,a,o){t.__x_transition&&t.__x_transition.cancel&&t.__x_transition.cancel();const r=t.style.opacity,l=t.style.transform,h=t.style.transformOrigin,c=!e.includes("opacity")&&!e.includes("scale"),d=c||e.includes("opacity"),u=c||e.includes("scale"),p={start(){d&&(t.style.opacity=a.first.opacity),u&&(t.style.transform=`scale(${a.first.scale/100})`)},during(){u&&(t.style.transformOrigin=a.origin),t.style.transitionProperty=[d?"opacity":"",u?"transform":""].join(" ").trim(),t.style.transitionDuration=a.duration/1e3+"s",t.style.transitionTimingFunction="cubic-bezier(0.4, 0.0, 0.2, 1)"},show(){i()},end(){d&&(t.style.opacity=a.second.opacity),u&&(t.style.transform=`scale(${a.second.scale/100})`)},hide(){n()},cleanup(){d&&(t.style.opacity=r),u&&(t.style.transform=l),u&&(t.style.transformOrigin=h),t.style.transitionProperty=null,t.style.transitionDuration=null,t.style.transitionTimingFunction=null}};Y(t,p,o,s)}const P=(t,e,i)=>"function"==typeof t?i.evaluateReturnExpression(e,t):t;function N(t,e,i,n,s){I(t,E(P((i.find((t=>"enter"===t.value))||{expression:""}).expression,t,e)),E(P((i.find((t=>"enter-start"===t.value))||{expression:""}).expression,t,e)),E(P((i.find((t=>"enter-end"===t.value))||{expression:""}).expression,t,e)),n,(()=>{}),D,s)}function L(t,e,i,n,s){I(t,E(P((i.find((t=>"leave"===t.value))||{expression:""}).expression,t,e)),E(P((i.find((t=>"leave-start"===t.value))||{expression:""}).expression,t,e)),E(P((i.find((t=>"leave-end"===t.value))||{expression:""}).expression,t,e)),(()=>{}),n,k,s)}function I(t,e,i,n,s,a,o,r){t.__x_transition&&t.__x_transition.cancel&&t.__x_transition.cancel();const l=t.__x_original_classes||[],h={start(){t.classList.add(...i)},during(){t.classList.add(...e)},show(){s()},end(){t.classList.remove(...i.filter((t=>!l.includes(t)))),t.classList.add(...n)},hide(){a()},cleanup(){t.classList.remove(...e.filter((t=>!l.includes(t)))),t.classList.remove(...n.filter((t=>!l.includes(t))))}};Y(t,h,o,r)}function Y(t,e,i,n){const s=R((()=>{e.hide(),t.isConnected&&e.cleanup(),delete t.__x_transition}));t.__x_transition={type:i,cancel:R((()=>{n(A),s()})),finish:s,nextFrame:null},e.start(),e.during(),t.__x_transition.nextFrame=requestAnimationFrame((()=>{let i=1e3*Number(getComputedStyle(t).transitionDuration.replace(/,.*/,"").replace("s",""));0===i&&(i=1e3*Number(getComputedStyle(t).animationDuration.replace("s",""))),e.show(),t.__x_transition.nextFrame=requestAnimationFrame((()=>{e.end(),setTimeout(t.__x_transition.finish,i)}))}))}function H(t){return!Array.isArray(t)&&!isNaN(t)}function R(t){let e=!1;return function(){e||(e=!0,t.apply(this,arguments))}}function F(t,e,i,n,s){r(e,"x-for");let a=z("function"==typeof i?t.evaluateReturnExpression(e,i):i),o=B(t,e,a,s),l=e;o.forEach(((i,r)=>{let h=W(a,i,r,o,s()),c=j(t,e,r,h),d=V(l.nextElementSibling,c);d?(delete d.__x_for_key,d.__x_for=h,t.updateElements(d,(()=>d.__x_for))):(d=X(e,l),S(d,(()=>{}),(()=>{}),t,n),d.__x_for=h,t.initializeElements(d,(()=>d.__x_for))),l=d,l.__x_for_key=c})),U(l,t)}function z(t){let e=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,i=/^\(|\)$/g,n=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,s=String(t).match(n);if(!s)return;let a={};a.items=s[2].trim();let o=s[1].trim().replace(i,""),r=o.match(e);return r?(a.item=o.replace(e,"").trim(),a.index=r[1].trim(),r[2]&&(a.collection=r[2].trim())):a.item=o,a}function W(t,e,n,s,a){let o=a?i({},a):{};return o[t.item]=e,t.index&&(o[t.index]=n),t.collection&&(o[t.collection]=s),o}function j(t,e,i,n){let s=b(e,t,"bind").filter((t=>"key"===t.value))[0];return s?t.evaluateReturnExpression(e,s.expression,(()=>n)):i}function B(t,e,i,n){let s=b(e,t,"if")[0];if(s&&!t.evaluateReturnExpression(e,s.expression))return[];let a=t.evaluateReturnExpression(e,i.items,n);return H(a)&&a>=0&&(a=Array.from(Array(a).keys(),(t=>t+1))),a}function X(t,e){let i=document.importNode(t.content,!0);return e.parentElement.insertBefore(i,e.nextElementSibling),e.nextElementSibling}function V(t,e){if(!t)return;if(void 0===t.__x_for_key)return;if(t.__x_for_key===e)return t;let i=t;for(;i;){if(i.__x_for_key===e)return i.parentElement.insertBefore(i,t);i=!(!i.nextElementSibling||void 0===i.nextElementSibling.__x_for_key)&&i.nextElementSibling}}function U(t,e){for(var i=!(!t.nextElementSibling||void 0===t.nextElementSibling.__x_for_key)&&t.nextElementSibling;i;){let t=i,n=i.nextElementSibling;M(i,(()=>{t.remove()}),(()=>{}),e),i=!(!n||void 0===n.__x_for_key)&&n}}function q(t,e,i,n,a,r,l){var c=t.evaluateReturnExpression(e,n,a);if("value"===i){if(Vt.ignoreFocusedForValueBinding&&document.activeElement.isSameNode(e))return;if(void 0===c&&String(n).match(/\./)&&(c=""),"radio"===e.type)void 0===e.attributes.value&&"bind"===r?e.value=c:"bind"!==r&&(e.checked=o(e.value,c));else if("checkbox"===e.type)"boolean"==typeof c||[null,void 0].includes(c)||"bind"!==r?"bind"!==r&&(Array.isArray(c)?e.checked=c.some((t=>o(t,e.value))):e.checked=!!c):e.value=String(c);else if("SELECT"===e.tagName)K(e,c);else{if(e.value===c)return;e.value=c}}else if("class"===i)if(Array.isArray(c)){const t=e.__x_original_classes||[];e.setAttribute("class",s(t.concat(c)).join(" "))}else if("object"==typeof c)Object.keys(c).sort(((t,e)=>c[t]-c[e])).forEach((t=>{c[t]?E(t).forEach((t=>e.classList.add(t))):E(t).forEach((t=>e.classList.remove(t)))}));else{const t=e.__x_original_classes||[],i=c?E(c):[];e.setAttribute("class",s(t.concat(i)).join(" "))}else i=l.includes("camel")?h(i):i,[null,void 0,!1].includes(c)?e.removeAttribute(i):w(i)?G(e,i,i):G(e,i,c)}function G(t,e,i){t.getAttribute(e)!=i&&t.setAttribute(e,i)}function K(t,e){const i=[].concat(e).map((t=>t+""));Array.from(t.options).forEach((t=>{t.selected=i.includes(t.value||t.text)}))}function J(t,e,i){void 0===e&&String(i).match(/\./)&&(e=""),t.textContent=e}function Q(t,e,i,n){e.innerHTML=t.evaluateReturnExpression(e,i,n)}function Z(t,e,i,n,s=!1){const a=()=>{e.style.display="none",e.__x_is_shown=!1},o=()=>{1===e.style.length&&"none"===e.style.display?e.removeAttribute("style"):e.style.removeProperty("display"),e.__x_is_shown=!0};if(!0===s)return void(i?o():a());const r=(n,s)=>{i?(("none"===e.style.display||e.__x_transition)&&S(e,(()=>{o()}),s,t),n((()=>{}))):"none"!==e.style.display?M(e,(()=>{n((()=>{a()}))}),s,t):n((()=>{}))};n.includes("immediate")?r((t=>t()),(()=>{})):(t.showDirectiveLastElement&&!t.showDirectiveLastElement.contains(e)&&t.executeAndClearRemainingShowDirectiveStack(),t.showDirectiveStack.push(r),t.showDirectiveLastElement=e)}function tt(t,e,i,n,s){r(e,"x-if");const a=e.nextElementSibling&&!0===e.nextElementSibling.__x_inserted_me;if(!i||a&&!e.__x_transition)!i&&a&&M(e.nextElementSibling,(()=>{e.nextElementSibling.remove()}),(()=>{}),t,n);else{const i=document.importNode(e.content,!0);e.parentElement.insertBefore(i,e.nextElementSibling),S(e.nextElementSibling,(()=>{}),(()=>{}),t,n),t.initializeElements(e.nextElementSibling,s),e.nextElementSibling.__x_inserted_me=!0}}function et(t,e,i,n,s,a={}){const o={passive:n.includes("passive")};let r,l;if(n.includes("camel")&&(i=h(i)),n.includes("away")?(l=document,r=l=>{e.contains(l.target)||e.offsetWidth<1&&e.offsetHeight<1||(it(t,s,l,a),n.includes("once")&&document.removeEventListener(i,r,o))}):(l=n.includes("window")?window:n.includes("document")?document:e,r=h=>{l!==window&&l!==document||document.body.contains(e)?nt(i)&&st(h,n)||(n.includes("prevent")&&h.preventDefault(),n.includes("stop")&&h.stopPropagation(),n.includes("self")&&h.target!==e)||it(t,s,h,a).then((t=>{!1===t?h.preventDefault():n.includes("once")&&l.removeEventListener(i,r,o)})):l.removeEventListener(i,r,o)}),n.includes("debounce")){let t=n[n.indexOf("debounce")+1]||"invalid-wait",e=H(t.split("ms")[0])?Number(t.split("ms")[0]):250;r=d(r,e)}l.addEventListener(i,r,o)}function it(t,e,n,s){return t.evaluateCommandExpression(n.target,e,(()=>i(i({},s()),{},{$event:n})))}function nt(t){return["keydown","keyup"].includes(t)}function st(t,e){let i=e.filter((t=>!["window","document","prevent","stop"].includes(t)));if(i.includes("debounce")){let t=i.indexOf("debounce");i.splice(t,H((i[t+1]||"invalid-wait").split("ms")[0])?2:1)}if(0===i.length)return!1;if(1===i.length&&i[0]===at(t.key))return!1;const n=["ctrl","shift","alt","meta","cmd","super"].filter((t=>i.includes(t)));return i=i.filter((t=>!n.includes(t))),!(n.length>0&&n.filter((e=>("cmd"!==e&&"super"!==e||(e="meta"),t[`${e}Key`]))).length===n.length&&i[0]===at(t.key))}function at(t){switch(t){case"/":return"slash";case" ":case"Spacebar":return"space";default:return t&&l(t)}}function ot(t,e,n,s,a){var o="select"===e.tagName.toLowerCase()||["checkbox","radio"].includes(e.type)||n.includes("lazy")?"change":"input";et(t,e,o,n,`${s} = rightSideOfExpression($event, ${s})`,(()=>i(i({},a()),{},{rightSideOfExpression:rt(e,n,s)})))}function rt(t,e,i){return"radio"===t.type&&(t.hasAttribute("name")||t.setAttribute("name",i)),(i,n)=>{if(i instanceof CustomEvent&&i.detail)return i.detail;if("checkbox"===t.type){if(Array.isArray(n)){const t=e.includes("number")?lt(i.target.value):i.target.value;return i.target.checked?n.concat([t]):n.filter((e=>!o(e,t)))}return i.target.checked}if("select"===t.tagName.toLowerCase()&&t.multiple)return e.includes("number")?Array.from(i.target.selectedOptions).map((t=>lt(t.value||t.text))):Array.from(i.target.selectedOptions).map((t=>t.value||t.text));{const t=i.target.value;return e.includes("number")?lt(t):e.includes("trim")?t.trim():t}}}function lt(t){const e=t?parseFloat(t):null;return H(e)?e:t}const{isArray:ht}=Array,{getPrototypeOf:ct,create:dt,defineProperty:ut,defineProperties:pt,isExtensible:gt,getOwnPropertyDescriptor:ft,getOwnPropertyNames:mt,getOwnPropertySymbols:vt,preventExtensions:bt,hasOwnProperty:yt}=Object,{push:_t,concat:wt,map:xt}=Array.prototype;function Et(t){return void 0===t}function Dt(t){return"function"==typeof t}function kt(t){return"object"==typeof t}const At=new WeakMap;function St(t,e){At.set(t,e)}const Mt=t=>At.get(t)||t;function Tt(t,e){return t.valueIsObservable(e)?t.getProxy(e):e}function Ct(t){return yt.call(t,"value")&&(t.value=Mt(t.value)),t}function $t(t,e,i){wt.call(mt(i),vt(i)).forEach((n=>{let s=ft(i,n);s.configurable||(s=zt(t,s,Tt)),ut(e,n,s)})),bt(e)}class Ot{constructor(t,e){this.originalTarget=e,this.membrane=t}get(t,e){const{originalTarget:i,membrane:n}=this,s=i[e],{valueObserved:a}=n;return a(i,e),n.getProxy(s)}set(t,e,i){const{originalTarget:n,membrane:{valueMutated:s}}=this;return n[e]!==i?(n[e]=i,s(n,e)):"length"===e&&ht(n)&&s(n,e),!0}deleteProperty(t,e){const{originalTarget:i,membrane:{valueMutated:n}}=this;return delete i[e],n(i,e),!0}apply(t,e,i){}construct(t,e,i){}has(t,e){const{originalTarget:i,membrane:{valueObserved:n}}=this;return n(i,e),e in i}ownKeys(t){const{originalTarget:e}=this;return wt.call(mt(e),vt(e))}isExtensible(t){const e=gt(t);if(!e)return e;const{originalTarget:i,membrane:n}=this,s=gt(i);return s||$t(n,t,i),s}setPrototypeOf(t,e){}getPrototypeOf(t){const{originalTarget:e}=this;return ct(e)}getOwnPropertyDescriptor(t,e){const{originalTarget:i,membrane:n}=this,{valueObserved:s}=this.membrane;s(i,e);let a=ft(i,e);if(Et(a))return a;const o=ft(t,e);return Et(o)?(a=zt(n,a,Tt),a.configurable||ut(t,e,a),a):o}preventExtensions(t){const{originalTarget:e,membrane:i}=this;return $t(i,t,e),bt(e),!0}defineProperty(t,e,i){const{originalTarget:n,membrane:s}=this,{valueMutated:a}=s,{configurable:o}=i;if(yt.call(i,"writable")&&!yt.call(i,"value")){const t=ft(n,e);i.value=t.value}return ut(n,e,Ct(i)),!1===o&&ut(t,e,zt(s,i,Tt)),a(n,e),!0}}function Pt(t,e){return t.valueIsObservable(e)?t.getReadOnlyProxy(e):e}class Nt{constructor(t,e){this.originalTarget=e,this.membrane=t}get(t,e){const{membrane:i,originalTarget:n}=this,s=n[e],{valueObserved:a}=i;return a(n,e),i.getReadOnlyProxy(s)}set(t,e,i){return!1}deleteProperty(t,e){return!1}apply(t,e,i){}construct(t,e,i){}has(t,e){const{originalTarget:i,membrane:{valueObserved:n}}=this;return n(i,e),e in i}ownKeys(t){const{originalTarget:e}=this;return wt.call(mt(e),vt(e))}setPrototypeOf(t,e){}getOwnPropertyDescriptor(t,e){const{originalTarget:i,membrane:n}=this,{valueObserved:s}=n;s(i,e);let a=ft(i,e);if(Et(a))return a;const o=ft(t,e);return Et(o)?(a=zt(n,a,Pt),yt.call(a,"set")&&(a.set=void 0),a.configurable||ut(t,e,a),a):o}preventExtensions(t){return!1}defineProperty(t,e,i){return!1}}function Lt(t){let e;return ht(t)?e=[]:kt(t)&&(e={}),e}const It=Object.prototype;function Yt(t){if(null===t)return!1;if("object"!=typeof t)return!1;if(ht(t))return!0;const e=ct(t);return e===It||null===e||null===ct(e)}const Ht=(t,e)=>{},Rt=(t,e)=>{},Ft=t=>t;function zt(t,e,i){const{set:n,get:s}=e;return yt.call(e,"value")?e.value=i(t,e.value):(Et(s)||(e.get=function(){return i(t,s.call(Mt(this)))}),Et(n)||(e.set=function(e){n.call(Mt(this),t.unwrapProxy(e))})),e}class Wt{constructor(t){if(this.valueDistortion=Ft,this.valueMutated=Rt,this.valueObserved=Ht,this.valueIsObservable=Yt,this.objectGraph=new WeakMap,!Et(t)){const{valueDistortion:e,valueMutated:i,valueObserved:n,valueIsObservable:s}=t;this.valueDistortion=Dt(e)?e:Ft,this.valueMutated=Dt(i)?i:Rt,this.valueObserved=Dt(n)?n:Ht,this.valueIsObservable=Dt(s)?s:Yt}}getProxy(t){const e=Mt(t),i=this.valueDistortion(e);if(this.valueIsObservable(i)){const n=this.getReactiveState(e,i);return n.readOnly===t?t:n.reactive}return i}getReadOnlyProxy(t){t=Mt(t);const e=this.valueDistortion(t);return this.valueIsObservable(e)?this.getReactiveState(t,e).readOnly:e}unwrapProxy(t){return Mt(t)}getReactiveState(t,e){const{objectGraph:i}=this;let n=i.get(e);if(n)return n;const s=this;return n={get reactive(){const i=new Ot(s,e),n=new Proxy(Lt(e),i);return St(n,t),ut(this,"reactive",{value:n}),n},get readOnly(){const i=new Nt(s,e),n=new Proxy(Lt(e),i);return St(n,t),ut(this,"readOnly",{value:n}),n}},i.set(e,n),n}}function jt(t,e){let i=new Wt({valueMutated(t,i){e(t,i)}});return{data:i.getProxy(t),membrane:i}}function Bt(t,e){let i=t.unwrapProxy(e),n={};return Object.keys(i).forEach((t=>{["$el","$refs","$nextTick","$watch"].includes(t)||(n[t]=i[t])})),n}class Xt{constructor(t,e=null){this.$el=t;const i=this.$el.getAttribute("x-data"),n=""===i?"{}":i,s=this.$el.getAttribute("x-init");let a={$el:this.$el},o=e?e.$el:this.$el;Object.entries(Vt.magicProperties).forEach((([t,e])=>{Object.defineProperty(a,`$${t}`,{get:function(){return e(o)}})})),this.unobservedData=e?e.getUnobservedData():g(t,n,a);let{membrane:r,data:l}=this.wrapDataInObservable(this.unobservedData);var h;this.$data=l,this.membrane=r,this.unobservedData.$el=this.$el,this.unobservedData.$refs=this.getRefsProxy(),this.nextTickStack=[],this.unobservedData.$nextTick=t=>{this.nextTickStack.push(t)},this.watchers={},this.unobservedData.$watch=(t,e)=>{this.watchers[t]||(this.watchers[t]=[]),this.watchers[t].push(e)},Object.entries(Vt.magicProperties).forEach((([t,e])=>{Object.defineProperty(this.unobservedData,`$${t}`,{get:function(){return e(o,this.$el)}})})),this.showDirectiveStack=[],this.showDirectiveLastElement,e||Vt.onBeforeComponentInitializeds.forEach((t=>t(this))),s&&!e&&(this.pauseReactivity=!0,h=this.evaluateReturnExpression(this.$el,s),this.pauseReactivity=!1),this.initializeElements(this.$el,(()=>{}),!e),this.listenForNewElementsToInitialize(),"function"==typeof h&&h.call(this.$data),e||setTimeout((()=>{Vt.onComponentInitializeds.forEach((t=>t(this)))}),0)}getUnobservedData(){return Bt(this.membrane,this.$data)}wrapDataInObservable(t){var e=this;let i=d((function(){e.updateElements(e.$el)}),0);return jt(t,((t,n)=>{e.watchers[n]?e.watchers[n].forEach((e=>e(t[n]))):Array.isArray(t)?Object.keys(e.watchers).forEach((i=>{let s=i.split(".");"length"!==n&&s.reduce(((n,s)=>(Object.is(t,n[s])&&e.watchers[i].forEach((e=>e(t))),n[s])),e.unobservedData)})):Object.keys(e.watchers).filter((t=>t.includes("."))).forEach((i=>{let s=i.split(".");n===s[s.length-1]&&s.reduce(((s,a)=>(Object.is(t,s)&&e.watchers[i].forEach((e=>e(t[n]))),s[a])),e.unobservedData)})),e.pauseReactivity||i()}))}walkAndSkipNestedComponents(t,e,i=(()=>{})){c(t,(t=>t.hasAttribute("x-data")&&!t.isSameNode(this.$el)?(t.__x||i(t),!1):e(t)))}initializeElements(t,e=(()=>{}),i=!0){this.walkAndSkipNestedComponents(t,(t=>void 0===t.__x_for_key&&void 0===t.__x_inserted_me&&void this.initializeElement(t,e,i)),(t=>{t.__x=new Xt(t)})),this.executeAndClearRemainingShowDirectiveStack(),this.executeAndClearNextTickStack(t)}initializeElement(t,e,i=!0){t.hasAttribute("class")&&b(t,this).length>0&&(t.__x_original_classes=E(t.getAttribute("class"))),i&&this.registerListeners(t,e),this.resolveBoundAttributes(t,!0,e)}updateElements(t,e=(()=>{})){this.walkAndSkipNestedComponents(t,(t=>{if(void 0!==t.__x_for_key&&!t.isSameNode(this.$el))return!1;this.updateElement(t,e)}),(t=>{t.__x=new Xt(t)})),this.executeAndClearRemainingShowDirectiveStack(),this.executeAndClearNextTickStack(t)}executeAndClearNextTickStack(t){t===this.$el&&this.nextTickStack.length>0&&requestAnimationFrame((()=>{for(;this.nextTickStack.length>0;)this.nextTickStack.shift()()}))}executeAndClearRemainingShowDirectiveStack(){this.showDirectiveStack.reverse().map((t=>new Promise(((e,i)=>{t(e,i)})))).reduce(((t,e)=>t.then((()=>e.then((t=>{t()}))))),Promise.resolve((()=>{}))).catch((t=>{if(t!==A)throw t})),this.showDirectiveStack=[],this.showDirectiveLastElement=void 0}updateElement(t,e){this.resolveBoundAttributes(t,!1,e)}registerListeners(t,e){b(t,this).forEach((({type:i,value:n,modifiers:s,expression:a})=>{switch(i){case"on":et(this,t,n,s,a,e);break;case"model":ot(this,t,s,a,e)}}))}resolveBoundAttributes(t,e=!1,i){let n=b(t,this);n.forEach((({type:s,value:a,modifiers:o,expression:r})=>{switch(s){case"model":q(this,t,"value",r,i,s,o);break;case"bind":if("template"===t.tagName.toLowerCase()&&"key"===a)return;q(this,t,a,r,i,s,o);break;case"text":var l=this.evaluateReturnExpression(t,r,i);J(t,l,r);break;case"html":Q(this,t,r,i);break;case"show":l=this.evaluateReturnExpression(t,r,i),Z(this,t,l,o,e);break;case"if":if(n.some((t=>"for"===t.type)))return;l=this.evaluateReturnExpression(t,r,i),tt(this,t,l,e,i);break;case"for":F(this,t,r,e,i);break;case"cloak":t.removeAttribute("x-cloak")}}))}evaluateReturnExpression(t,e,n=(()=>{})){return g(t,e,this.$data,i(i({},n()),{},{$dispatch:this.getDispatchFunction(t)}))}evaluateCommandExpression(t,e,n=(()=>{})){return f(t,e,this.$data,i(i({},n()),{},{$dispatch:this.getDispatchFunction(t)}))}getDispatchFunction(t){return(e,i={})=>{t.dispatchEvent(new CustomEvent(e,{detail:i,bubbles:!0}))}}listenForNewElementsToInitialize(){const t=this.$el,e={childList:!0,attributes:!0,subtree:!0};new MutationObserver((t=>{for(let e=0;e<t.length;e++){const i=t[e].target.closest("[x-data]");if(i&&i.isSameNode(this.$el)){if("attributes"===t[e].type&&"x-data"===t[e].attributeName){const i=t[e].target.getAttribute("x-data")||"{}",n=g(this.$el,i,{$el:this.$el});Object.keys(n).forEach((t=>{this.$data[t]!==n[t]&&(this.$data[t]=n[t])}))}t[e].addedNodes.length>0&&t[e].addedNodes.forEach((t=>{1!==t.nodeType||t.__x_inserted_me||(!t.matches("[x-data]")||t.__x?this.initializeElements(t):t.__x=new Xt(t))}))}}})).observe(t,e)}getRefsProxy(){var t=this;return new Proxy({},{get(e,i){return"$isAlpineProxy"===i||(t.walkAndSkipNestedComponents(t.$el,(t=>{t.hasAttribute("x-ref")&&t.getAttribute("x-ref")===i&&(n=t)})),n);var n}})}}const Vt={version:"2.8.1",pauseMutationObserver:!1,magicProperties:{},onComponentInitializeds:[],onBeforeComponentInitializeds:[],ignoreFocusedForValueBinding:!1,start:async function(){a()||await n(),this.discoverComponents((t=>{this.initializeComponent(t)})),document.addEventListener("turbolinks:load",(()=>{this.discoverUninitializedComponents((t=>{this.initializeComponent(t)}))})),this.listenForNewUninitializedComponentsAtRunTime()},discoverComponents:function(t){document.querySelectorAll("[x-data]").forEach((e=>{t(e)}))},discoverUninitializedComponents:function(t,e=null){const i=(e||document).querySelectorAll("[x-data]");Array.from(i).filter((t=>void 0===t.__x)).forEach((e=>{t(e)}))},listenForNewUninitializedComponentsAtRunTime:function(){const t=document.querySelector("body"),e={childList:!0,attributes:!0,subtree:!0};new MutationObserver((t=>{if(!this.pauseMutationObserver)for(let e=0;e<t.length;e++)t[e].addedNodes.length>0&&t[e].addedNodes.forEach((t=>{1===t.nodeType&&(t.parentElement&&t.parentElement.closest("[x-data]")||this.discoverUninitializedComponents((t=>{this.initializeComponent(t)}),t.parentElement))}))})).observe(t,e)},initializeComponent:function(t){if(!t.__x)try{t.__x=new Xt(t)}catch(t){setTimeout((()=>{throw t}),0)}},clone:function(t,e){e.__x||(e.__x=new Xt(e,t))},addMagicProperty:function(t,e){this.magicProperties[t]=e},onComponentInitialized:function(t){this.onComponentInitializeds.push(t)},onBeforeComponentInitialized:function(t){this.onBeforeComponentInitializeds.push(t)}};return a()||(window.Alpine=Vt,window.deferLoadingAlpine?window.deferLoadingAlpine((function(){window.Alpine.start()})):window.Alpine.start()),Vt}()}},e={};function i(n){if(e[n])return e[n].exports;var s=e[n]={exports:{}};return t[n].call(s.exports,s,s.exports,i),s.exports}(()=>{"use strict";i(443);const t="year",e="month",n="day",s="hour",a="minute",o="second",r="millisecond",l={en:["January","February","March","April","May","June","July","August","September","October","November","December"],es:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],ru:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],ptBr:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],fr:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],tr:["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"],zh:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]},h={parse(t,e="-",i=/[.:]/){if(t instanceof Date)return t;if("string"==typeof t){let n,s;const a=t.split(" ");n=a[0].split(e).map((t=>parseInt(t,10))),s=a[1]&&a[1].split(i),n[1]=n[1]-1;let o=n;return s&&s.length&&(4==s.length&&(s[3]="0."+s[3],s[3]=1e3*parseFloat(s[3])),o=o.concat(s)),new Date(...o)}},to_string(t,e=!1){if(!(t instanceof Date))throw new TypeError("Invalid argument type");const i=this.get_date_values(t).map(((t,e)=>(1===e&&(t+=1),c(t+"",6===e?3:2,"0")))),n=`${i[0]}-${i[1]}-${i[2]}`,s=`${i[3]}:${i[4]}:${i[5]}.${i[6]}`;return n+(e?" "+s:"")},format(t,e="YYYY-MM-DD HH:mm:ss.SSS",i="en"){const n=this.get_date_values(t).map((t=>c(t,2,0))),s={YYYY:n[0],MM:c(+n[1]+1,2,0),DD:n[2],HH:n[3],mm:n[4],ss:n[5],SSS:n[6],D:n[2],MMMM:l[i][+n[1]],MMM:l[i][+n[1]]};let a=e;const o=[];return Object.keys(s).sort(((t,e)=>e.length-t.length)).forEach((t=>{a.includes(t)&&(a=a.replace(t,`$${o.length}`),o.push(s[t]))})),o.forEach(((t,e)=>{a=a.replace(`$${e}`,t)})),a},diff(t,e,i=n){let s,a,o,r,l,h,c;return s=t-e,a=s/1e3,r=a/60,o=r/60,l=o/24,h=l/30,c=h/12,i.endsWith("s")||(i+="s"),Math.floor({milliseconds:s,seconds:a,minutes:r,hours:o,days:l,months:h,years:c}[i])},today(){const t=this.get_date_values(new Date).slice(0,3);return new Date(...t)},now:()=>new Date,add(i,l,h){l=parseInt(l,10);const c=[i.getFullYear()+(h===t?l:0),i.getMonth()+(h===e?l:0),i.getDate()+(h===n?l:0),i.getHours()+(h===s?l:0),i.getMinutes()+(h===a?l:0),i.getSeconds()+(h===o?l:0),i.getMilliseconds()+(h===r?l:0)];return new Date(...c)},start_of(i,l){const h={[t]:6,[e]:5,[n]:4,[s]:3,[a]:2,[o]:1,[r]:0};function c(t){return h[t]<=h[l]}const d=[i.getFullYear(),c(t)?0:i.getMonth(),c(e)?1:i.getDate(),c(n)?0:i.getHours(),c(s)?0:i.getMinutes(),c(a)?0:i.getSeconds(),c(o)?0:i.getMilliseconds()];return new Date(...d)},clone(t){return new Date(...this.get_date_values(t))},get_date_values:t=>[t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()],get_days_in_month(t){const e=[31,28,31,30,31,30,31,31,30,31,30,31],i=t.getMonth();if(1!==i)return e[i];const n=t.getFullYear();return n%4==0&&n%100!=0||n%400==0?29:28}};function c(t,e,i){return t+="",e>>=0,i=String(void 0!==i?i:" "),t.length>e?String(t):((e-=t.length)>i.length&&(i+=i.repeat(e/i.length)),i.slice(0,e)+String(t))}function d(t,e){return"string"==typeof t?(e||document).querySelector(t):t||null}function u(t,e){const i=document.createElementNS("http://www.w3.org/2000/svg",t);for(let t in e)if("append_to"===t){e.append_to.appendChild(i)}else"innerHTML"===t?i.innerHTML=e.innerHTML:i.setAttribute(t,e[t]);return i}function p(t,e,i,n){const s=function(t,e,i,n,s="0.4s",a="0.1s"){const o=t.querySelector("animate");if(o)return d.attr(o,{attributeName:e,from:i,to:n,dur:s,begin:"click + "+a}),t;const r=u("animate",{attributeName:e,from:i,to:n,dur:s,begin:a,calcMode:"spline",values:i+";"+n,keyTimes:"0; 1",keySplines:g("ease-out")});return t.appendChild(r),t}(t,e,i,n);if(s===t){const t=document.createEvent("HTMLEvents");t.initEvent("click",!0,!0),t.eventName="click",s.dispatchEvent(t)}}function g(t){return{ease:".25 .1 .25 1",linear:"0 0 1 1","ease-in":".42 0 1 1","ease-out":"0 0 .58 1","ease-in-out":".42 0 .58 1"}[t]}d.on=(t,e,i,n)=>{n?d.delegate(t,e,i,n):(n=i,d.bind(t,e,n))},d.off=(t,e,i)=>{t.removeEventListener(e,i)},d.bind=(t,e,i)=>{e.split(/\s+/).forEach((function(e){t.addEventListener(e,i)}))},d.delegate=(t,e,i,n)=>{t.addEventListener(e,(function(t){const e=t.target.closest(i);e&&(t.delegatedTarget=e,n.call(this,t,e))}))},d.closest=(t,e)=>e?e.matches(t)?e:d.closest(t,e.parentNode):null,d.attr=(t,e,i)=>{if(!i&&"string"==typeof e)return t.getAttribute(e);if("object"!=typeof e)t.setAttribute(e,i);else for(let i in e)d.attr(t,i,e[i])};class f{constructor(t,e){this.set_defaults(t,e),this.prepare(),this.draw(),this.bind()}set_defaults(t,e){this.action_completed=!1,this.gantt=t,this.task=e}prepare(){this.prepare_values(),this.prepare_helpers()}prepare_values(){this.invalid=this.task.invalid,this.height=this.gantt.options.bar_height,this.x=this.compute_x(),this.y=this.compute_y(),this.corner_radius=this.gantt.options.bar_corner_radius,this.duration=h.diff(this.task._end,this.task._start,"hour")/this.gantt.options.step,this.width=this.gantt.options.column_width*this.duration,this.progress_width=this.gantt.options.column_width*this.duration*(this.task.progress/100)||0,this.group=u("g",{class:"bar-wrapper "+(this.task.custom_class||""),"data-id":this.task.id}),this.bar_group=u("g",{class:"bar-group",append_to:this.group}),this.handle_group=u("g",{class:"handle-group",append_to:this.group})}prepare_helpers(){SVGElement.prototype.getX=function(){return+this.getAttribute("x")},SVGElement.prototype.getY=function(){return+this.getAttribute("y")},SVGElement.prototype.getWidth=function(){return+this.getAttribute("width")},SVGElement.prototype.getHeight=function(){return+this.getAttribute("height")},SVGElement.prototype.getEndX=function(){return this.getX()+this.getWidth()}}draw(){this.draw_bar(),this.draw_progress_bar(),this.draw_label(),this.draw_resize_handles()}draw_bar(){this.$bar=u("rect",{x:this.x,y:this.y,width:this.width,height:this.height,rx:this.corner_radius,ry:this.corner_radius,class:"bar",append_to:this.bar_group}),p(this.$bar,"width",0,this.width),this.invalid&&this.$bar.classList.add("bar-invalid")}draw_progress_bar(){this.invalid||(this.$bar_progress=u("rect",{x:this.x,y:this.y,width:this.progress_width,height:this.height,rx:this.corner_radius,ry:this.corner_radius,class:"bar-progress",append_to:this.bar_group}),p(this.$bar_progress,"width",0,this.progress_width))}draw_label(){u("text",{x:this.x+this.width/2,y:this.y+this.height/2,innerHTML:this.task.name,class:"bar-label",append_to:this.bar_group}),requestAnimationFrame((()=>this.update_label_position()))}draw_resize_handles(){if(this.invalid)return;const t=this.$bar;u("rect",{x:t.getX()+t.getWidth()-9,y:t.getY()+1,width:8,height:this.height-2,rx:this.corner_radius,ry:this.corner_radius,class:"handle right",append_to:this.handle_group}),u("rect",{x:t.getX()+1,y:t.getY()+1,width:8,height:this.height-2,rx:this.corner_radius,ry:this.corner_radius,class:"handle left",append_to:this.handle_group}),this.task.progress&&this.task.progress<100&&(this.$handle_progress=u("polygon",{points:this.get_progress_polygon_points().join(","),class:"handle progress",append_to:this.handle_group}))}get_progress_polygon_points(){const t=this.$bar_progress;return[t.getEndX()-5,t.getY()+t.getHeight(),t.getEndX()+5,t.getY()+t.getHeight(),t.getEndX(),t.getY()+t.getHeight()-8.66]}bind(){this.invalid||this.setup_click_event()}setup_click_event(){d.on(this.group,"focus "+this.gantt.options.popup_trigger,(t=>{this.action_completed||(this.show_popup(),this.gantt.unselect_all(),this.group.classList.add("active"))})),d.on(this.group,"dblclick",(t=>{this.action_completed||this.gantt.trigger_event("click",[this.task])}))}show_popup(){if(this.gantt.bar_being_dragged)return;const t=h.format(this.task._start,"MMM D",this.gantt.options.language)+" - "+h.format(h.add(this.task._end,-1,"second"),"MMM D",this.gantt.options.language);this.gantt.show_popup({target_element:this.$bar,title:this.task.name,subtitle:t,task:this.task})}update_bar_position({x:t=null,width:e=null}){const i=this.$bar;if(t){if(!this.task.dependencies.map((t=>this.gantt.get_bar(t).$bar.getX())).reduce(((e,i)=>t>=i),t))return void(e=null);this.update_attr(i,"x",t)}e&&e>=this.gantt.options.column_width&&this.update_attr(i,"width",e),this.update_label_position(),this.update_handle_position(),this.update_progressbar_position(),this.update_arrow_position()}date_changed(){let t=!1;const{new_start_date:e,new_end_date:i}=this.compute_start_end_date();Number(this.task._start)!==Number(e)&&(t=!0,this.task._start=e),Number(this.task._end)!==Number(i)&&(t=!0,this.task._end=i),t&&this.gantt.trigger_event("date_change",[this.task,e,h.add(i,-1,"second")])}progress_changed(){const t=this.compute_progress();this.task.progress=t,this.gantt.trigger_event("progress_change",[this.task,t])}set_action_completed(){this.action_completed=!0,setTimeout((()=>this.action_completed=!1),1e3)}compute_start_end_date(){const t=this.$bar,e=t.getX()/this.gantt.options.column_width,i=h.add(this.gantt.gantt_start,e*this.gantt.options.step,"hour"),n=t.getWidth()/this.gantt.options.column_width;return{new_start_date:i,new_end_date:h.add(i,n*this.gantt.options.step,"hour")}}compute_progress(){const t=this.$bar_progress.getWidth()/this.$bar.getWidth()*100;return parseInt(t,10)}compute_x(){const{step:t,column_width:e}=this.gantt.options,i=this.task._start,n=this.gantt.gantt_start;let s=h.diff(i,n,"hour")/t*e;if(this.gantt.view_is("Month")){s=h.diff(i,n,"day")*e/30}return s}compute_y(){return this.gantt.options.header_height+this.gantt.options.padding+this.task._index*(this.height+this.gantt.options.padding)}get_snap_position(t){let e,i,n=t;return this.gantt.view_is("Week")?(e=t%(this.gantt.options.column_width/7),i=n-e+(e<this.gantt.options.column_width/14?0:this.gantt.options.column_width/7)):this.gantt.view_is("Month")?(e=t%(this.gantt.options.column_width/30),i=n-e+(e<this.gantt.options.column_width/60?0:this.gantt.options.column_width/30)):(e=t%this.gantt.options.column_width,i=n-e+(e<this.gantt.options.column_width/2?0:this.gantt.options.column_width)),i}update_attr(t,e,i){return i=+i,isNaN(i)||t.setAttribute(e,i),t}update_progressbar_position(){this.$bar_progress.setAttribute("x",this.$bar.getX()),this.$bar_progress.setAttribute("width",this.$bar.getWidth()*(this.task.progress/100))}update_label_position(){const t=this.$bar,e=this.group.querySelector(".bar-label");e.getBBox().width>t.getWidth()?(e.classList.add("big"),e.setAttribute("x",t.getX()+t.getWidth()+5)):(e.classList.remove("big"),e.setAttribute("x",t.getX()+t.getWidth()/2))}update_handle_position(){const t=this.$bar;this.handle_group.querySelector(".handle.left").setAttribute("x",t.getX()+1),this.handle_group.querySelector(".handle.right").setAttribute("x",t.getEndX()-9);const e=this.group.querySelector(".handle.progress");e&&e.setAttribute("points",this.get_progress_polygon_points())}update_arrow_position(){this.arrows=this.arrows||[];for(let t of this.arrows)t.update()}}class m{constructor(t,e,i){this.gantt=t,this.from_task=e,this.to_task=i,this.calculate_path(),this.draw()}calculate_path(){let t=this.from_task.$bar.getX()+this.from_task.$bar.getWidth()/2;const e=()=>this.to_task.$bar.getX()<t+this.gantt.options.padding&&t>this.from_task.$bar.getX()+this.gantt.options.padding;for(;e();)t-=10;const i=this.gantt.options.header_height+this.gantt.options.bar_height+(this.gantt.options.padding+this.gantt.options.bar_height)*this.from_task.task._index+this.gantt.options.padding,n=this.to_task.$bar.getX()-this.gantt.options.padding/2,s=this.gantt.options.header_height+this.gantt.options.bar_height/2+(this.gantt.options.padding+this.gantt.options.bar_height)*this.to_task.task._index+this.gantt.options.padding,a=this.from_task.task._index>this.to_task.task._index,o=this.gantt.options.arrow_curve,r=a?1:0,l=a?-o:o,h=a?s+this.gantt.options.arrow_curve:s-this.gantt.options.arrow_curve;if(this.path=`\n            M ${t} ${i}\n            V ${h}\n            a ${o} ${o} 0 0 ${r} ${o} ${l}\n            L ${n} ${s}\n            m -5 -5\n            l 5 5\n            l -5 5`,this.to_task.$bar.getX()<this.from_task.$bar.getX()+this.gantt.options.padding){const e=this.gantt.options.padding/2-o,a=this.to_task.$bar.getY()+this.to_task.$bar.getHeight()/2-l,h=this.to_task.$bar.getX()-this.gantt.options.padding;this.path=`\n                M ${t} ${i}\n                v ${e}\n                a ${o} ${o} 0 0 1 -${o} ${o}\n                H ${h}\n                a ${o} ${o} 0 0 ${r} -${o} ${l}\n                V ${a}\n                a ${o} ${o} 0 0 ${r} ${o} ${l}\n                L ${n} ${s}\n                m -5 -5\n                l 5 5\n                l -5 5`}}draw(){this.element=u("path",{d:this.path,"data-from":this.from_task.task.id,"data-to":this.to_task.task.id})}update(){this.calculate_path(),this.element.setAttribute("d",this.path)}}class v{constructor(t,e){this.parent=t,this.custom_html=e,this.make()}make(){this.parent.innerHTML='\n            <div class="title"></div>\n            <div class="subtitle"></div>\n            <div class="pointer"></div>\n        ',this.hide(),this.title=this.parent.querySelector(".title"),this.subtitle=this.parent.querySelector(".subtitle"),this.pointer=this.parent.querySelector(".pointer")}show(t){if(!t.target_element)throw new Error("target_element is required to show popup");t.position||(t.position="left");const e=t.target_element;if(this.custom_html){let e=this.custom_html(t.task);e+='<div class="pointer"></div>',this.parent.innerHTML=e,this.pointer=this.parent.querySelector(".pointer")}else this.title.innerHTML=t.title,this.subtitle.innerHTML=t.subtitle,this.parent.style.width=this.parent.clientWidth+"px";let i;e instanceof HTMLElement?i=e.getBoundingClientRect():e instanceof SVGElement&&(i=t.target_element.getBBox()),"left"===t.position&&(this.parent.style.left=i.x+(i.width+10)+"px",this.parent.style.top=i.y+"px",this.pointer.style.transform="rotateZ(90deg)",this.pointer.style.left="-7px",this.pointer.style.top="2px"),this.parent.style.opacity=1}hide(){this.parent.style.opacity=0}}const b={QUARTER_DAY:"Quarter Day",HALF_DAY:"Half Day",DAY:"Day",WEEK:"Week",MONTH:"Month",YEAR:"Year"};class y{constructor(t,e,i){this.setup_wrapper(t),this.setup_options(i),this.setup_tasks(e),this.change_view_mode(),this.bind_events()}setup_wrapper(t){let e,i;if("string"==typeof t&&(t=document.querySelector(t)),t instanceof HTMLElement)i=t,e=t.querySelector("svg");else{if(!(t instanceof SVGElement))throw new TypeError("Frappé Gantt only supports usage of a string CSS selector, HTML DOM element or SVG DOM element for the 'element' parameter");e=t}e?(this.$svg=e,this.$svg.classList.add("gantt")):this.$svg=u("svg",{append_to:i,class:"gantt"}),this.$container=document.createElement("div"),this.$container.classList.add("gantt-container");this.$svg.parentElement.appendChild(this.$container),this.$container.appendChild(this.$svg),this.popup_wrapper=document.createElement("div"),this.popup_wrapper.classList.add("popup-wrapper"),this.$container.appendChild(this.popup_wrapper)}setup_options(t){const e={header_height:50,column_width:30,step:24,view_modes:[...Object.values(b)],bar_height:20,bar_corner_radius:3,arrow_curve:5,padding:18,view_mode:"Day",date_format:"YYYY-MM-DD",popup_trigger:"click",custom_popup_html:null,language:"en"};this.options=Object.assign({},e,t)}setup_tasks(t){this.tasks=t.map(((t,e)=>{if(t._start=h.parse(t.start),t._end=h.parse(t.end),h.diff(t._end,t._start,"year")>10&&(t.end=null),t._index=e,!t.start&&!t.end){const e=h.today();t._start=e,t._end=h.add(e,2,"day")}!t.start&&t.end&&(t._start=h.add(t._end,-2,"day")),t.start&&!t.end&&(t._end=h.add(t._start,2,"day"));if(h.get_date_values(t._end).slice(3).every((t=>0===t))&&(t._end=h.add(t._end,24,"hour")),t.start&&t.end||(t.invalid=!0),"string"==typeof t.dependencies||!t.dependencies){let e=[];t.dependencies&&(e=t.dependencies.split(",").map((t=>t.trim())).filter((t=>t))),t.dependencies=e}return t.id||(t.id=function(t){return t.name+"_"+Math.random().toString(36).slice(2,12)}(t)),t})),this.setup_dependencies()}setup_dependencies(){this.dependency_map={};for(let t of this.tasks)for(let e of t.dependencies)this.dependency_map[e]=this.dependency_map[e]||[],this.dependency_map[e].push(t.id)}refresh(t){this.setup_tasks(t),this.change_view_mode()}change_view_mode(t=this.options.view_mode){this.update_view_scale(t),this.setup_dates(),this.render(),this.trigger_event("view_change",[t])}update_view_scale(t){this.options.view_mode=t,t===b.DAY?(this.options.step=24,this.options.column_width=38):t===b.HALF_DAY?(this.options.step=12,this.options.column_width=38):t===b.QUARTER_DAY?(this.options.step=6,this.options.column_width=38):t===b.WEEK?(this.options.step=168,this.options.column_width=140):t===b.MONTH?(this.options.step=720,this.options.column_width=120):t===b.YEAR&&(this.options.step=8760,this.options.column_width=120)}setup_dates(){this.setup_gantt_dates(),this.setup_date_values()}setup_gantt_dates(){this.gantt_start=this.gantt_end=null;for(let t of this.tasks)(!this.gantt_start||t._start<this.gantt_start)&&(this.gantt_start=t._start),(!this.gantt_end||t._end>this.gantt_end)&&(this.gantt_end=t._end);this.gantt_start=h.start_of(this.gantt_start,"day"),this.gantt_end=h.start_of(this.gantt_end,"day"),this.view_is([b.QUARTER_DAY,b.HALF_DAY])?(this.gantt_start=h.add(this.gantt_start,-7,"day"),this.gantt_end=h.add(this.gantt_end,7,"day")):this.view_is(b.MONTH)?(this.gantt_start=h.start_of(this.gantt_start,"year"),this.gantt_end=h.add(this.gantt_end,1,"year")):this.view_is(b.YEAR)?(this.gantt_start=h.add(this.gantt_start,-2,"year"),this.gantt_end=h.add(this.gantt_end,2,"year")):(this.gantt_start=h.add(this.gantt_start,-1,"month"),this.gantt_end=h.add(this.gantt_end,1,"month"))}setup_date_values(){this.dates=[];let t=null;for(;null===t||t<this.gantt_end;)t=t?this.view_is(b.YEAR)?h.add(t,1,"year"):this.view_is(b.MONTH)?h.add(t,1,"month"):h.add(t,this.options.step,"hour"):h.clone(this.gantt_start),this.dates.push(t)}bind_events(){this.bind_grid_click(),this.bind_bar_events()}render(){this.clear(),this.setup_layers(),this.make_grid(),this.make_dates(),this.make_bars(),this.make_arrows(),this.map_arrows_on_bars(),this.set_width(),this.set_scroll_position()}setup_layers(){this.layers={};const t=["grid","date","arrow","progress","bar","details"];for(let e of t)this.layers[e]=u("g",{class:e,append_to:this.$svg})}make_grid(){this.make_grid_background(),this.make_grid_rows(),this.make_grid_header(),this.make_grid_ticks(),this.make_grid_highlights()}make_grid_background(){const t=this.dates.length*this.options.column_width,e=this.options.header_height+this.options.padding+(this.options.bar_height+this.options.padding)*this.tasks.length;u("rect",{x:0,y:0,width:t,height:e,class:"grid-background",append_to:this.layers.grid}),d.attr(this.$svg,{height:e+this.options.padding+100,width:"100%"})}make_grid_rows(){const t=u("g",{append_to:this.layers.grid}),e=u("g",{append_to:this.layers.grid}),i=this.dates.length*this.options.column_width,n=this.options.bar_height+this.options.padding;let s=this.options.header_height+this.options.padding/2;for(let a of this.tasks)u("rect",{x:0,y:s,width:i,height:n,class:"grid-row",append_to:t}),u("line",{x1:0,y1:s+n,x2:i,y2:s+n,class:"row-line",append_to:e}),s+=this.options.bar_height+this.options.padding}make_grid_header(){u("rect",{x:0,y:0,width:this.dates.length*this.options.column_width,height:this.options.header_height+10,class:"grid-header",append_to:this.layers.grid})}make_grid_ticks(){let t=0,e=this.options.header_height+this.options.padding/2,i=(this.options.bar_height+this.options.padding)*this.tasks.length;for(let n of this.dates){let s="tick";this.view_is(b.DAY)&&1===n.getDate()&&(s+=" thick"),this.view_is(b.WEEK)&&n.getDate()>=1&&n.getDate()<8&&(s+=" thick"),this.view_is(b.MONTH)&&(n.getMonth()+1)%3==0&&(s+=" thick"),u("path",{d:`M ${t} ${e} v ${i}`,class:s,append_to:this.layers.grid}),this.view_is(b.MONTH)?t+=h.get_days_in_month(n)*this.options.column_width/30:t+=this.options.column_width}}make_grid_highlights(){if(this.view_is(b.DAY)){u("rect",{x:h.diff(h.today(),this.gantt_start,"hour")/this.options.step*this.options.column_width,y:0,width:this.options.column_width,height:(this.options.bar_height+this.options.padding)*this.tasks.length+this.options.header_height+this.options.padding/2,class:"today-highlight",append_to:this.layers.grid})}}make_dates(){for(let t of this.get_dates_to_draw())if(u("text",{x:t.lower_x,y:t.lower_y,innerHTML:t.lower_text,class:"lower-text",append_to:this.layers.date}),t.upper_text){const e=u("text",{x:t.upper_x,y:t.upper_y,innerHTML:t.upper_text,class:"upper-text",append_to:this.layers.date});e.getBBox().x2>this.layers.grid.getBBox().width&&e.remove()}}get_dates_to_draw(){let t=null;return this.dates.map(((e,i)=>{const n=this.get_date_info(e,t,i);return t=e,n}))}get_date_info(t,e,i){e||(e=h.add(t,1,"year"));const n={"Quarter Day_lower":h.format(t,"HH",this.options.language),"Half Day_lower":h.format(t,"HH",this.options.language),Day_lower:t.getDate()!==e.getDate()?h.format(t,"D",this.options.language):"",Week_lower:t.getMonth()!==e.getMonth()?h.format(t,"D MMM",this.options.language):h.format(t,"D",this.options.language),Month_lower:h.format(t,"MMMM",this.options.language),Year_lower:h.format(t,"YYYY",this.options.language),"Quarter Day_upper":t.getDate()!==e.getDate()?h.format(t,"D MMM",this.options.language):"","Half Day_upper":t.getDate()!==e.getDate()?t.getMonth()!==e.getMonth()?h.format(t,"D MMM",this.options.language):h.format(t,"D",this.options.language):"",Day_upper:t.getMonth()!==e.getMonth()?h.format(t,"MMMM",this.options.language):"",Week_upper:t.getMonth()!==e.getMonth()?h.format(t,"MMMM",this.options.language):"",Month_upper:t.getFullYear()!==e.getFullYear()?h.format(t,"YYYY",this.options.language):"",Year_upper:t.getFullYear()!==e.getFullYear()?h.format(t,"YYYY",this.options.language):""},s={x:i*this.options.column_width,lower_y:this.options.header_height,upper_y:this.options.header_height-25},a={"Quarter Day_lower":4*this.options.column_width/2,"Quarter Day_upper":0,"Half Day_lower":2*this.options.column_width/2,"Half Day_upper":0,Day_lower:this.options.column_width/2,Day_upper:30*this.options.column_width/2,Week_lower:0,Week_upper:4*this.options.column_width/2,Month_lower:this.options.column_width/2,Month_upper:12*this.options.column_width/2,Year_lower:this.options.column_width/2,Year_upper:30*this.options.column_width/2};return{upper_text:n[`${this.options.view_mode}_upper`],lower_text:n[`${this.options.view_mode}_lower`],upper_x:s.x+a[`${this.options.view_mode}_upper`],upper_y:s.upper_y,lower_x:s.x+a[`${this.options.view_mode}_lower`],lower_y:s.lower_y}}make_bars(){this.bars=this.tasks.map((t=>{const e=new f(this,t);return this.layers.bar.appendChild(e.group),e}))}make_arrows(){this.arrows=[];for(let t of this.tasks){let e=[];e=t.dependencies.map((e=>{const i=this.get_task(e);if(!i)return;const n=new m(this,this.bars[i._index],this.bars[t._index]);return this.layers.arrow.appendChild(n.element),n})).filter(Boolean),this.arrows=this.arrows.concat(e)}}map_arrows_on_bars(){for(let t of this.bars)t.arrows=this.arrows.filter((e=>e.from_task.task.id===t.task.id||e.to_task.task.id===t.task.id))}set_width(){const t=this.$svg.getBoundingClientRect().width,e=this.$svg.querySelector(".grid .grid-row").getAttribute("width");t<e&&this.$svg.setAttribute("width",e)}set_scroll_position(){const t=this.$svg.parentElement;if(!t)return;const e=h.diff(this.get_oldest_starting_date(),this.gantt_start,"hour")/this.options.step*this.options.column_width-this.options.column_width;t.scrollLeft=e}bind_grid_click(){d.on(this.$svg,this.options.popup_trigger,".grid-row, .grid-header",(()=>{this.unselect_all(),this.hide_popup()}))}bind_bar_events(){let t=!1,e=0,i=0,n=!1,s=!1,a=null,o=[];this.bar_being_dragged=null,d.on(this.$svg,"mousedown",".bar-wrapper, .handle",((r,l)=>{const h=d.closest(".bar-wrapper",l);l.classList.contains("left")?n=!0:l.classList.contains("right")?s=!0:l.classList.contains("bar-wrapper")&&(t=!0),h.classList.add("active"),e=r.offsetX,i=r.offsetY,a=h.getAttribute("data-id");const c=[a,...this.get_all_dependent_tasks(a)];o=c.map((t=>this.get_bar(t))),this.bar_being_dragged=a,o.forEach((t=>{const e=t.$bar;e.ox=e.getX(),e.oy=e.getY(),e.owidth=e.getWidth(),e.finaldx=0}))})),d.on(this.$svg,"mousemove",(i=>{if(!(t||n||s))return;const r=i.offsetX-e;i.offsetY;o.forEach((e=>{const i=e.$bar;i.finaldx=this.get_snap_position(r),n?a===e.task.id?e.update_bar_position({x:i.ox+i.finaldx,width:i.owidth-i.finaldx}):e.update_bar_position({x:i.ox+i.finaldx}):s?a===e.task.id&&e.update_bar_position({width:i.owidth+i.finaldx}):t&&e.update_bar_position({x:i.ox+i.finaldx})}))})),document.addEventListener("mouseup",(e=>{(t||n||s)&&o.forEach((t=>t.group.classList.remove("active"))),t=!1,n=!1,s=!1})),d.on(this.$svg,"mouseup",(t=>{this.bar_being_dragged=null,o.forEach((t=>{t.$bar.finaldx&&(t.date_changed(),t.set_action_completed())}))})),this.bind_bar_progress()}bind_bar_progress(){let t=0,e=0,i=null,n=null,s=null,a=null;d.on(this.$svg,"mousedown",".handle.progress",((o,r)=>{i=!0,t=o.offsetX,e=o.offsetY;const l=d.closest(".bar-wrapper",r).getAttribute("data-id");n=this.get_bar(l),s=n.$bar_progress,a=n.$bar,s.finaldx=0,s.owidth=s.getWidth(),s.min_dx=-s.getWidth(),s.max_dx=a.getWidth()-s.getWidth()})),d.on(this.$svg,"mousemove",(e=>{if(!i)return;let a=e.offsetX-t;e.offsetY;a>s.max_dx&&(a=s.max_dx),a<s.min_dx&&(a=s.min_dx);const o=n.$handle_progress;d.attr(s,"width",s.owidth+a),d.attr(o,"points",n.get_progress_polygon_points()),s.finaldx=a})),d.on(this.$svg,"mouseup",(()=>{i=!1,s&&s.finaldx&&(n.progress_changed(),n.set_action_completed())}))}get_all_dependent_tasks(t){let e=[],i=[t];for(;i.length;){const t=i.reduce(((t,e)=>t=t.concat(this.dependency_map[e])),[]);e=e.concat(t),i=t.filter((t=>!i.includes(t)))}return e.filter(Boolean)}get_snap_position(t){let e,i,n=t;return this.view_is(b.WEEK)?(e=t%(this.options.column_width/7),i=n-e+(e<this.options.column_width/14?0:this.options.column_width/7)):this.view_is(b.MONTH)?(e=t%(this.options.column_width/30),i=n-e+(e<this.options.column_width/60?0:this.options.column_width/30)):(e=t%this.options.column_width,i=n-e+(e<this.options.column_width/2?0:this.options.column_width)),i}unselect_all(){[...this.$svg.querySelectorAll(".bar-wrapper")].forEach((t=>{t.classList.remove("active")}))}view_is(t){return"string"==typeof t?this.options.view_mode===t:!!Array.isArray(t)&&t.some((t=>this.options.view_mode===t))}get_task(t){return this.tasks.find((e=>e.id===t))}get_bar(t){return this.bars.find((e=>e.task.id===t))}show_popup(t){this.popup||(this.popup=new v(this.popup_wrapper,this.options.custom_popup_html)),this.popup.show(t)}hide_popup(){this.popup&&this.popup.hide()}trigger_event(t,e){this.options["on_"+t]&&this.options["on_"+t].apply(null,e)}get_oldest_starting_date(){return this.tasks.map((t=>t._start)).reduce(((t,e)=>e<=t?e:t))}clear(){this.$svg.innerHTML=""}}function _(t,e){return"string"==typeof t?(e||document).querySelector(t):t||null}function w(t){let e=t.getBoundingClientRect();return{top:e.top+(document.documentElement.scrollTop||document.body.scrollTop),left:e.left+(document.documentElement.scrollLeft||document.body.scrollLeft)}}y.VIEW_MODE=b,_.create=(t,e)=>{var i=document.createElement(t);for(var n in e){var s=e[n];if("inside"===n)_(s).appendChild(i);else if("around"===n){var a=_(s);a.parentNode.insertBefore(i,a),i.appendChild(a)}else"styles"===n?"object"==typeof s&&Object.keys(s).map((t=>{i.style[t]=s[t]})):n in i?i[n]=s:i.setAttribute(n,s)}return i};const x={margins:{top:10,bottom:10,left:20,right:20},paddings:{top:20,bottom:40,left:30,right:10},baseHeight:240,titleHeight:20,legendHeight:30,titleFontSize:12};function E(t){return t.titleHeight+t.margins.top+t.paddings.top}function D(t){return t.margins.left+t.paddings.left}function k(t){return t.margins.top+t.margins.bottom+t.paddings.top+t.paddings.bottom+t.titleHeight+t.legendHeight}function A(t){return t.margins.left+t.margins.right+t.paddings.left+t.paddings.right}const S=["line","bar"],M=10,T=["light-blue","blue","violet","red","orange","yellow","green","light-green","purple","magenta","light-grey","dark-grey"],C={bar:T,line:T,pie:T,percentage:T,heatmap:["#ebedf0","#c6e48b","#7bc96f","#239a3b","#196127"],donut:T},$=Math.PI/180;class O{constructor({parent:t=null,colors:e=[]}){this.parent=t,this.colors=e,this.titleName="",this.titleValue="",this.listValues=[],this.titleValueFirst=0,this.x=0,this.y=0,this.top=0,this.left=0,this.setup()}setup(){this.makeTooltip()}refresh(){this.fill(),this.calcPosition()}makeTooltip(){this.container=_.create("div",{inside:this.parent,className:"graph-svg-tip comparison",innerHTML:'<span class="title"></span>\n\t\t\t\t<ul class="data-point-list"></ul>\n\t\t\t\t<div class="svg-pointer"></div>'}),this.hideTip(),this.title=this.container.querySelector(".title"),this.dataPointList=this.container.querySelector(".data-point-list"),this.parent.addEventListener("mouseleave",(()=>{this.hideTip()}))}fill(){let t;this.index&&this.container.setAttribute("data-point-index",this.index),t=this.titleValueFirst?`<strong>${this.titleValue}</strong>${this.titleName}`:`${this.titleName}<strong>${this.titleValue}</strong>`,this.title.innerHTML=t,this.dataPointList.innerHTML="",this.listValues.map(((t,e)=>{const i=this.colors[e]||"black";let n=0===t.formatted||t.formatted?t.formatted:t.value,s=_.create("li",{styles:{"border-top":`3px solid ${i}`},innerHTML:`<strong style="display: block;">${0===n||n?n:""}</strong>\n\t\t\t\t\t${t.title?t.title:""}`});this.dataPointList.appendChild(s)}))}calcPosition(){let t=this.container.offsetWidth;this.top=this.y-this.container.offsetHeight-5,this.left=this.x-t/2;let e=this.parent.offsetWidth-t,i=this.container.querySelector(".svg-pointer");if(this.left<0)i.style.left=`calc(50% - ${-1*this.left}px)`,this.left=0;else if(this.left>e){let t=`calc(50% + ${this.left-e}px)`;i.style.left=t,this.left=e}else i.style.left="50%"}setValues(t,e,i={},n=[],s=-1){this.titleName=i.name,this.titleValue=i.value,this.listValues=n,this.x=t,this.y=e,this.titleValueFirst=i.valueFirst||0,this.index=s,this.refresh()}hideTip(){this.container.style.top="0px",this.container.style.left="0px",this.container.style.opacity="0"}showTip(){this.container.style.top=this.top+"px",this.container.style.left=this.left+"px",this.container.style.opacity="1"}}function P(t){return parseFloat(t.toFixed(2))}function N(t,e,i,n=!1){i||(i=n?t[0]:t[t.length-1]);let s=new Array(Math.abs(e)).fill(i);return t=n?s.concat(t):t.concat(s)}function L(t,e){return(t+"").length*e}function I(t,e){return{x:Math.sin(t*$)*e,y:Math.cos(t*$)*e}}function Y(t,e=!1){return!Number.isNaN(t)&&(void 0!==t&&(!!Number.isFinite(t)&&!(e&&t<0)))}function H(t){let e,i,n;if(t instanceof Date)return new Date(t.getTime());if("object"!=typeof t||null===t)return t;for(n in e=Array.isArray(t)?[]:{},t)i=t[n],e[n]=H(i);return e}function R(t,e){let i,n;return t<=e?(i=e-t,n=t):(i=t-e,n=e),[i,n]}function F(t,e,i=e.length-t.length){return i>0?t=N(t,i):e=N(e,i),[t,e]}function z(t,e){if(t)return t.length>e?t.slice(0,e-3)+"...":t}function W(t,e){let i=[];for(let n=0;n<t.length;n++)i.push([t[n],e[n]]);let n=(t,e,i,n)=>{let s=((t,e)=>{let i=e[0]-t[0],n=e[1]-t[1];return{length:Math.sqrt(Math.pow(i,2)+Math.pow(n,2)),angle:Math.atan2(n,i)}})(e||t,i||t),a=s.angle+(n?Math.PI:0),o=.2*s.length;return[t[0]+Math.cos(a)*o,t[1]+Math.sin(a)*o]};return((t,e)=>t.reduce(((t,i,n,s)=>0===n?`${i[0]},${i[1]}`:`${t} ${e(i,n,s)}`),""))(i,((t,e,i)=>{let s=n(i[e-1],i[e-2],t),a=n(t,i[e-1],i[e+1],!0);return`C ${s[0]},${s[1]} ${a[0]},${a[1]} ${t[0]},${t[1]}`}))}const j={"light-blue":"#7cd6fd",blue:"#5e64ff",violet:"#743ee2",red:"#ff5858",orange:"#ffa00a",yellow:"#feef72",green:"#28a745","light-green":"#98d85b",purple:"#b554ff",magenta:"#ffa3ef",black:"#36114C",grey:"#bdd3e6","light-grey":"#f0f4f7","dark-grey":"#b8c2cc"};function B(t){return t>255?255:t<0?0:t}function X(t,e){let i=V(t),n=!1;"#"==i[0]&&(i=i.slice(1),n=!0);let s=parseInt(i,16),a=B((s>>16)+e),o=B((s>>8&255)+e);return(n?"#":"")+(B((255&s)+e)|o<<8|a<<16).toString(16)}const V=t=>/rgb[a]{0,1}\([\d, ]+\)/gim.test(t)?/\D+(\d*)\D+(\d*)\D+(\d*)/gim.exec(t).map(((t,e)=>0!==e?Number(t).toString(16):"#")).reduce(((t,e)=>`${t}${e}`)):j[t]||t,U=10,q="#dadada",G="#555b51";function K(t,e){return"string"==typeof t?(e||document).querySelector(t):t||null}function J(t,e){var i=document.createElementNS("http://www.w3.org/2000/svg",t);for(var n in e){var s=e[n];if("inside"===n)K(s).appendChild(i);else if("around"===n){var a=K(s);a.parentNode.insertBefore(i,a),i.appendChild(a)}else"styles"===n?"object"==typeof s&&Object.keys(s).map((t=>{i.style[t]=s[t]})):("className"===n&&(n="class"),"innerHTML"===n?i.textContent=s:i.setAttribute(n,s))}return i}function Q(t,e,i,n){return J("stop",{inside:t,style:`stop-color: ${i}`,offset:e,"stop-opacity":n})}function Z(t,e="",i){let n={className:t,transform:e};return i&&(n.inside=i),J("g",n)}function tt(t,e="",i="none",n="none",s=2){return J("path",{className:e,d:t,styles:{stroke:i,fill:n,"stroke-width":s}})}function et(t,e,i=!1){let n="path-fill-gradient-"+e+"-"+(i?"lighter":"default"),s=function(t,e){return J("linearGradient",{inside:t,id:e,x1:0,x2:0,y1:0,y2:1})}(t,n),a=[1,.6,.2];return i&&(a=[.4,.2,0]),Q(s,"0%",e,a[0]),Q(s,"50%",e,a[1]),Q(s,"100%",e,a[2]),n}function it(t,e,i,n,s,a="none",o={}){let r={className:t,x:e,y:i,width:n,height:n,rx:s,fill:a};return Object.keys(o).map((t=>{r[t]=o[t]})),J("rect",r)}function nt(t,e,i,n,s={}){let a=s.fontSize||U;return J("text",{className:t,x:e,y:i,dy:(void 0!==s.dy?s.dy:a/2)+"px","font-size":a+"px",fill:s.fill||G,"text-anchor":s.textAnchor||"start",innerHTML:n})}function st(t,e,i,n,s={}){s.stroke||(s.stroke=q),s.lineType||(s.lineType=""),s.shortenNumbers&&(e=function(t){let e;if("number"==typeof t)e=t;else if("string"==typeof t&&(e=Number(t),Number.isNaN(e)))return t;let i=Math.floor(Math.log10(Math.abs(e)));if(i<=2)return e;let n=Math.floor(i/3),s=Math.pow(10,i-3*n)*+(e/Math.pow(10,i)).toFixed(1);return Math.round(100*s)/100+" "+["","K","M","B","T"][n]}(e));let a=J("line",{className:"line-horizontal "+s.className+("dashed"===s.lineType?"dashed":""),x1:i,x2:n,y1:0,y2:0,styles:{stroke:s.stroke}}),o=J("text",{x:i<n?i-4:i+4,y:0,dy:"3px","font-size":"10px","text-anchor":i<n?"end":"start",innerHTML:e+""}),r=J("g",{transform:`translate(0, ${t})`,"stroke-opacity":1});return 0!==o&&"0"!==o||(r.style.stroke="rgba(27, 31, 35, 0.6)"),r.appendChild(a),r.appendChild(o),r}function at(t,e,i,n={}){Y(t)||(t=0),n.pos||(n.pos="bottom"),n.offset||(n.offset=0),n.mode||(n.mode="span"),n.stroke||(n.stroke=q),n.className||(n.className="");let s=i+6,a="span"===n.mode?-6:i;return"tick"===n.mode&&"top"===n.pos&&(s=-6,a=0),function(t,e,i,n,s={}){s.stroke||(s.stroke=q);let a=J("line",{className:"line-vertical "+s.className,x1:0,x2:0,y1:i,y2:n,styles:{stroke:s.stroke}}),o=J("text",{x:0,y:i>n?i+4:i-4-U,dy:"10px","font-size":"10px","text-anchor":"middle",innerHTML:e+""}),r=J("g",{transform:`translate(${t}, 0)`});return r.appendChild(a),r.appendChild(o),r}(t,e,s,a,{stroke:n.stroke,className:n.className,lineType:n.lineType})}let ot={bar:t=>{let e;"rect"!==t.nodeName&&(e=t.getAttribute("transform"),t=t.childNodes[0]);let i=t.cloneNode();return i.style.fill="#000000",i.style.opacity="0.4",e&&i.setAttribute("transform",e),i},dot:t=>{let e;"circle"!==t.nodeName&&(e=t.getAttribute("transform"),t=t.childNodes[0]);let i=t.cloneNode(),n=t.getAttribute("r"),s=t.getAttribute("fill");return i.setAttribute("r",parseInt(n)+4),i.setAttribute("fill",s),i.style.opacity="0.6",e&&i.setAttribute("transform",e),i},heat_square:t=>{let e;"circle"!==t.nodeName&&(e=t.getAttribute("transform"),t=t.childNodes[0]);let i=t.cloneNode(),n=t.getAttribute("r"),s=t.getAttribute("fill");return i.setAttribute("r",parseInt(n)+4),i.setAttribute("fill",s),i.style.opacity="0.6",e&&i.setAttribute("transform",e),i}},rt={bar:(t,e)=>{let i;"rect"!==t.nodeName&&(i=t.getAttribute("transform"),t=t.childNodes[0]);let n=["x","y","width","height"];Object.values(t.attributes).filter((t=>n.includes(t.name)&&t.specified)).map((t=>{e.setAttribute(t.name,t.nodeValue)})),i&&e.setAttribute("transform",i)},dot:(t,e)=>{let i;"circle"!==t.nodeName&&(i=t.getAttribute("transform"),t=t.childNodes[0]);let n=["cx","cy"];Object.values(t.attributes).filter((t=>n.includes(t.name)&&t.specified)).map((t=>{e.setAttribute(t.name,t.nodeValue)})),i&&e.setAttribute("transform",i)},heat_square:(t,e)=>{let i;"circle"!==t.nodeName&&(i=t.getAttribute("transform"),t=t.childNodes[0]);let n=["cx","cy"];Object.values(t.attributes).filter((t=>n.includes(t.name)&&t.specified)).map((t=>{e.setAttribute(t.name,t.nodeValue)})),i&&e.setAttribute("transform",i)}};const lt=350,ht=lt,ct="easein";function dt(t,e,i,n){let s="string"==typeof e?e:e.join(", ");return[t,{transform:i.join(", ")},n,ct,"translate",{transform:s}]}function ut(t,e,i){return dt(t,[0,i],[0,e],ht)}function pt(t,e){return[t,{d:e},lt,ct]}const gt={ease:"0.25 0.1 0.25 1",linear:"0 0 1 1",easein:"0.1 0.8 0.2 1",easeout:"0 0 0.58 1",easeinout:"0.42 0 0.58 1"};function ft(t,e){t.style.transform=e,t.style.webkitTransform=e,t.style.msTransform=e,t.style.mozTransform=e,t.style.oTransform=e}function mt(t,e){let i=[],n=[];e.map((t=>{let e,s,a=t[0],o=a.parentNode;t[0]=a,[e,s]=function(t,e,i,n="linear",s,a={}){let o=t.cloneNode(!0),r=t.cloneNode(!0);for(var l in e){let c;c="transform"===l?document.createElementNS("http://www.w3.org/2000/svg","animateTransform"):document.createElementNS("http://www.w3.org/2000/svg","animate");let d=a[l]||t.getAttribute(l),u=e[l],p={attributeName:l,from:d,to:u,begin:"0s",dur:i/1e3+"s",values:d+";"+u,keySplines:gt[n],keyTimes:"0;1",calcMode:"spline",fill:"freeze"};for(var h in s&&(p.type=s),p)c.setAttribute(h,p[h]);o.appendChild(c),s?r.setAttribute(l,`translate(${u})`):r.setAttribute(l,u)}return[o,r]}(...t),i.push(s),n.push([e,o]),o&&o.replaceChild(e,a)}));let s=t.cloneNode(!0);return n.map(((t,n)=>{t[1]&&(t[1].replaceChild(i[n],t[0]),e[n][0]=i[n])})),s}class vt{constructor(t,e){if(e=H(e),this.parent="string"==typeof t?document.querySelector(t):t,!(this.parent instanceof HTMLElement))throw new Error("No `parent` element to render on was provided.");this.rawChartArgs=e,this.title=e.title||"",this.type=e.type||"",this.realData=this.prepareData(e.data),this.data=this.prepareFirstData(this.realData),this.colors=this.validateColors(e.colors,this.type),this.config={showTooltip:1,showLegend:1,isNavigable:e.isNavigable||0,animate:void 0!==e.animate?e.animate:1,truncateLegends:e.truncateLegends||1},this.measures=JSON.parse(JSON.stringify(x));let i=this.measures;this.setMeasures(e),this.title.length||(i.titleHeight=0),this.config.showLegend||(i.legendHeight=0),this.argHeight=e.height||i.baseHeight,this.state={},this.options={},this.initTimeout=700,this.config.isNavigable&&(this.overlays=[]),this.configure(e)}prepareData(t){return t}prepareFirstData(t){return t}validateColors(t,e){const i=[];return(t=(t||[]).concat(C[e])).forEach((t=>{const e=V(t);!function(t){return/(^\s*)(#)((?:[A-Fa-f0-9]{3}){1,2})$/i.test(t)||/(^\s*)(rgb|hsl)(a?)[(]\s*([\d.]+\s*%?)\s*,\s*([\d.]+\s*%?)\s*,\s*([\d.]+\s*%?)\s*(?:,\s*([\d.]+)\s*)?[)]$/i.test(t)}(e)?console.warn('"'+t+'" is not a valid color.'):i.push(e)})),i}setMeasures(){}configure(){let t=this.argHeight;this.baseHeight=t,this.height=t-k(this.measures),this.boundDrawFn=()=>this.draw(!0),window.addEventListener("resize",this.boundDrawFn),window.addEventListener("orientationchange",this.boundDrawFn)}destroy(){window.removeEventListener("resize",this.boundDrawFn),window.removeEventListener("orientationchange",this.boundDrawFn)}setup(){this.makeContainer(),this.updateWidth(),this.makeTooltip(),this.draw(!1,!0)}makeContainer(){this.parent.innerHTML="";let t={inside:this.parent,className:"chart-container"};this.independentWidth&&(t.styles={width:this.independentWidth+"px"}),this.container=_.create("div",t)}makeTooltip(){this.tip=new O({parent:this.container,colors:this.colors}),this.bindTooltip()}bindTooltip(){}draw(t=!1,e=!1){t&&null===this.parent.offsetParent||(this.updateWidth(),this.calc(t),this.makeChartArea(),this.setupComponents(),this.components.forEach((t=>t.setup(this.drawArea))),this.render(this.components,!1),e&&(this.data=this.realData,setTimeout((()=>{this.update(this.data)}),this.initTimeout)),this.renderLegend(),this.setupNavigation(e))}calc(){}updateWidth(){var t,e,i;this.baseWidth=(t=this.parent,e=window.getComputedStyle(t),i=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight),t.clientWidth-i),this.width=this.baseWidth-A(this.measures)}makeChartArea(){this.svg&&this.container.removeChild(this.svg);let t=this.measures;var e,i,n,s;this.svg=(e=this.container,i="frappe-chart chart",n=this.baseWidth,s=this.baseHeight,J("svg",{className:i,inside:e,width:n,height:s})),this.svgDefs=J("defs",{inside:this.svg}),this.title.length&&(this.titleEL=nt("title",t.margins.left,t.margins.top,this.title,{fontSize:t.titleFontSize,fill:"#666666",dy:t.titleFontSize}));let a=E(t);this.drawArea=Z(this.type+"-chart chart-draw-area",`translate(${D(t)}, ${a})`),this.config.showLegend&&(a+=this.height+t.paddings.bottom,this.legendArea=Z("chart-legend",`translate(${D(t)}, ${a})`)),this.title.length&&this.svg.appendChild(this.titleEL),this.svg.appendChild(this.drawArea),this.config.showLegend&&this.svg.appendChild(this.legendArea),this.updateTipOffset(D(t),E(t))}updateTipOffset(t,e){this.tip.offset={x:t,y:e}}setupComponents(){this.components=new Map}update(t){t||console.error("No data to update."),this.data=this.prepareData(t),this.calc(),this.render(this.components,this.config.animate),this.renderLegend()}render(t=this.components,e=!0){this.config.isNavigable&&this.overlays.map((t=>t.parentNode.removeChild(t)));let i=[];t.forEach((t=>{i=i.concat(t.update(e))})),i.length>0?(!function(t,e,i){if(0===i.length)return;let n=mt(e,i);e.parentNode==t&&(t.removeChild(e),t.appendChild(n)),setTimeout((()=>{n.parentNode==t&&(t.removeChild(n),t.appendChild(e))}),250)}(this.container,this.svg,i),setTimeout((()=>{t.forEach((t=>t.make())),this.updateNav()}),400)):(t.forEach((t=>t.make())),this.updateNav())}updateNav(){this.config.isNavigable&&(this.makeOverlay(),this.bindUnits())}renderLegend(){}setupNavigation(t=!1){this.config.isNavigable&&t&&(this.bindOverlay(),this.keyActions={13:this.onEnterKey.bind(this),37:this.onLeftArrow.bind(this),38:this.onUpArrow.bind(this),39:this.onRightArrow.bind(this),40:this.onDownArrow.bind(this)},document.addEventListener("keydown",(t=>{var e,i;e=this.container,(i=e.getBoundingClientRect()).top>=0&&i.left>=0&&i.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&i.right<=(window.innerWidth||document.documentElement.clientWidth)&&(t=t||window.event,this.keyActions[t.keyCode]&&this.keyActions[t.keyCode]())})))}makeOverlay(){}updateOverlay(){}bindOverlay(){}bindUnits(){}onLeftArrow(){}onRightArrow(){}onUpArrow(){}onDownArrow(){}onEnterKey(){}addDataPoint(){}removeDataPoint(){}getDataPoint(){}setCurrentDataPoint(){}updateDataset(){}export(){let t=function(t){let e=t.cloneNode(!0);e.classList.add("chart-container"),e.setAttribute("xmlns","http://www.w3.org/2000/svg"),e.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink");let i=_.create("style",{innerHTML:".chart-container{position:relative;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif}.chart-container .axis,.chart-container .chart-label{fill:#555b51}.chart-container .axis line,.chart-container .chart-label line{stroke:#dadada}.chart-container .dataset-units circle{stroke:#fff;stroke-width:2}.chart-container .dataset-units path{fill:none;stroke-opacity:1;stroke-width:2px}.chart-container .dataset-path{stroke-width:2px}.chart-container .path-group path{fill:none;stroke-opacity:1;stroke-width:2px}.chart-container line.dashed{stroke-dasharray:5,3}.chart-container .axis-line .specific-value{text-anchor:start}.chart-container .axis-line .y-line{text-anchor:end}.chart-container .axis-line .x-line{text-anchor:middle}.chart-container .legend-dataset-text{fill:#6c7680;font-weight:600}.graph-svg-tip{position:absolute;z-index:99999;padding:10px;font-size:12px;color:#959da5;text-align:center;background:rgba(0,0,0,.8);border-radius:3px}.graph-svg-tip ul{padding-left:0;display:flex}.graph-svg-tip ol{padding-left:0;display:flex}.graph-svg-tip ul.data-point-list li{min-width:90px;flex:1;font-weight:600}.graph-svg-tip strong{color:#dfe2e5;font-weight:600}.graph-svg-tip .svg-pointer{position:absolute;height:5px;margin:0 0 0 -5px;content:' ';border:5px solid transparent;border-top-color:rgba(0,0,0,.8)}.graph-svg-tip.comparison{padding:0;text-align:left;pointer-events:none}.graph-svg-tip.comparison .title{display:block;padding:10px;margin:0;font-weight:600;line-height:1;pointer-events:none}.graph-svg-tip.comparison ul{margin:0;white-space:nowrap;list-style:none}.graph-svg-tip.comparison li{display:inline-block;padding:5px 10px}"});e.insertBefore(i,e.firstChild);let n=_.create("div");return n.appendChild(e),n.innerHTML}(this.svg);!function(t,e){var i=document.createElement("a");i.style="display: none";var n=new Blob(e,{type:"image/svg+xml; charset=utf-8"}),s=window.URL.createObjectURL(n);i.href=s,i.download=t,document.body.appendChild(i),i.click(),setTimeout((function(){document.body.removeChild(i),window.URL.revokeObjectURL(s)}),300)}(this.title||"Chart",[t])}}class bt extends vt{constructor(t,e){super(t,e)}configure(t){super.configure(t),this.config.formatTooltipY=(t.tooltipOptions||{}).formatTooltipY,this.config.maxSlices=t.maxSlices||20,this.config.maxLegendPoints=t.maxLegendPoints||20}calc(){let t=this.state,e=this.config.maxSlices;t.sliceTotals=[];let i=this.data.labels.map(((t,e)=>{let i=0;return this.data.datasets.map((t=>{i+=t.values[e]})),[i,t]})).filter((t=>t[0]>=0)),n=i;if(i.length>e){i.sort(((t,e)=>e[0]-t[0])),n=i.slice(0,e-1);let t=i.slice(e-1),s=0;t.map((t=>{s+=t[0]})),n.push([s,"Rest"]),this.colors[e-1]="grey"}t.labels=[],n.map((e=>{t.sliceTotals.push(function(t){return Number(Math.round(t+"e4")+"e-4")}(e[0])),t.labels.push(e[1])})),t.grandTotal=t.sliceTotals.reduce(((t,e)=>t+e),0),this.center={x:this.width/2,y:this.height/2}}renderLegend(){let t=this.state;this.legendArea.textContent="",this.legendTotals=t.sliceTotals.slice(0,this.config.maxLegendPoints);let e=0,i=0;this.legendTotals.map(((n,s)=>{let a=150,o=Math.floor((this.width-A(this.measures))/a);this.legendTotals.length<o&&(a=this.width/this.legendTotals.length),e>o&&(e=0,i+=20);let r=a*e+5,l=this.config.truncateLegends?z(t.labels[s],a/10):t.labels[s],h=this.config.formatTooltipY?this.config.formatTooltipY(n):n,c=function(t,e,i,n="none",s,a=!1){s=a?z(s,15):s;let o={className:"legend-dot",cx:0,cy:0,r:i,fill:n},r=J("text",{className:"legend-dataset-text",x:0,y:0,dx:"10px",dy:U/3+"px","font-size":"12px","text-anchor":"start",fill:G,innerHTML:s}),l=J("g",{transform:`translate(${t}, ${e})`});return l.appendChild(J("circle",o)),l.appendChild(r),l}(r,i,5,this.colors[s],`${l}: ${h}`,!1);this.legendArea.appendChild(c),e++}))}}const yt=1e3,_t=["January","February","March","April","May","June","July","August","September","October","November","December"],wt=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function xt(t){let e=new Date(t);return e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),e}function Et(t){let e=t.getDate(),i=t.getMonth()+1;return[t.getFullYear(),(i>9?"":"0")+i,(e>9?"":"0")+e].join("-")}function Dt(t){return new Date(t.getTime())}function kt(t,e){let i=Tt(t);return Math.ceil(function(t,e){let i=864e5;return(xt(e)-xt(t))/i}(i,e)/7)}function At(t,e){return t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()}function St(t,e=!1){let i=_t[t];return e?i.slice(0,3):i}function Mt(t,e){return new Date(e,t+1,0)}function Tt(t){let e=Dt(t);const i=e.getDay();return 0!==i&&Ct(e,-1*i),e}function Ct(t,e){t.setDate(t.getDate()+e)}class $t{constructor({layerClass:t="",layerTransform:e="",constants:i,getData:n,makeElements:s,animateElements:a}){this.layerTransform=e,this.constants=i,this.makeElements=s,this.getData=n,this.animateElements=a,this.store=[],this.labels=[],this.layerClass=t,this.layerClass="function"==typeof this.layerClass?this.layerClass():this.layerClass,this.refresh()}refresh(t){this.data=t||this.getData()}setup(t){this.layer=Z(this.layerClass,this.layerTransform,t)}make(){this.render(this.data),this.oldData=this.data}render(t){this.store=this.makeElements(t),this.layer.textContent="",this.store.forEach((t=>{this.layer.appendChild(t)})),this.labels.forEach((t=>{this.layer.appendChild(t)}))}update(t=!0){this.refresh();let e=[];return t&&(e=this.animateElements(this.data)||[]),e}}let Ot={donutSlices:{layerClass:"donut-slices",makeElements:t=>t.sliceStrings.map(((e,i)=>{let n=tt(e,"donut-path",t.colors[i],"none",t.strokeWidth);return n.style.transition="transform .3s;",n})),animateElements(t){return this.store.map(((e,i)=>pt(e,t.sliceStrings[i])))}},pieSlices:{layerClass:"pie-slices",makeElements:t=>t.sliceStrings.map(((e,i)=>{let n=tt(e,"pie-path","none",t.colors[i]);return n.style.transition="transform .3s;",n})),animateElements(t){return this.store.map(((e,i)=>pt(e,t.sliceStrings[i])))}},percentageBars:{layerClass:"percentage-bars",makeElements(t){return t.xPositions.map(((e,i)=>function(t,e,i,n,s=2,a="none"){return J("rect",{className:"percentage-bar",x:t,y:e,width:i,height:n,fill:a,styles:{stroke:X(a,-25),"stroke-dasharray":`0, ${n+i}, ${i}, ${n}`,"stroke-width":s}})}(e,0,t.widths[i],this.constants.barHeight,this.constants.barDepth,t.colors[i])))},animateElements(t){if(t)return[]}},yAxis:{layerClass:"y axis",makeElements(t){return t.positions.map(((e,i)=>function(t,e,i,n={}){Y(t)||(t=0),n.pos||(n.pos="left"),n.offset||(n.offset=0),n.mode||(n.mode="span"),n.stroke||(n.stroke=q),n.className||(n.className="");let s=-6,a="span"===n.mode?i+6:0;return"tick"===n.mode&&"right"===n.pos&&(s=i+6,a=i),s+=n.offset,a+=n.offset,st(t,e,s,a,{stroke:n.stroke,className:n.className,lineType:n.lineType,shortenNumbers:n.shortenNumbers})}(e,t.labels[i],this.constants.width,{mode:this.constants.mode,pos:this.constants.pos,shortenNumbers:this.constants.shortenNumbers})))},animateElements(t){let e=t.positions,i=t.labels,n=this.oldData.positions,s=this.oldData.labels;return[n,e]=F(n,e),[s,i]=F(s,i),this.render({positions:n,labels:i}),this.store.map(((t,i)=>ut(t,e[i],n[i])))}},xAxis:{layerClass:"x axis",makeElements(t){return t.positions.map(((e,i)=>at(e,t.calcLabels[i],this.constants.height,{mode:this.constants.mode,pos:this.constants.pos})))},animateElements(t){let e=t.positions,i=t.calcLabels,n=this.oldData.positions,s=this.oldData.calcLabels;return[n,e]=F(n,e),[s,i]=F(s,i),this.render({positions:n,calcLabels:i}),this.store.map(((t,i)=>function(t,e,i){return dt(t,[i,0],[e,0],ht)}(t,e[i],n[i])))}},yMarkers:{layerClass:"y-markers",makeElements(t){return t.map((t=>function(t,e,i,n={}){n.labelPos||(n.labelPos="right");let s=J("text",{className:"chart-label",x:"left"===n.labelPos?4:i-L(e,5)-4,y:0,dy:"-5px","font-size":"10px","text-anchor":"start",innerHTML:e+""}),a=st(t,"",0,i,{stroke:n.stroke||q,className:n.className||"",lineType:n.lineType});return a.appendChild(s),a}(t.position,t.label,this.constants.width,{labelPos:t.options.labelPos,mode:"span",lineType:"dashed"})))},animateElements(t){[this.oldData,t]=F(this.oldData,t);let e=t.map((t=>t.position)),i=t.map((t=>t.label)),n=t.map((t=>t.options)),s=this.oldData.map((t=>t.position));return this.render(s.map(((t,e)=>({position:s[e],label:i[e],options:n[e]})))),this.store.map(((t,i)=>ut(t,e[i],s[i])))}},yRegions:{layerClass:"y-regions",makeElements(t){return t.map((t=>function(t,e,i,n,s={}){let a=t-e,o=J("rect",{className:"bar mini",styles:{fill:"rgba(228, 234, 239, 0.49)",stroke:q,"stroke-dasharray":`${i}, ${a}`},x:0,y:0,width:i,height:a});s.labelPos||(s.labelPos="right");let r=J("text",{className:"chart-label",x:"left"===s.labelPos?4:i-L(n+"",4.5)-4,y:0,dy:"-5px","font-size":"10px","text-anchor":"start",innerHTML:n+""}),l=J("g",{transform:`translate(0, ${e})`});return l.appendChild(o),l.appendChild(r),l}(t.startPos,t.endPos,this.constants.width,t.label,{labelPos:t.options.labelPos})))},animateElements(t){[this.oldData,t]=F(this.oldData,t);let e=t.map((t=>t.endPos)),i=t.map((t=>t.label)),n=t.map((t=>t.startPos)),s=t.map((t=>t.options)),a=this.oldData.map((t=>t.endPos)),o=this.oldData.map((t=>t.startPos));this.render(a.map(((t,e)=>({startPos:o[e],endPos:a[e],label:i[e],options:s[e]}))));let r=[];return this.store.map(((t,i)=>{r=r.concat(function(t,e,i,n){let s=e-i,a=t.childNodes[0],o=a.getAttribute("width");return[[a,{height:s,"stroke-dasharray":`${o}, ${s}`},ht,ct],dt(t,[0,n],[0,i],ht)]}(t,n[i],e[i],a[i]))})),r}},heatDomain:{layerClass:function(){return"heat-domain domain-"+this.constants.index},makeElements(t){let{index:e,colWidth:i,rowHeight:n,squareSize:s,radius:a,xTranslate:o}=this.constants,r=o,l=0;return this.serializedSubDomains=[],t.cols.map(((t,o)=>{1===o&&this.labels.push(nt("domain-name",r,-12,St(e,!0).toUpperCase(),{fontSize:9})),t.map(((t,e)=>{if(t.fill){let i={"data-date":t.yyyyMmDd,"data-value":t.dataValue,"data-day":e},n=it("day",r,l,s,a,t.fill,i);this.serializedSubDomains.push(n)}l+=n})),l=0,r+=i})),this.serializedSubDomains},animateElements(t){if(t)return[]}},barGraph:{layerClass:function(){return"dataset-units dataset-bars dataset-"+this.constants.index},makeElements(t){let e=this.constants;return this.unitType="bar",this.units=t.yPositions.map(((i,n)=>function(t,e,i,n,s="",a=0,o=0,r={}){let[l,h]=R(e,r.zeroLine);h-=o,0===l&&(l=r.minHeight,h-=r.minHeight),Y(t)||(t=0),Y(h)||(h=0),Y(l,!0)||(l=0),Y(i,!0)||(i=0);let c=J("rect",{className:"bar mini",style:`fill: ${n}`,"data-point-index":a,x:t,y:h,width:i,height:l});if((s+="")||s.length){c.setAttribute("y",0),c.setAttribute("x",0);let e=J("text",{className:"data-point-value",x:i/2,y:0,dy:"-5px","font-size":"10px","text-anchor":"middle",innerHTML:s}),n=J("g",{"data-point-index":a,transform:`translate(${t}, ${h})`});return n.appendChild(c),n.appendChild(e),n}return c}(t.xPositions[n],i,t.barWidth,e.color,t.labels[n],n,t.offsets[n],{zeroLine:t.zeroLine,barsWidth:t.barsWidth,minHeight:e.minHeight}))),this.units},animateElements(t){let e=t.xPositions,i=t.yPositions,n=t.offsets,s=t.labels,a=this.oldData.xPositions,o=this.oldData.yPositions,r=this.oldData.offsets,l=this.oldData.labels;[a,e]=F(a,e),[o,i]=F(o,i),[r,n]=F(r,n),[l,s]=F(l,s),this.render({xPositions:a,yPositions:o,offsets:r,labels:s,zeroLine:this.oldData.zeroLine,barsWidth:this.oldData.barsWidth,barWidth:this.oldData.barWidth});let h=[];return this.store.map(((s,a)=>{h=h.concat(function(t,e,i,n,s=0,a={}){let[o,r]=R(i,a.zeroLine);if(r-=s,"rect"!==t.nodeName){let i=[t.childNodes[0],{width:n,height:o},lt,ct],s=t.getAttribute("transform").split("(")[1].slice(0,-1);return[i,dt(t,s,[e,r],ht)]}return[[t,{width:n,height:o,x:e,y:r},lt,ct]]}(s,e[a],i[a],t.barWidth,n[a],{zeroLine:t.zeroLine}))})),h}},lineGraph:{layerClass:function(){return"dataset-units dataset-line dataset-"+this.constants.index},makeElements(t){let e=this.constants;return this.unitType="dot",this.paths={},e.hideLine||(this.paths=function(t,e,i,n={},s={}){let a=e.map(((e,i)=>t[i]+","+e)).join("L");n.spline&&(a=W(t,e));let o=tt("M"+a,"line-graph-path",i);if(n.heatline){let t=et(s.svgDefs,i);o.style.stroke=`url(#${t})`}let r={path:o};if(n.regionFill){let e=et(s.svgDefs,i,!0),n=`M${t[0]},${s.zeroLine}L`+a+`L${t.slice(-1)[0]},${s.zeroLine}`;r.region=tt(n,"region-fill","none",`url(#${e})`)}return r}(t.xPositions,t.yPositions,e.color,{heatline:e.heatline,regionFill:e.regionFill,spline:e.spline},{svgDefs:e.svgDefs,zeroLine:t.zeroLine})),this.units=[],e.hideDots||(this.units=t.yPositions.map(((i,n)=>function(t,e,i,n,s="",a=0){let o=J("circle",{style:`fill: ${n}`,"data-point-index":a,cx:t,cy:e,r:i});if((s+="")||s.length){o.setAttribute("cy",0),o.setAttribute("cx",0);let n=J("text",{className:"data-point-value",x:0,y:0,dy:-5-i+"px","font-size":"10px","text-anchor":"middle",innerHTML:s}),r=J("g",{"data-point-index":a,transform:`translate(${t}, ${e})`});return r.appendChild(o),r.appendChild(n),r}return o}(t.xPositions[n],i,t.radius,e.color,e.valuesOverPoints?t.values[n]:"",n)))),Object.values(this.paths).concat(this.units)},animateElements(t){let e=t.xPositions,i=t.yPositions,n=t.values,s=this.oldData.xPositions,a=this.oldData.yPositions,o=this.oldData.values;[s,e]=F(s,e),[a,i]=F(a,i),[o,n]=F(o,n),this.render({xPositions:s,yPositions:a,values:n,zeroLine:this.oldData.zeroLine,radius:this.oldData.radius});let r=[];return Object.keys(this.paths).length&&(r=r.concat(function(t,e,i,n,s){let a=[],o=i.map(((t,i)=>e[i]+","+t)).join("L");s&&(o=W(e,i));const r=[t.path,{d:"M"+o},350,ct];if(a.push(r),t.region){let i=`${e[0]},${n}L`,s=`L${e.slice(-1)[0]}, ${n}`;const r=[t.region,{d:"M"+i+o+s},350,ct];a.push(r)}return a}(this.paths,e,i,t.zeroLine,this.constants.spline))),this.units.length&&this.units.map(((t,n)=>{r=r.concat(function(t,e,i){if("circle"!==t.nodeName){let n=t.getAttribute("transform").split("(")[1].slice(0,-1);return[dt(t,n,[e,i],ht)]}return[[t,{cx:e,cy:i},lt,ct]]}(t,e[n],i[n]))})),r}}};function Pt(t,e,i){let n=Object.keys(Ot).filter((e=>t.includes(e))),s=Ot[n[0]];return Object.assign(s,{constants:e,getData:i}),new $t(s)}function Nt(t){if(0===t)return[0,0];if(isNaN(t))return{mantissa:-6755399441055744,exponent:972};var e=t>0?1:-1;if(!isFinite(t))return{mantissa:4503599627370496*e,exponent:972};t=Math.abs(t);var i=Math.floor(Math.log10(t));return[e*(t/Math.pow(10,i)),i]}function Lt(t,e=0){let[i,n]=Nt(t),s=e?e/Math.pow(10,n):0;i=i.toFixed(6);let a=function(t,e=0){let i=Math.ceil(t),n=Math.floor(e),s=i-n,a=s,o=1;s>5&&(s%2!=0&&(i++,s=i-n),a=s/2,o=2),s<=2&&(a=4,o=s/a),0===s&&(a=5,o=1);let r=[];for(var l=0;l<=a;l++)r.push(n+o*l);return r}(i,s);return a=a.map((t=>t*Math.pow(10,n))),a}function It(t){return t[1]-t[0]}function Yt(t,e){return P(e.zeroLine-t*e.scaleMultiplier)}const Ht=12,Rt=Ht;class Ft extends vt{constructor(t,e){super(t,e),this.barOptions=e.barOptions||{},this.lineOptions=e.lineOptions||{},this.type=e.type||"line",this.init=1,this.setup()}setMeasures(){this.data.datasets.length<=1&&(this.config.showLegend=0,this.measures.paddings.bottom=30)}configure(t){super.configure(t),t.axisOptions=t.axisOptions||{},t.tooltipOptions=t.tooltipOptions||{},this.config.xAxisMode=t.axisOptions.xAxisMode||"span",this.config.yAxisMode=t.axisOptions.yAxisMode||"span",this.config.xIsSeries=t.axisOptions.xIsSeries||0,this.config.shortenYAxisNumbers=t.axisOptions.shortenYAxisNumbers||0,this.config.formatTooltipX=t.tooltipOptions.formatTooltipX,this.config.formatTooltipY=t.tooltipOptions.formatTooltipY,this.config.valuesOverPoints=t.valuesOverPoints}prepareData(t=this.data){return function(t,e){t.labels=t.labels||[];let i=t.labels.length,n=t.datasets,s=new Array(i).fill(0);return n||(n=[{values:s}]),n.map((t=>{if(t.values){let e=t.values;e=e.map((t=>isNaN(t)?0:t)),e=e.length>i?e.slice(0,i):N(e,i-e.length,0)}else t.values=s;t.chartType||(S.includes(e),t.chartType=e)})),t.yRegions&&t.yRegions.map((t=>{t.end<t.start&&([t.start,t.end]=[t.end,t.start])})),t}(t,this.type)}prepareFirstData(t=this.data){return function(t){let e=t.labels.length,i=new Array(e).fill(0),n={labels:t.labels.slice(0,-1),datasets:t.datasets.map((t=>({name:"",values:i.slice(0,-1),chartType:t.chartType})))};return t.yMarkers&&(n.yMarkers=[{value:0,label:""}]),t.yRegions&&(n.yRegions=[{start:0,end:0,label:""}]),n}(t)}calc(t=!1){this.calcXPositions(),t||this.calcYAxisParameters(this.getAllYValues(),"line"===this.type),this.makeDataByIndex()}calcXPositions(){let t=this.state,e=this.data.labels;t.datasetLength=e.length,t.unitWidth=this.width/t.datasetLength,t.xOffset=t.unitWidth/2,t.xAxis={labels:e,positions:e.map(((e,i)=>P(t.xOffset+i*t.unitWidth)))}}calcYAxisParameters(t,e="false"){const i=function(t,e=!1){let i=Math.max(...t),n=Math.min(...t),s=0,a=[];function o(t,e){let i=Lt(t),n=i[1]-i[0],s=0;for(var a=1;s<e;a++)s+=n,i.unshift(-1*s);return i}if(i>=0&&n>=0)s=Nt(i)[1],a=e?Lt(i,n):Lt(i);else if(i>0&&n<0){let t=Math.abs(n);i>=t?(s=Nt(i)[1],a=o(i,t)):(s=Nt(t)[1],a=o(t,i).reverse().map((t=>-1*t)))}else if(i<=0&&n<=0){let t=Math.abs(n),o=Math.abs(i);s=Nt(t)[1],a=e?Lt(t,o):Lt(t),a=a.reverse().map((t=>-1*t))}return a}(t,e),n=this.height/((s=i)[s.length-1]-s[0]);var s;const a=It(i)*n,o=this.height-function(t){let e,i=It(t);e=t.indexOf(0)>=0?t.indexOf(0):t[0]>0?-1*t[0]/i:-1*t[t.length-1]/i+(t.length-1);return e}(i)*a;this.state.yAxis={labels:i,positions:i.map((t=>o-t*n)),scaleMultiplier:n,zeroLine:o},this.calcDatasetPoints(),this.calcYExtremes(),this.calcYRegions()}calcDatasetPoints(){let t=this.state,e=e=>e.map((e=>Yt(e,t.yAxis)));t.datasets=this.data.datasets.map(((t,i)=>{let n=t.values,s=t.cumulativeYs||[];return{name:t.name&&t.name.replace(/<|>|&/g,(t=>"&"==t?"&amp;":"<"==t?"&lt;":"&gt;")),index:i,chartType:t.chartType,values:n,yPositions:e(n),cumulativeYs:s,cumulativeYPos:e(s)}}))}calcYExtremes(){let t=this.state;this.barOptions.stacked?t.yExtremes=t.datasets[t.datasets.length-1].cumulativeYPos:(t.yExtremes=new Array(t.datasetLength).fill(9999),t.datasets.map((e=>{e.yPositions.map(((e,i)=>{e<t.yExtremes[i]&&(t.yExtremes[i]=e)}))})))}calcYRegions(){let t=this.state;this.data.yMarkers&&(this.state.yMarkers=this.data.yMarkers.map((e=>(e.position=Yt(e.value,t.yAxis),e.options||(e.options={}),e)))),this.data.yRegions&&(this.state.yRegions=this.data.yRegions.map((e=>(e.startPos=Yt(e.start,t.yAxis),e.endPos=Yt(e.end,t.yAxis),e.options||(e.options={}),e))))}getAllYValues(){let t="values";if(this.barOptions.stacked){t="cumulativeYs";let e=new Array(this.state.datasetLength).fill(0);this.data.datasets.map(((i,n)=>{let s=this.data.datasets[n].values;i[t]=e=e.map(((t,e)=>t+s[e]))}))}let e=this.data.datasets.map((e=>e[t]));return this.data.yMarkers&&e.push(this.data.yMarkers.map((t=>t.value))),this.data.yRegions&&this.data.yRegions.map((t=>{e.push([t.end,t.start])})),[].concat(...e)}setupComponents(){let t=[["yAxis",{mode:this.config.yAxisMode,width:this.width,shortenNumbers:this.config.shortenYAxisNumbers},function(){return this.state.yAxis}.bind(this)],["xAxis",{mode:this.config.xAxisMode,height:this.height},function(){let t=this.state;return t.xAxis.calcLabels=function(t,e=[],i=!0){let n=t/e.length;n<=0&&(n=1);let s,a=n/7;if(i){let t=Math.max(...e.map((t=>t.length)));s=Math.ceil(t/a)}return e.map(((t,e)=>((t+="").length>a&&(i?e%s!=0&&(t=""):t=a-3>0?t.slice(0,a-3)+" ...":t.slice(0,a)+".."),t)))}(this.width,t.xAxis.labels,this.config.xIsSeries),t.xAxis}.bind(this)],["yRegions",{width:this.width,pos:"right"},function(){return this.state.yRegions}.bind(this)]],e=this.state.datasets.filter((t=>"bar"===t.chartType)),i=this.state.datasets.filter((t=>"line"===t.chartType)),n=e.map((t=>{let i=t.index;return["barGraph-"+t.index,{index:i,color:this.colors[i],stacked:this.barOptions.stacked,valuesOverPoints:this.config.valuesOverPoints,minHeight:0*this.height},function(){let t=this.state,n=t.datasets[i],s=this.barOptions.stacked,a=this.barOptions.spaceRatio||.5,o=t.unitWidth*(1-a),r=o/(s?1:e.length),l=t.xAxis.positions.map((t=>t-o/2));s||(l=l.map((t=>t+r*i)));let h=new Array(t.datasetLength).fill("");this.config.valuesOverPoints&&(h=s&&n.index===t.datasets.length-1?n.cumulativeYs:n.values);let c=new Array(t.datasetLength).fill(0);return s&&(c=n.yPositions.map(((t,e)=>t-n.cumulativeYPos[e]))),{xPositions:l,yPositions:n.yPositions,offsets:c,labels:h,zeroLine:t.yAxis.zeroLine,barsWidth:o,barWidth:r}}.bind(this)]})),s=i.map((t=>{let e=t.index;return["lineGraph-"+t.index,{index:e,color:this.colors[e],svgDefs:this.svgDefs,heatline:this.lineOptions.heatline,regionFill:this.lineOptions.regionFill,spline:this.lineOptions.spline,hideDots:this.lineOptions.hideDots,hideLine:this.lineOptions.hideLine,valuesOverPoints:this.config.valuesOverPoints},function(){let t=this.state,i=t.datasets[e],n=t.yAxis.positions[0]<t.yAxis.zeroLine?t.yAxis.positions[0]:t.yAxis.zeroLine;return{xPositions:t.xAxis.positions,yPositions:i.yPositions,values:i.values,zeroLine:n,radius:this.lineOptions.dotSize||4}}.bind(this)]})),a=[["yMarkers",{width:this.width,pos:"right"},function(){return this.state.yMarkers}.bind(this)]];t=t.concat(n,s,a);let o=["yMarkers","yRegions"];this.dataUnitComponents=[],this.components=new Map(t.filter((t=>!o.includes(t[0])||this.state[t[0]])).map((t=>{let e=Pt(...t);return(t[0].includes("lineGraph")||t[0].includes("barGraph"))&&this.dataUnitComponents.push(e),[t[0],e]})))}makeDataByIndex(){this.dataByIndex={};let t=this.state,e=this.config.formatTooltipX,i=this.config.formatTooltipY;t.xAxis.labels.map(((n,s)=>{let a=this.state.datasets.map(((t,e)=>{let n=t.values[s];return{title:t.name,value:n,yPos:t.yPositions[s],color:this.colors[e],formatted:i?i(n):n}}));this.dataByIndex[s]={label:n,formattedLabel:e?e(n):n,xPos:t.xAxis.positions[s],values:a,yExtreme:t.yExtremes[s]}}))}bindTooltip(){this.container.addEventListener("mousemove",(t=>{let e=this.measures,i=w(this.container),n=t.pageX-i.left-D(e),s=t.pageY-i.top;s<this.height+E(e)&&s>E(e)?this.mapTooltipXPosition(n):this.tip.hideTip()}))}mapTooltipXPosition(t){let e=this.state;if(!e.yExtremes)return;let i=function(t,e,i=!1){let n=e.reduce((function(e,i){return Math.abs(i-t)<Math.abs(e-t)?i:e}),[]);return i?e.indexOf(n):n}(t,e.xAxis.positions,!0);if(i>=0){let t=this.dataByIndex[i];this.tip.setValues(t.xPos+this.tip.offset.x,t.yExtreme+this.tip.offset.y,{name:t.formattedLabel,value:""},t.values,i),this.tip.showTip()}}renderLegend(){let t=this.data;t.datasets.length>1&&(this.legendArea.textContent="",t.datasets.map(((t,e)=>{let i=function(t,e,i,n="none",s,a=!1){s=a?z(s,15):s;let o={className:"legend-bar",x:0,y:0,width:i,height:"2px",fill:n},r=J("text",{className:"legend-dataset-text",x:0,y:0,dy:"20px","font-size":"12px","text-anchor":"start",fill:G,innerHTML:s}),l=J("g",{transform:`translate(${t}, ${e})`});return l.appendChild(J("rect",o)),l.appendChild(r),l}(100*e,"0",100,this.colors[e],t.name,this.config.truncateLegends);this.legendArea.appendChild(i)})))}makeOverlay(){this.init?this.init=0:(this.overlayGuides&&this.overlayGuides.forEach((t=>{let e=t.overlay;e.parentNode.removeChild(e)})),this.overlayGuides=this.dataUnitComponents.map((t=>({type:t.unitType,overlay:void 0,units:t.units}))),void 0===this.state.currentIndex&&(this.state.currentIndex=this.state.datasetLength-1),this.overlayGuides.map((t=>{let e=t.units[this.state.currentIndex];t.overlay=ot[t.type](e),this.drawArea.appendChild(t.overlay)})))}updateOverlayGuides(){this.overlayGuides&&this.overlayGuides.forEach((t=>{let e=t.overlay;e.parentNode.removeChild(e)}))}bindOverlay(){this.parent.addEventListener("data-select",(()=>{this.updateOverlay()}))}bindUnits(){this.dataUnitComponents.map((t=>{t.units.map((t=>{t.addEventListener("click",(()=>{let e=t.getAttribute("data-point-index");this.setCurrentDataPoint(e)}))}))})),this.tip.container.addEventListener("click",(()=>{let t=this.tip.container.getAttribute("data-point-index");this.setCurrentDataPoint(t)}))}updateOverlay(){this.overlayGuides.map((t=>{let e=t.units[this.state.currentIndex];rt[t.type](e,t.overlay)}))}onLeftArrow(){this.setCurrentDataPoint(this.state.currentIndex-1)}onRightArrow(){this.setCurrentDataPoint(this.state.currentIndex+1)}getDataPoint(t=this.state.currentIndex){let e=this.state;return{index:t,label:e.xAxis.labels[t],values:e.datasets.map((e=>e.values[t]))}}setCurrentDataPoint(t){let e=this.state;(t=parseInt(t))<0&&(t=0),t>=e.xAxis.labels.length&&(t=e.xAxis.labels.length-1),t!==e.currentIndex&&(e.currentIndex=t,function(t,e,i){var n=document.createEvent("HTMLEvents");for(var s in n.initEvent(e,!0,!0),i)n[s]=i[s];t.dispatchEvent(n)}(this.parent,"data-select",this.getDataPoint()))}addDataPoint(t,e,i=this.state.datasetLength){super.addDataPoint(t,e,i),this.data.labels.splice(i,0,t),this.data.datasets.map(((t,n)=>{t.values.splice(i,0,e[n])})),this.update(this.data)}removeDataPoint(t=this.state.datasetLength-1){this.data.labels.length<=1||(super.removeDataPoint(t),this.data.labels.splice(t,1),this.data.datasets.map((e=>{e.values.splice(t,1)})),this.update(this.data))}updateDataset(t,e=0){this.data.datasets[e].values=t,this.update(this.data)}updateDatasets(t){this.data.datasets.map(((e,i)=>{t[i]&&(e.values=t[i])})),this.update(this.data)}}const zt={bar:Ft,line:Ft,percentage:class extends bt{constructor(t,e){super(t,e),this.type="percentage",this.setup()}setMeasures(t){let e=this.measures;this.barOptions=t.barOptions||{};let i=this.barOptions;i.height=i.height||20,i.depth=i.depth||2,e.paddings.right=30,e.legendHeight=60,e.baseHeight=8*(i.height+.5*i.depth)}setupComponents(){let t=this.state,e=[["percentageBars",{barHeight:this.barOptions.height,barDepth:this.barOptions.depth},function(){return{xPositions:t.xPositions,widths:t.widths,colors:this.colors}}.bind(this)]];this.components=new Map(e.map((t=>{let e=Pt(...t);return[t[0],e]})))}calc(){super.calc();let t=this.state;t.xPositions=[],t.widths=[];let e=0;t.sliceTotals.map((i=>{let n=this.width*i/t.grandTotal;t.widths.push(n),t.xPositions.push(e),e+=n}))}makeDataByIndex(){}bindTooltip(){let t=this.state;this.container.addEventListener("mousemove",(e=>{let i=this.components.get("percentageBars").store,n=e.target;if(i.includes(n)){let e=i.indexOf(n),s=w(this.container),a=w(n),o=a.left-s.left+parseInt(n.getAttribute("width"))/2,r=a.top-s.top,l=(this.formattedLabels&&this.formattedLabels.length>0?this.formattedLabels[e]:this.state.labels[e])+": ",h=t.sliceTotals[e]/t.grandTotal;this.tip.setValues(o,r,{name:l,value:(100*h).toFixed(1)+"%"}),this.tip.showTip()}}))}},heatmap:class extends vt{constructor(t,e){super(t,e),this.type="heatmap",this.countLabel=e.countLabel||"";let i=["Sunday","Monday"],n=i.includes(e.startSubDomain)?e.startSubDomain:"Sunday";this.startSubDomainIndex=i.indexOf(n),this.setup()}setMeasures(t){let e=this.measures;this.discreteDomains=0===t.discreteDomains?0:1,e.paddings.top=36,e.paddings.bottom=0,e.legendHeight=24,e.baseHeight=84+k(e);let i=this.data,n=this.discreteDomains?12:0;this.independentWidth=(kt(i.start,i.end)+n)*Ht+A(e)}updateWidth(){let t=this.discreteDomains?12:0,e=this.state.noOfWeeks?this.state.noOfWeeks:52;this.baseWidth=(e+t)*Ht+A(this.measures)}prepareData(t=this.data){if(t.start&&t.end&&t.start>t.end)throw new Error("Start date cannot be greater than end date.");if(t.start||(t.start=new Date,t.start.setFullYear(t.start.getFullYear()-1)),t.end||(t.end=new Date),t.dataPoints=t.dataPoints||{},parseInt(Object.keys(t.dataPoints)[0])>1e5){let e={};Object.keys(t.dataPoints).forEach((i=>{let n=new Date(i*yt);e[Et(n)]=t.dataPoints[i]})),t.dataPoints=e}return t}calc(){let t=this.state;t.start=Dt(this.data.start),t.end=Dt(this.data.end),t.firstWeekStart=Dt(t.start),t.noOfWeeks=kt(t.start,t.end),t.distribution=function(t,e){let i=Math.max(...t),n=1/(e-1),s=[];for(var a=0;a<e;a++){let t=i*(n*a);s.push(t)}return s}(Object.values(this.data.dataPoints),5),t.domainConfigs=this.getDomains()}setupComponents(){let t=this.state,e=this.discreteDomains?0:1,i=t.domainConfigs.map(((i,n)=>["heatDomain",{index:i.index,colWidth:Ht,rowHeight:Rt,squareSize:M,radius:this.rawChartArgs.radius||0,xTranslate:t.domainConfigs.filter(((t,e)=>e<n)).map((t=>t.cols.length-e)).reduce(((t,e)=>t+e),0)*Ht},function(){return t.domainConfigs[n]}.bind(this)]));this.components=new Map(i.map(((t,e)=>{let i=Pt(...t);return[t[0]+"-"+e,i]})));let n=0;wt.forEach(((t,e)=>{if([1,3,5].includes(e)){let e=nt("subdomain-name",-6,n,t,{fontSize:M,dy:8,textAnchor:"end"});this.drawArea.appendChild(e)}n+=Rt}))}update(t){t||console.error("No data to update."),this.data=this.prepareData(t),this.draw(),this.bindTooltip()}bindTooltip(){this.container.addEventListener("mousemove",(t=>{this.components.forEach((e=>{let i=e.store,n=t.target;if(i.includes(n)){let e=n.getAttribute("data-value"),i=n.getAttribute("data-date").split("-"),s=St(parseInt(i[1])-1,!0),a=this.container.getBoundingClientRect(),o=n.getBoundingClientRect(),r=parseInt(t.target.getAttribute("width")),l=o.left-a.left+r/2,h=o.top-a.top,c=e+" "+this.countLabel,d=" on "+s+" "+i[0]+", "+i[2];this.tip.setValues(l,h,{name:d,value:c,valueFirst:1},[]),this.tip.showTip()}}))}))}renderLegend(){this.legendArea.textContent="";let t=0,e=this.rawChartArgs.radius||0,i=nt("subdomain-name",t,12,"Less",{fontSize:11,dy:9});t=30,this.legendArea.appendChild(i),this.colors.slice(0,5).map(((i,n)=>{const s=it("heatmap-legend-unit",t+15*n,12,M,e,i);this.legendArea.appendChild(s)}));let n=nt("subdomain-name",t+75+3,12,"More",{fontSize:11,dy:9});this.legendArea.appendChild(n)}getDomains(){let t=this.state;const[e,i]=[t.start.getMonth(),t.start.getFullYear()],[n,s]=[t.end.getMonth(),t.end.getFullYear()],a=n-e+1+12*(s-i);let o=[],r=Dt(t.start);for(var l=0;l<a;l++){let e=t.end;if(!At(r,t.end)){let[t,i]=[r.getMonth(),r.getFullYear()];e=Mt(t,i)}o.push(this.getDomainConfig(r,e)),Ct(e,1),r=e}return o}getDomainConfig(t,e=""){let[i,n]=[t.getMonth(),t.getFullYear()],s=Tt(t),a={index:i,cols:[]};Ct(e=Dt(e)||Mt(i,n),1);let o,r=kt(s,e),l=[];for(var h=0;h<r;h++)o=this.getCol(s,i),l.push(o),s=new Date(o[6].yyyyMmDd),Ct(s,1);return void 0!==o[6].dataValue&&(Ct(s,1),l.push(this.getCol(s,i,!0))),a.cols=l,a}getCol(t,e,i=!1){let n=this.state,s=Dt(t),a=[];for(var o=0;o<7;o++,Ct(s,1)){let t={},o=s>=n.start&&s<=n.end;i||s.getMonth()!==e||!o?t.yyyyMmDd=Et(s):t=this.getSubDomainConfig(s),a.push(t)}return a}getSubDomainConfig(t){let e=Et(t),i=this.data.dataPoints[e];var n,s;return{yyyyMmDd:e,dataValue:i||0,fill:this.colors[(n=i,s=this.state.distribution,s.filter((t=>t<n)).length)]}}},pie:class extends bt{constructor(t,e){super(t,e),this.type="pie",this.initTimeout=0,this.init=1,this.setup()}configure(t){super.configure(t),this.mouseMove=this.mouseMove.bind(this),this.mouseLeave=this.mouseLeave.bind(this),this.hoverRadio=t.hoverRadio||.1,this.config.startAngle=t.startAngle||0,this.clockWise=t.clockWise||!1}calc(){super.calc();let t=this.state;this.radius=this.height>this.width?this.center.x:this.center.y;const{radius:e,clockWise:i}=this,n=t.slicesProperties||[];t.sliceStrings=[],t.slicesProperties=[];let s=180-this.config.startAngle;t.sliceTotals.map(((a,o)=>{const r=s,l=a/t.grandTotal*360,h=l>180?1:0,c=i?-l:l,d=s+=c,u=I(r,e),p=I(d,e),g=this.init&&n[o];let f,m;this.init?(f=g?g.startPosition:u,m=g?g.endPosition:u):(f=u,m=p);const v=360===l?function(t,e,i,n,s=1,a=0){let[o,r]=[i.x+t.x,i.y+t.y],[l,h,c]=[i.x+e.x,2*i.y,i.y+e.y];return`M${i.x} ${i.y}\n\t\tL${o} ${r}\n\t\tA ${n} ${n} 0 ${a} ${s?1:0}\n\t\t${l} ${h} z\n\t\tL${o} ${h}\n\t\tA ${n} ${n} 0 ${a} ${s?1:0}\n\t\t${l} ${c} z`}(f,m,this.center,this.radius,i,h):function(t,e,i,n,s=1,a=0){let[o,r]=[i.x+t.x,i.y+t.y],[l,h]=[i.x+e.x,i.y+e.y];return`M${i.x} ${i.y}\n\t\tL${o} ${r}\n\t\tA ${n} ${n} 0 ${a} ${s?1:0}\n\t\t${l} ${h} z`}(f,m,this.center,this.radius,i,h);t.sliceStrings.push(v),t.slicesProperties.push({startPosition:u,endPosition:p,value:a,total:t.grandTotal,startAngle:r,endAngle:d,angle:c})})),this.init=0}setupComponents(){let t=this.state,e=[["pieSlices",{},function(){return{sliceStrings:t.sliceStrings,colors:this.colors}}.bind(this)]];this.components=new Map(e.map((t=>{let e=Pt(...t);return[t[0],e]})))}calTranslateByAngle(t){const{radius:e,hoverRadio:i}=this,n=I(t.startAngle+t.angle/2,e);return`translate3d(${n.x*i}px,${n.y*i}px,0)`}hoverSlice(t,e,i,n){if(!t)return;const s=this.colors[e];if(i){ft(t,this.calTranslateByAngle(this.state.slicesProperties[e])),t.style.fill=X(s,50);let i=w(this.svg),a=n.pageX-i.left+10,o=n.pageY-i.top-10,r=(this.formatted_labels&&this.formatted_labels.length>0?this.formatted_labels[e]:this.state.labels[e])+": ",l=(100*this.state.sliceTotals[e]/this.state.grandTotal).toFixed(1);this.tip.setValues(a,o,{name:r,value:l+"%"}),this.tip.showTip()}else ft(t,"translate3d(0,0,0)"),this.tip.hideTip(),t.style.fill=s}bindTooltip(){this.container.addEventListener("mousemove",this.mouseMove),this.container.addEventListener("mouseleave",this.mouseLeave)}mouseMove(t){const e=t.target;let i=this.components.get("pieSlices").store,n=this.curActiveSliceIndex,s=this.curActiveSlice;if(i.includes(e)){let a=i.indexOf(e);this.hoverSlice(s,n,!1),this.curActiveSlice=e,this.curActiveSliceIndex=a,this.hoverSlice(e,a,!0,t)}else this.mouseLeave()}mouseLeave(){this.hoverSlice(this.curActiveSlice,this.curActiveSliceIndex,!1)}},donut:class extends bt{constructor(t,e){super(t,e),this.type="donut",this.initTimeout=0,this.init=1,this.setup()}configure(t){super.configure(t),this.mouseMove=this.mouseMove.bind(this),this.mouseLeave=this.mouseLeave.bind(this),this.hoverRadio=t.hoverRadio||.1,this.config.startAngle=t.startAngle||0,this.clockWise=t.clockWise||!1,this.strokeWidth=t.strokeWidth||30}calc(){super.calc();let t=this.state;this.radius=this.height>this.width?this.center.x-this.strokeWidth/2:this.center.y-this.strokeWidth/2;const{radius:e,clockWise:i}=this,n=t.slicesProperties||[];t.sliceStrings=[],t.slicesProperties=[];let s=180-this.config.startAngle;t.sliceTotals.map(((a,o)=>{const r=s,l=a/t.grandTotal*360,h=l>180?1:0,c=i?-l:l,d=s+=c,u=I(r,e),p=I(d,e),g=this.init&&n[o];let f,m;this.init?(f=g?g.startPosition:u,m=g?g.endPosition:u):(f=u,m=p);const v=360===l?function(t,e,i,n,s=1,a=0){let[o,r]=[i.x+t.x,i.y+t.y],[l,h,c]=[i.x+e.x,2*n+r,i.y+t.y];return`M${o} ${r}\n\t\tA ${n} ${n} 0 ${a} ${s?1:0}\n\t\t${l} ${h}\n\t\tM${o} ${h}\n\t\tA ${n} ${n} 0 ${a} ${s?1:0}\n\t\t${l} ${c}`}(f,m,this.center,this.radius,this.clockWise,h):function(t,e,i,n,s=1,a=0){let[o,r]=[i.x+t.x,i.y+t.y],[l,h]=[i.x+e.x,i.y+e.y];return`M${o} ${r}\n\t\tA ${n} ${n} 0 ${a} ${s?1:0}\n\t\t${l} ${h}`}(f,m,this.center,this.radius,this.clockWise,h);t.sliceStrings.push(v),t.slicesProperties.push({startPosition:u,endPosition:p,value:a,total:t.grandTotal,startAngle:r,endAngle:d,angle:c})})),this.init=0}setupComponents(){let t=this.state,e=[["donutSlices",{},function(){return{sliceStrings:t.sliceStrings,colors:this.colors,strokeWidth:this.strokeWidth}}.bind(this)]];this.components=new Map(e.map((t=>{let e=Pt(...t);return[t[0],e]})))}calTranslateByAngle(t){const{radius:e,hoverRadio:i}=this,n=I(t.startAngle+t.angle/2,e);return`translate3d(${n.x*i}px,${n.y*i}px,0)`}hoverSlice(t,e,i,n){if(!t)return;const s=this.colors[e];if(i){ft(t,this.calTranslateByAngle(this.state.slicesProperties[e])),t.style.stroke=X(s,50);let i=w(this.svg),a=n.pageX-i.left+10,o=n.pageY-i.top-10,r=(this.formatted_labels&&this.formatted_labels.length>0?this.formatted_labels[e]:this.state.labels[e])+": ",l=(100*this.state.sliceTotals[e]/this.state.grandTotal).toFixed(1);this.tip.setValues(a,o,{name:r,value:l+"%"}),this.tip.showTip()}else ft(t,"translate3d(0,0,0)"),this.tip.hideTip(),t.style.stroke=s}bindTooltip(){this.container.addEventListener("mousemove",this.mouseMove),this.container.addEventListener("mouseleave",this.mouseLeave)}mouseMove(t){const e=t.target;let i=this.components.get("donutSlices").store,n=this.curActiveSliceIndex,s=this.curActiveSlice;if(i.includes(e)){let a=i.indexOf(e);this.hoverSlice(s,n,!1),this.curActiveSlice=e,this.curActiveSliceIndex=a,this.hoverSlice(e,a,!0,t)}else this.mouseLeave()}mouseLeave(){this.hoverSlice(this.curActiveSlice,this.curActiveSliceIndex,!1)}}};function Wt(t){return(Wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jt(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Bt(){return(Bt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t}).apply(this,arguments)}function Xt(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter((function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable})))),n.forEach((function(e){jt(t,e,i[e])}))}return t}function Vt(t,e){if(null==t)return{};var i,n,s=function(t,e){if(null==t)return{};var i,n,s={},a=Object.keys(t);for(n=0;n<a.length;n++)i=a[n],e.indexOf(i)>=0||(s[i]=t[i]);return s}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(n=0;n<a.length;n++)i=a[n],e.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(t,i)&&(s[i]=t[i])}return s}function Ut(t){return function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function qt(t){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(t)}var Gt=qt(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Kt=qt(/Edge/i),Jt=qt(/firefox/i),Qt=qt(/safari/i)&&!qt(/chrome/i)&&!qt(/android/i),Zt=qt(/iP(ad|od|hone)/i),te=qt(/chrome/i)&&qt(/android/i),ee={capture:!1,passive:!1};function ie(t,e,i){t.addEventListener(e,i,!Gt&&ee)}function ne(t,e,i){t.removeEventListener(e,i,!Gt&&ee)}function se(t,e){if(e){if(">"===e[0]&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch(t){return!1}return!1}}function ae(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function oe(t,e,i,n){if(t){i=i||document;do{if(null!=e&&(">"===e[0]?t.parentNode===i&&se(t,e):se(t,e))||n&&t===i)return t;if(t===i)break}while(t=ae(t))}return null}var re,le=/\s+/g;function he(t,e,i){if(t&&e)if(t.classList)t.classList[i?"add":"remove"](e);else{var n=(" "+t.className+" ").replace(le," ").replace(" "+e+" "," ");t.className=(n+(i?" "+e:"")).replace(le," ")}}function ce(t,e,i){var n=t&&t.style;if(n){if(void 0===i)return document.defaultView&&document.defaultView.getComputedStyle?i=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(i=t.currentStyle),void 0===e?i:i[e];e in n||-1!==e.indexOf("webkit")||(e="-webkit-"+e),n[e]=i+("string"==typeof i?"":"px")}}function de(t,e){var i="";if("string"==typeof t)i=t;else do{var n=ce(t,"transform");n&&"none"!==n&&(i=n+" "+i)}while(!e&&(t=t.parentNode));var s=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return s&&new s(i)}function ue(t,e,i){if(t){var n=t.getElementsByTagName(e),s=0,a=n.length;if(i)for(;s<a;s++)i(n[s],s);return n}return[]}function pe(){var t=document.scrollingElement;return t||document.documentElement}function ge(t,e,i,n,s){if(t.getBoundingClientRect||t===window){var a,o,r,l,h,c,d;if(t!==window&&t.parentNode&&t!==pe()?(o=(a=t.getBoundingClientRect()).top,r=a.left,l=a.bottom,h=a.right,c=a.height,d=a.width):(o=0,r=0,l=window.innerHeight,h=window.innerWidth,c=window.innerHeight,d=window.innerWidth),(e||i)&&t!==window&&(s=s||t.parentNode,!Gt))do{if(s&&s.getBoundingClientRect&&("none"!==ce(s,"transform")||i&&"static"!==ce(s,"position"))){var u=s.getBoundingClientRect();o-=u.top+parseInt(ce(s,"border-top-width")),r-=u.left+parseInt(ce(s,"border-left-width")),l=o+a.height,h=r+a.width;break}}while(s=s.parentNode);if(n&&t!==window){var p=de(s||t),g=p&&p.a,f=p&&p.d;p&&(l=(o/=f)+(c/=f),h=(r/=g)+(d/=g))}return{top:o,left:r,bottom:l,right:h,width:d,height:c}}}function fe(t,e,i){for(var n=_e(t,!0),s=ge(t)[e];n;){var a=ge(n)[i];if(!("top"===i||"left"===i?s>=a:s<=a))return n;if(n===pe())break;n=_e(n,!1)}return!1}function me(t,e,i){for(var n=0,s=0,a=t.children;s<a.length;){if("none"!==a[s].style.display&&a[s]!==ki.ghost&&a[s]!==ki.dragged&&oe(a[s],i.draggable,t,!1)){if(n===e)return a[s];n++}s++}return null}function ve(t,e){for(var i=t.lastElementChild;i&&(i===ki.ghost||"none"===ce(i,"display")||e&&!se(i,e));)i=i.previousElementSibling;return i||null}function be(t,e){var i=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)"TEMPLATE"===t.nodeName.toUpperCase()||t===ki.clone||e&&!se(t,e)||i++;return i}function ye(t){var e=0,i=0,n=pe();if(t)do{var s=de(t),a=s.a,o=s.d;e+=t.scrollLeft*a,i+=t.scrollTop*o}while(t!==n&&(t=t.parentNode));return[e,i]}function _e(t,e){if(!t||!t.getBoundingClientRect)return pe();var i=t,n=!1;do{if(i.clientWidth<i.scrollWidth||i.clientHeight<i.scrollHeight){var s=ce(i);if(i.clientWidth<i.scrollWidth&&("auto"==s.overflowX||"scroll"==s.overflowX)||i.clientHeight<i.scrollHeight&&("auto"==s.overflowY||"scroll"==s.overflowY)){if(!i.getBoundingClientRect||i===document.body)return pe();if(n||e)return i;n=!0}}}while(i=i.parentNode);return pe()}function we(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}function xe(t,e){return function(){if(!re){var i=arguments,n=this;1===i.length?t.call(n,i[0]):t.apply(n,i),re=setTimeout((function(){re=void 0}),e)}}}function Ee(t,e,i){t.scrollLeft+=e,t.scrollTop+=i}function De(t){var e=window.Polymer,i=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):i?i(t).clone(!0)[0]:t.cloneNode(!0)}function ke(t,e){ce(t,"position","absolute"),ce(t,"top",e.top),ce(t,"left",e.left),ce(t,"width",e.width),ce(t,"height",e.height)}function Ae(t){ce(t,"position",""),ce(t,"top",""),ce(t,"left",""),ce(t,"width",""),ce(t,"height","")}var Se="Sortable"+(new Date).getTime();function Me(){var t,e=[];return{captureAnimationState:function(){(e=[],this.options.animation)&&[].slice.call(this.el.children).forEach((function(t){if("none"!==ce(t,"display")&&t!==ki.ghost){e.push({target:t,rect:ge(t)});var i=Xt({},e[e.length-1].rect);if(t.thisAnimationDuration){var n=de(t,!0);n&&(i.top-=n.f,i.left-=n.e)}t.fromRect=i}}))},addAnimationState:function(t){e.push(t)},removeAnimationState:function(t){e.splice(function(t,e){for(var i in t)if(t.hasOwnProperty(i))for(var n in e)if(e.hasOwnProperty(n)&&e[n]===t[i][n])return Number(i);return-1}(e,{target:t}),1)},animateAll:function(i){var n=this;if(!this.options.animation)return clearTimeout(t),void("function"==typeof i&&i());var s=!1,a=0;e.forEach((function(t){var e=0,i=t.target,o=i.fromRect,r=ge(i),l=i.prevFromRect,h=i.prevToRect,c=t.rect,d=de(i,!0);d&&(r.top-=d.f,r.left-=d.e),i.toRect=r,i.thisAnimationDuration&&we(l,r)&&!we(o,r)&&(c.top-r.top)/(c.left-r.left)==(o.top-r.top)/(o.left-r.left)&&(e=function(t,e,i,n){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-i.top,2)+Math.pow(e.left-i.left,2))*n.animation}(c,l,h,n.options)),we(r,o)||(i.prevFromRect=o,i.prevToRect=r,e||(e=n.options.animation),n.animate(i,c,r,e)),e&&(s=!0,a=Math.max(a,e),clearTimeout(i.animationResetTimer),i.animationResetTimer=setTimeout((function(){i.animationTime=0,i.prevFromRect=null,i.fromRect=null,i.prevToRect=null,i.thisAnimationDuration=null}),e),i.thisAnimationDuration=e)})),clearTimeout(t),s?t=setTimeout((function(){"function"==typeof i&&i()}),a):"function"==typeof i&&i(),e=[]},animate:function(t,e,i,n){if(n){ce(t,"transition",""),ce(t,"transform","");var s=de(this.el),a=s&&s.a,o=s&&s.d,r=(e.left-i.left)/(a||1),l=(e.top-i.top)/(o||1);t.animatingX=!!r,t.animatingY=!!l,ce(t,"transform","translate3d("+r+"px,"+l+"px,0)"),this.forRepaintDummy=function(t){return t.offsetWidth}(t),ce(t,"transition","transform "+n+"ms"+(this.options.easing?" "+this.options.easing:"")),ce(t,"transform","translate3d(0,0,0)"),"number"==typeof t.animated&&clearTimeout(t.animated),t.animated=setTimeout((function(){ce(t,"transition",""),ce(t,"transform",""),t.animated=!1,t.animatingX=!1,t.animatingY=!1}),n)}}}}var Te=[],Ce={initializeByDefault:!0},$e={mount:function(t){for(var e in Ce)Ce.hasOwnProperty(e)&&!(e in t)&&(t[e]=Ce[e]);Te.forEach((function(e){if(e.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")})),Te.push(t)},pluginEvent:function(t,e,i){var n=this;this.eventCanceled=!1,i.cancel=function(){n.eventCanceled=!0};var s=t+"Global";Te.forEach((function(n){e[n.pluginName]&&(e[n.pluginName][s]&&e[n.pluginName][s](Xt({sortable:e},i)),e.options[n.pluginName]&&e[n.pluginName][t]&&e[n.pluginName][t](Xt({sortable:e},i)))}))},initializePlugins:function(t,e,i,n){for(var s in Te.forEach((function(n){var s=n.pluginName;if(t.options[s]||n.initializeByDefault){var a=new n(t,e,t.options);a.sortable=t,a.options=t.options,t[s]=a,Bt(i,a.defaults)}})),t.options)if(t.options.hasOwnProperty(s)){var a=this.modifyOption(t,s,t.options[s]);void 0!==a&&(t.options[s]=a)}},getEventProperties:function(t,e){var i={};return Te.forEach((function(n){"function"==typeof n.eventProperties&&Bt(i,n.eventProperties.call(e[n.pluginName],t))})),i},modifyOption:function(t,e,i){var n;return Te.forEach((function(s){t[s.pluginName]&&s.optionListeners&&"function"==typeof s.optionListeners[e]&&(n=s.optionListeners[e].call(t[s.pluginName],i))})),n}};function Oe(t){var e=t.sortable,i=t.rootEl,n=t.name,s=t.targetEl,a=t.cloneEl,o=t.toEl,r=t.fromEl,l=t.oldIndex,h=t.newIndex,c=t.oldDraggableIndex,d=t.newDraggableIndex,u=t.originalEvent,p=t.putSortable,g=t.extraEventProperties;if(e=e||i&&i[Se]){var f,m=e.options,v="on"+n.charAt(0).toUpperCase()+n.substr(1);!window.CustomEvent||Gt||Kt?(f=document.createEvent("Event")).initEvent(n,!0,!0):f=new CustomEvent(n,{bubbles:!0,cancelable:!0}),f.to=o||i,f.from=r||i,f.item=s||i,f.clone=a,f.oldIndex=l,f.newIndex=h,f.oldDraggableIndex=c,f.newDraggableIndex=d,f.originalEvent=u,f.pullMode=p?p.lastPutMode:void 0;var b=Xt({},g,$e.getEventProperties(n,e));for(var y in b)f[y]=b[y];i&&i.dispatchEvent(f),m[v]&&m[v].call(e,f)}}var Pe=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=i.evt,s=Vt(i,["evt"]);$e.pluginEvent.bind(ki)(t,e,Xt({dragEl:Le,parentEl:Ie,ghostEl:Ye,rootEl:He,nextEl:Re,lastDownEl:Fe,cloneEl:ze,cloneHidden:We,dragStarted:ei,putSortable:qe,activeSortable:ki.active,originalEvent:n,oldIndex:je,oldDraggableIndex:Xe,newIndex:Be,newDraggableIndex:Ve,hideGhostForTarget:wi,unhideGhostForTarget:xi,cloneNowHidden:function(){We=!0},cloneNowShown:function(){We=!1},dispatchSortableEvent:function(t){Ne({sortable:e,name:t,originalEvent:n})}},s))};function Ne(t){Oe(Xt({putSortable:qe,cloneEl:ze,targetEl:Le,rootEl:He,oldIndex:je,oldDraggableIndex:Xe,newIndex:Be,newDraggableIndex:Ve},t))}var Le,Ie,Ye,He,Re,Fe,ze,We,je,Be,Xe,Ve,Ue,qe,Ge,Ke,Je,Qe,Ze,ti,ei,ii,ni,si,ai,oi=!1,ri=!1,li=[],hi=!1,ci=!1,di=[],ui=!1,pi=[],gi="undefined"!=typeof document,fi=Zt,mi=Kt||Gt?"cssFloat":"float",vi=gi&&!te&&!Zt&&"draggable"in document.createElement("div"),bi=function(){if(gi){if(Gt)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto","auto"===t.style.pointerEvents}}(),yi=function(t,e){var i=ce(t),n=parseInt(i.width)-parseInt(i.paddingLeft)-parseInt(i.paddingRight)-parseInt(i.borderLeftWidth)-parseInt(i.borderRightWidth),s=me(t,0,e),a=me(t,1,e),o=s&&ce(s),r=a&&ce(a),l=o&&parseInt(o.marginLeft)+parseInt(o.marginRight)+ge(s).width,h=r&&parseInt(r.marginLeft)+parseInt(r.marginRight)+ge(a).width;if("flex"===i.display)return"column"===i.flexDirection||"column-reverse"===i.flexDirection?"vertical":"horizontal";if("grid"===i.display)return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&o.float&&"none"!==o.float){var c="left"===o.float?"left":"right";return!a||"both"!==r.clear&&r.clear!==c?"horizontal":"vertical"}return s&&("block"===o.display||"flex"===o.display||"table"===o.display||"grid"===o.display||l>=n&&"none"===i[mi]||a&&"none"===i[mi]&&l+h>n)?"vertical":"horizontal"},_i=function(t){function e(t,i){return function(n,s,a,o){var r=n.options.group.name&&s.options.group.name&&n.options.group.name===s.options.group.name;if(null==t&&(i||r))return!0;if(null==t||!1===t)return!1;if(i&&"clone"===t)return t;if("function"==typeof t)return e(t(n,s,a,o),i)(n,s,a,o);var l=(i?n:s).options.group.name;return!0===t||"string"==typeof t&&t===l||t.join&&t.indexOf(l)>-1}}var i={},n=t.group;n&&"object"==Wt(n)||(n={name:n}),i.name=n.name,i.checkPull=e(n.pull,!0),i.checkPut=e(n.put),i.revertClone=n.revertClone,t.group=i},wi=function(){!bi&&Ye&&ce(Ye,"display","none")},xi=function(){!bi&&Ye&&ce(Ye,"display","")};gi&&document.addEventListener("click",(function(t){if(ri)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),ri=!1,!1}),!0);var Ei=function(t){if(Le){t=t.touches?t.touches[0]:t;var e=(s=t.clientX,a=t.clientY,li.some((function(t){if(!ve(t)){var e=ge(t),i=t[Se].options.emptyInsertThreshold,n=s>=e.left-i&&s<=e.right+i,r=a>=e.top-i&&a<=e.bottom+i;return i&&n&&r?o=t:void 0}})),o);if(e){var i={};for(var n in t)t.hasOwnProperty(n)&&(i[n]=t[n]);i.target=i.rootEl=e,i.preventDefault=void 0,i.stopPropagation=void 0,e[Se]._onDragOver(i)}}var s,a,o},Di=function(t){Le&&Le.parentNode[Se]._isOutsideThisEl(t.target)};function ki(t,e){if(!t||!t.nodeType||1!==t.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=Bt({},e),t[Se]=this;var i={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return yi(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(t,e){t.setData("Text",e.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==ki.supportPointer&&"PointerEvent"in window&&!Qt,emptyInsertThreshold:5};for(var n in $e.initializePlugins(this,t,i),i)!(n in e)&&(e[n]=i[n]);for(var s in _i(e),this)"_"===s.charAt(0)&&"function"==typeof this[s]&&(this[s]=this[s].bind(this));this.nativeDraggable=!e.forceFallback&&vi,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?ie(t,"pointerdown",this._onTapStart):(ie(t,"mousedown",this._onTapStart),ie(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(ie(t,"dragover",this),ie(t,"dragenter",this)),li.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Bt(this,Me())}function Ai(t,e,i,n,s,a,o,r){var l,h,c=t[Se],d=c.options.onMove;return!window.CustomEvent||Gt||Kt?(l=document.createEvent("Event")).initEvent("move",!0,!0):l=new CustomEvent("move",{bubbles:!0,cancelable:!0}),l.to=e,l.from=t,l.dragged=i,l.draggedRect=n,l.related=s||e,l.relatedRect=a||ge(e),l.willInsertAfter=r,l.originalEvent=o,t.dispatchEvent(l),d&&(h=d.call(c,l,o)),h}function Si(t){t.draggable=!1}function Mi(){ui=!1}function Ti(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,i=e.length,n=0;i--;)n+=e.charCodeAt(i);return n.toString(36)}function Ci(t){return setTimeout(t,0)}function $i(t){return clearTimeout(t)}ki.prototype={constructor:ki,_isOutsideThisEl:function(t){this.el.contains(t)||t===this.el||(ii=null)},_getDirection:function(t,e){return"function"==typeof this.options.direction?this.options.direction.call(this,t,e,Le):this.options.direction},_onTapStart:function(t){if(t.cancelable){var e=this,i=this.el,n=this.options,s=n.preventOnFilter,a=t.type,o=t.touches&&t.touches[0]||t.pointerType&&"touch"===t.pointerType&&t,r=(o||t).target,l=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||r,h=n.filter;if(function(t){pi.length=0;var e=t.getElementsByTagName("input"),i=e.length;for(;i--;){var n=e[i];n.checked&&pi.push(n)}}(i),!Le&&!(/mousedown|pointerdown/.test(a)&&0!==t.button||n.disabled)&&!l.isContentEditable&&(this.nativeDraggable||!Qt||!r||"SELECT"!==r.tagName.toUpperCase())&&!((r=oe(r,n.draggable,i,!1))&&r.animated||Fe===r)){if(je=be(r),Xe=be(r,n.draggable),"function"==typeof h){if(h.call(this,t,r,this))return Ne({sortable:e,rootEl:l,name:"filter",targetEl:r,toEl:i,fromEl:i}),Pe("filter",e,{evt:t}),void(s&&t.cancelable&&t.preventDefault())}else if(h&&(h=h.split(",").some((function(n){if(n=oe(l,n.trim(),i,!1))return Ne({sortable:e,rootEl:n,name:"filter",targetEl:r,fromEl:i,toEl:i}),Pe("filter",e,{evt:t}),!0}))))return void(s&&t.cancelable&&t.preventDefault());n.handle&&!oe(l,n.handle,i,!1)||this._prepareDragStart(t,o,r)}}},_prepareDragStart:function(t,e,i){var n,s=this,a=s.el,o=s.options,r=a.ownerDocument;if(i&&!Le&&i.parentNode===a){var l=ge(i);if(He=a,Ie=(Le=i).parentNode,Re=Le.nextSibling,Fe=i,Ue=o.group,ki.dragged=Le,Ge={target:Le,clientX:(e||t).clientX,clientY:(e||t).clientY},Ze=Ge.clientX-l.left,ti=Ge.clientY-l.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,Le.style["will-change"]="all",n=function(){Pe("delayEnded",s,{evt:t}),ki.eventCanceled?s._onDrop():(s._disableDelayedDragEvents(),!Jt&&s.nativeDraggable&&(Le.draggable=!0),s._triggerDragStart(t,e),Ne({sortable:s,name:"choose",originalEvent:t}),he(Le,o.chosenClass,!0))},o.ignore.split(",").forEach((function(t){ue(Le,t.trim(),Si)})),ie(r,"dragover",Ei),ie(r,"mousemove",Ei),ie(r,"touchmove",Ei),ie(r,"mouseup",s._onDrop),ie(r,"touchend",s._onDrop),ie(r,"touchcancel",s._onDrop),Jt&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Le.draggable=!0),Pe("delayStart",this,{evt:t}),!o.delay||o.delayOnTouchOnly&&!e||this.nativeDraggable&&(Kt||Gt))n();else{if(ki.eventCanceled)return void this._onDrop();ie(r,"mouseup",s._disableDelayedDrag),ie(r,"touchend",s._disableDelayedDrag),ie(r,"touchcancel",s._disableDelayedDrag),ie(r,"mousemove",s._delayedDragTouchMoveHandler),ie(r,"touchmove",s._delayedDragTouchMoveHandler),o.supportPointer&&ie(r,"pointermove",s._delayedDragTouchMoveHandler),s._dragStartTimer=setTimeout(n,o.delay)}}},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Le&&Si(Le),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;ne(t,"mouseup",this._disableDelayedDrag),ne(t,"touchend",this._disableDelayedDrag),ne(t,"touchcancel",this._disableDelayedDrag),ne(t,"mousemove",this._delayedDragTouchMoveHandler),ne(t,"touchmove",this._delayedDragTouchMoveHandler),ne(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||"touch"==t.pointerType&&t,!this.nativeDraggable||e?this.options.supportPointer?ie(document,"pointermove",this._onTouchMove):ie(document,e?"touchmove":"mousemove",this._onTouchMove):(ie(Le,"dragend",this),ie(He,"dragstart",this._onDragStart));try{document.selection?Ci((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(t){}},_dragStarted:function(t,e){if(oi=!1,He&&Le){Pe("dragStarted",this,{evt:e}),this.nativeDraggable&&ie(document,"dragover",Di);var i=this.options;!t&&he(Le,i.dragClass,!1),he(Le,i.ghostClass,!0),ki.active=this,t&&this._appendGhost(),Ne({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(Ke){this._lastX=Ke.clientX,this._lastY=Ke.clientY,wi();for(var t=document.elementFromPoint(Ke.clientX,Ke.clientY),e=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(Ke.clientX,Ke.clientY))!==e;)e=t;if(Le.parentNode[Se]._isOutsideThisEl(t),e)do{if(e[Se]){if(e[Se]._onDragOver({clientX:Ke.clientX,clientY:Ke.clientY,target:t,rootEl:e})&&!this.options.dragoverBubble)break}t=e}while(e=e.parentNode);xi()}},_onTouchMove:function(t){if(Ge){var e=this.options,i=e.fallbackTolerance,n=e.fallbackOffset,s=t.touches?t.touches[0]:t,a=Ye&&de(Ye,!0),o=Ye&&a&&a.a,r=Ye&&a&&a.d,l=fi&&ai&&ye(ai),h=(s.clientX-Ge.clientX+n.x)/(o||1)+(l?l[0]-di[0]:0)/(o||1),c=(s.clientY-Ge.clientY+n.y)/(r||1)+(l?l[1]-di[1]:0)/(r||1);if(!ki.active&&!oi){if(i&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<i)return;this._onDragStart(t,!0)}if(Ye){a?(a.e+=h-(Je||0),a.f+=c-(Qe||0)):a={a:1,b:0,c:0,d:1,e:h,f:c};var d="matrix(".concat(a.a,",").concat(a.b,",").concat(a.c,",").concat(a.d,",").concat(a.e,",").concat(a.f,")");ce(Ye,"webkitTransform",d),ce(Ye,"mozTransform",d),ce(Ye,"msTransform",d),ce(Ye,"transform",d),Je=h,Qe=c,Ke=s}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!Ye){var t=this.options.fallbackOnBody?document.body:He,e=ge(Le,!0,fi,!0,t),i=this.options;if(fi){for(ai=t;"static"===ce(ai,"position")&&"none"===ce(ai,"transform")&&ai!==document;)ai=ai.parentNode;ai!==document.body&&ai!==document.documentElement?(ai===document&&(ai=pe()),e.top+=ai.scrollTop,e.left+=ai.scrollLeft):ai=pe(),di=ye(ai)}he(Ye=Le.cloneNode(!0),i.ghostClass,!1),he(Ye,i.fallbackClass,!0),he(Ye,i.dragClass,!0),ce(Ye,"transition",""),ce(Ye,"transform",""),ce(Ye,"box-sizing","border-box"),ce(Ye,"margin",0),ce(Ye,"top",e.top),ce(Ye,"left",e.left),ce(Ye,"width",e.width),ce(Ye,"height",e.height),ce(Ye,"opacity","0.8"),ce(Ye,"position",fi?"absolute":"fixed"),ce(Ye,"zIndex","100000"),ce(Ye,"pointerEvents","none"),ki.ghost=Ye,t.appendChild(Ye),ce(Ye,"transform-origin",Ze/parseInt(Ye.style.width)*100+"% "+ti/parseInt(Ye.style.height)*100+"%")}},_onDragStart:function(t,e){var i=this,n=t.dataTransfer,s=i.options;Pe("dragStart",this,{evt:t}),ki.eventCanceled?this._onDrop():(Pe("setupClone",this),ki.eventCanceled||((ze=De(Le)).draggable=!1,ze.style["will-change"]="",this._hideClone(),he(ze,this.options.chosenClass,!1),ki.clone=ze),i.cloneId=Ci((function(){Pe("clone",i),ki.eventCanceled||(i.options.removeCloneOnHide||He.insertBefore(ze,Le),i._hideClone(),Ne({sortable:i,name:"clone"}))})),!e&&he(Le,s.dragClass,!0),e?(ri=!0,i._loopId=setInterval(i._emulateDragOver,50)):(ne(document,"mouseup",i._onDrop),ne(document,"touchend",i._onDrop),ne(document,"touchcancel",i._onDrop),n&&(n.effectAllowed="move",s.setData&&s.setData.call(i,n,Le)),ie(document,"drop",i),ce(Le,"transform","translateZ(0)")),oi=!0,i._dragStartId=Ci(i._dragStarted.bind(i,e,t)),ie(document,"selectstart",i),ei=!0,Qt&&ce(document.body,"user-select","none"))},_onDragOver:function(t){var e,i,n,s,a=this.el,o=t.target,r=this.options,l=r.group,h=ki.active,c=Ue===l,d=r.sort,u=qe||h,p=this,g=!1;if(!ui){if(void 0!==t.preventDefault&&t.cancelable&&t.preventDefault(),o=oe(o,r.draggable,a,!0),M("dragOver"),ki.eventCanceled)return g;if(Le.contains(t.target)||o.animated&&o.animatingX&&o.animatingY||p._ignoreWhileAnimating===o)return C(!1);if(ri=!1,h&&!r.disabled&&(c?d||(n=!He.contains(Le)):qe===this||(this.lastPutMode=Ue.checkPull(this,h,Le,t))&&l.checkPut(this,h,Le,t))){if(s="vertical"===this._getDirection(t,o),e=ge(Le),M("dragOverValid"),ki.eventCanceled)return g;if(n)return Ie=He,T(),this._hideClone(),M("revert"),ki.eventCanceled||(Re?He.insertBefore(Le,Re):He.appendChild(Le)),C(!0);var f=ve(a,r.draggable);if(!f||function(t,e,i){var n=ge(ve(i.el,i.options.draggable)),s=10;return e?t.clientX>n.right+s||t.clientX<=n.right&&t.clientY>n.bottom&&t.clientX>=n.left:t.clientX>n.right&&t.clientY>n.top||t.clientX<=n.right&&t.clientY>n.bottom+s}(t,s,this)&&!f.animated){if(f===Le)return C(!1);if(f&&a===t.target&&(o=f),o&&(i=ge(o)),!1!==Ai(He,a,Le,e,o,i,t,!!o))return T(),a.appendChild(Le),Ie=a,$(),C(!0)}else if(o.parentNode===a){i=ge(o);var m,v,b,y=Le.parentNode!==a,_=!function(t,e,i){var n=i?t.left:t.top,s=i?t.right:t.bottom,a=i?t.width:t.height,o=i?e.left:e.top,r=i?e.right:e.bottom,l=i?e.width:e.height;return n===o||s===r||n+a/2===o+l/2}(Le.animated&&Le.toRect||e,o.animated&&o.toRect||i,s),w=s?"top":"left",x=fe(o,"top","top")||fe(Le,"top","top"),E=x?x.scrollTop:void 0;if(ii!==o&&(v=i[w],hi=!1,ci=!_&&r.invertSwap||y),0!==(m=function(t,e,i,n,s,a,o,r){var l=n?t.clientY:t.clientX,h=n?i.height:i.width,c=n?i.top:i.left,d=n?i.bottom:i.right,u=!1;if(!o)if(r&&si<h*s){if(!hi&&(1===ni?l>c+h*a/2:l<d-h*a/2)&&(hi=!0),hi)u=!0;else if(1===ni?l<c+si:l>d-si)return-ni}else if(l>c+h*(1-s)/2&&l<d-h*(1-s)/2)return function(t){return be(Le)<be(t)?1:-1}(e);if((u=u||o)&&(l<c+h*a/2||l>d-h*a/2))return l>c+h/2?1:-1;return 0}(t,o,i,s,_?1:r.swapThreshold,null==r.invertedSwapThreshold?r.swapThreshold:r.invertedSwapThreshold,ci,ii===o))){var D=be(Le);do{D-=m,b=Ie.children[D]}while(b&&("none"===ce(b,"display")||b===Ye))}if(0===m||b===o)return C(!1);ii=o,ni=m;var k=o.nextElementSibling,A=!1,S=Ai(He,a,Le,e,o,i,t,A=1===m);if(!1!==S)return 1!==S&&-1!==S||(A=1===S),ui=!0,setTimeout(Mi,30),T(),A&&!k?a.appendChild(Le):o.parentNode.insertBefore(Le,A?k:o),x&&Ee(x,0,E-x.scrollTop),Ie=Le.parentNode,void 0===v||ci||(si=Math.abs(v-ge(o)[w])),$(),C(!0)}if(a.contains(Le))return C(!1)}return!1}function M(r,l){Pe(r,p,Xt({evt:t,isOwner:c,axis:s?"vertical":"horizontal",revert:n,dragRect:e,targetRect:i,canSort:d,fromSortable:u,target:o,completed:C,onMove:function(i,n){return Ai(He,a,Le,e,i,ge(i),t,n)},changed:$},l))}function T(){M("dragOverAnimationCapture"),p.captureAnimationState(),p!==u&&u.captureAnimationState()}function C(e){return M("dragOverCompleted",{insertion:e}),e&&(c?h._hideClone():h._showClone(p),p!==u&&(he(Le,qe?qe.options.ghostClass:h.options.ghostClass,!1),he(Le,r.ghostClass,!0)),qe!==p&&p!==ki.active?qe=p:p===ki.active&&qe&&(qe=null),u===p&&(p._ignoreWhileAnimating=o),p.animateAll((function(){M("dragOverAnimationComplete"),p._ignoreWhileAnimating=null})),p!==u&&(u.animateAll(),u._ignoreWhileAnimating=null)),(o===Le&&!Le.animated||o===a&&!o.animated)&&(ii=null),r.dragoverBubble||t.rootEl||o===document||(Le.parentNode[Se]._isOutsideThisEl(t.target),!e&&Ei(t)),!r.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),g=!0}function $(){Be=be(Le),Ve=be(Le,r.draggable),Ne({sortable:p,name:"change",toEl:a,newIndex:Be,newDraggableIndex:Ve,originalEvent:t})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){ne(document,"mousemove",this._onTouchMove),ne(document,"touchmove",this._onTouchMove),ne(document,"pointermove",this._onTouchMove),ne(document,"dragover",Ei),ne(document,"mousemove",Ei),ne(document,"touchmove",Ei)},_offUpEvents:function(){var t=this.el.ownerDocument;ne(t,"mouseup",this._onDrop),ne(t,"touchend",this._onDrop),ne(t,"pointerup",this._onDrop),ne(t,"touchcancel",this._onDrop),ne(document,"selectstart",this)},_onDrop:function(t){var e=this.el,i=this.options;Be=be(Le),Ve=be(Le,i.draggable),Pe("drop",this,{evt:t}),Ie=Le&&Le.parentNode,Be=be(Le),Ve=be(Le,i.draggable),ki.eventCanceled||(oi=!1,ci=!1,hi=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),$i(this.cloneId),$i(this._dragStartId),this.nativeDraggable&&(ne(document,"drop",this),ne(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Qt&&ce(document.body,"user-select",""),ce(Le,"transform",""),t&&(ei&&(t.cancelable&&t.preventDefault(),!i.dropBubble&&t.stopPropagation()),Ye&&Ye.parentNode&&Ye.parentNode.removeChild(Ye),(He===Ie||qe&&"clone"!==qe.lastPutMode)&&ze&&ze.parentNode&&ze.parentNode.removeChild(ze),Le&&(this.nativeDraggable&&ne(Le,"dragend",this),Si(Le),Le.style["will-change"]="",ei&&!oi&&he(Le,qe?qe.options.ghostClass:this.options.ghostClass,!1),he(Le,this.options.chosenClass,!1),Ne({sortable:this,name:"unchoose",toEl:Ie,newIndex:null,newDraggableIndex:null,originalEvent:t}),He!==Ie?(Be>=0&&(Ne({rootEl:Ie,name:"add",toEl:Ie,fromEl:He,originalEvent:t}),Ne({sortable:this,name:"remove",toEl:Ie,originalEvent:t}),Ne({rootEl:Ie,name:"sort",toEl:Ie,fromEl:He,originalEvent:t}),Ne({sortable:this,name:"sort",toEl:Ie,originalEvent:t})),qe&&qe.save()):Be!==je&&Be>=0&&(Ne({sortable:this,name:"update",toEl:Ie,originalEvent:t}),Ne({sortable:this,name:"sort",toEl:Ie,originalEvent:t})),ki.active&&(null!=Be&&-1!==Be||(Be=je,Ve=Xe),Ne({sortable:this,name:"end",toEl:Ie,originalEvent:t}),this.save())))),this._nulling()},_nulling:function(){Pe("nulling",this),He=Le=Ie=Ye=Re=ze=Fe=We=Ge=Ke=ei=Be=Ve=je=Xe=ii=ni=qe=Ue=ki.dragged=ki.ghost=ki.clone=ki.active=null,pi.forEach((function(t){t.checked=!0})),pi.length=Je=Qe=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":Le&&(this._onDragOver(t),function(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move");t.cancelable&&t.preventDefault()}(t));break;case"selectstart":t.preventDefault()}},toArray:function(){for(var t,e=[],i=this.el.children,n=0,s=i.length,a=this.options;n<s;n++)oe(t=i[n],a.draggable,this.el,!1)&&e.push(t.getAttribute(a.dataIdAttr)||Ti(t));return e},sort:function(t,e){var i={},n=this.el;this.toArray().forEach((function(t,e){var s=n.children[e];oe(s,this.options.draggable,n,!1)&&(i[t]=s)}),this),e&&this.captureAnimationState(),t.forEach((function(t){i[t]&&(n.removeChild(i[t]),n.appendChild(i[t]))})),e&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return oe(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var i=this.options;if(void 0===e)return i[t];var n=$e.modifyOption(this,t,e);i[t]=void 0!==n?n:e,"group"===t&&_i(i)},destroy:function(){Pe("destroy",this);var t=this.el;t[Se]=null,ne(t,"mousedown",this._onTapStart),ne(t,"touchstart",this._onTapStart),ne(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(ne(t,"dragover",this),ne(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),(function(t){t.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),li.splice(li.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!We){if(Pe("hideClone",this),ki.eventCanceled)return;ce(ze,"display","none"),this.options.removeCloneOnHide&&ze.parentNode&&ze.parentNode.removeChild(ze),We=!0}},_showClone:function(t){if("clone"===t.lastPutMode){if(We){if(Pe("showClone",this),ki.eventCanceled)return;Le.parentNode!=He||this.options.group.revertClone?Re?He.insertBefore(ze,Re):He.appendChild(ze):He.insertBefore(ze,Le),this.options.group.revertClone&&this.animate(Le,ze),ce(ze,"display",""),We=!1}}else this._hideClone()}},gi&&ie(document,"touchmove",(function(t){(ki.active||oi)&&t.cancelable&&t.preventDefault()})),ki.utils={on:ie,off:ne,css:ce,find:ue,is:function(t,e){return!!oe(t,e,t,!1)},extend:function(t,e){if(t&&e)for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t},throttle:xe,closest:oe,toggleClass:he,clone:De,index:be,nextTick:Ci,cancelNextTick:$i,detectDirection:yi,getChild:me},ki.get=function(t){return t[Se]},ki.mount=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e[0].constructor===Array&&(e=e[0]),e.forEach((function(t){if(!t.prototype||!t.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(t));t.utils&&(ki.utils=Xt({},ki.utils,t.utils)),$e.mount(t)}))},ki.create=function(t,e){return new ki(t,e)},ki.version="1.13.0";var Oi,Pi,Ni,Li,Ii,Yi,Hi=[],Ri=!1;function Fi(){Hi.forEach((function(t){clearInterval(t.pid)})),Hi=[]}function zi(){clearInterval(Yi)}var Wi=xe((function(t,e,i,n){if(e.scroll){var s,a=(t.touches?t.touches[0]:t).clientX,o=(t.touches?t.touches[0]:t).clientY,r=e.scrollSensitivity,l=e.scrollSpeed,h=pe(),c=!1;Pi!==i&&(Pi=i,Fi(),Oi=e.scroll,s=e.scrollFn,!0===Oi&&(Oi=_e(i,!0)));var d=0,u=Oi;do{var p=u,g=ge(p),f=g.top,m=g.bottom,v=g.left,b=g.right,y=g.width,_=g.height,w=void 0,x=void 0,E=p.scrollWidth,D=p.scrollHeight,k=ce(p),A=p.scrollLeft,S=p.scrollTop;p===h?(w=y<E&&("auto"===k.overflowX||"scroll"===k.overflowX||"visible"===k.overflowX),x=_<D&&("auto"===k.overflowY||"scroll"===k.overflowY||"visible"===k.overflowY)):(w=y<E&&("auto"===k.overflowX||"scroll"===k.overflowX),x=_<D&&("auto"===k.overflowY||"scroll"===k.overflowY));var M=w&&(Math.abs(b-a)<=r&&A+y<E)-(Math.abs(v-a)<=r&&!!A),T=x&&(Math.abs(m-o)<=r&&S+_<D)-(Math.abs(f-o)<=r&&!!S);if(!Hi[d])for(var C=0;C<=d;C++)Hi[C]||(Hi[C]={});Hi[d].vx==M&&Hi[d].vy==T&&Hi[d].el===p||(Hi[d].el=p,Hi[d].vx=M,Hi[d].vy=T,clearInterval(Hi[d].pid),0==M&&0==T||(c=!0,Hi[d].pid=setInterval(function(){n&&0===this.layer&&ki.active._onTouchMove(Ii);var e=Hi[this.layer].vy?Hi[this.layer].vy*l:0,i=Hi[this.layer].vx?Hi[this.layer].vx*l:0;"function"==typeof s&&"continue"!==s.call(ki.dragged.parentNode[Se],i,e,t,Ii,Hi[this.layer].el)||Ee(Hi[this.layer].el,i,e)}.bind({layer:d}),24))),d++}while(e.bubbleScroll&&u!==h&&(u=_e(u,!1)));Ri=c}}),30),ji=function(t){var e=t.originalEvent,i=t.putSortable,n=t.dragEl,s=t.activeSortable,a=t.dispatchSortableEvent,o=t.hideGhostForTarget,r=t.unhideGhostForTarget;if(e){var l=i||s;o();var h=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,c=document.elementFromPoint(h.clientX,h.clientY);r(),l&&!l.el.contains(c)&&(a("spill"),this.onSpill({dragEl:n,putSortable:i}))}};function Bi(){}function Xi(){}Bi.prototype={startIndex:null,dragStart:function(t){var e=t.oldDraggableIndex;this.startIndex=e},onSpill:function(t){var e=t.dragEl,i=t.putSortable;this.sortable.captureAnimationState(),i&&i.captureAnimationState();var n=me(this.sortable.el,this.startIndex,this.options);n?this.sortable.el.insertBefore(e,n):this.sortable.el.appendChild(e),this.sortable.animateAll(),i&&i.animateAll()},drop:ji},Bt(Bi,{pluginName:"revertOnSpill"}),Xi.prototype={onSpill:function(t){var e=t.dragEl,i=t.putSortable||this.sortable;i.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),i.animateAll()},drop:ji},Bt(Xi,{pluginName:"removeOnSpill"});var Vi,Ui,qi,Gi,Ki,Ji=[],Qi=[],Zi=!1,tn=!1,en=!1;function nn(t,e){Qi.forEach((function(i,n){var s=e.children[i.sortableIndex+(t?Number(n):0)];s?e.insertBefore(i,s):e.appendChild(i)}))}function sn(){Ji.forEach((function(t){t!==qi&&t.parentNode&&t.parentNode.removeChild(t)}))}ki.mount(new function(){function t(){for(var t in this.defaults={scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===t.charAt(0)&&"function"==typeof this[t]&&(this[t]=this[t].bind(this))}return t.prototype={dragStarted:function(t){var e=t.originalEvent;this.sortable.nativeDraggable?ie(document,"dragover",this._handleAutoScroll):this.options.supportPointer?ie(document,"pointermove",this._handleFallbackAutoScroll):e.touches?ie(document,"touchmove",this._handleFallbackAutoScroll):ie(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var e=t.originalEvent;this.options.dragOverBubble||e.rootEl||this._handleAutoScroll(e)},drop:function(){this.sortable.nativeDraggable?ne(document,"dragover",this._handleAutoScroll):(ne(document,"pointermove",this._handleFallbackAutoScroll),ne(document,"touchmove",this._handleFallbackAutoScroll),ne(document,"mousemove",this._handleFallbackAutoScroll)),zi(),Fi(),clearTimeout(re),re=void 0},nulling:function(){Ii=Pi=Oi=Ri=Yi=Ni=Li=null,Hi.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,e){var i=this,n=(t.touches?t.touches[0]:t).clientX,s=(t.touches?t.touches[0]:t).clientY,a=document.elementFromPoint(n,s);if(Ii=t,e||Kt||Gt||Qt){Wi(t,this.options,a,e);var o=_e(a,!0);!Ri||Yi&&n===Ni&&s===Li||(Yi&&zi(),Yi=setInterval((function(){var a=_e(document.elementFromPoint(n,s),!0);a!==o&&(o=a,Fi()),Wi(t,i.options,a,e)}),10),Ni=n,Li=s)}else{if(!this.options.bubbleScroll||_e(a,!0)===pe())return void Fi();Wi(t,this.options,_e(a,!1),!1)}}},Bt(t,{pluginName:"scroll",initializeByDefault:!0})}),ki.mount(Xi,Bi);const an=ki;an.mount(new function(){function t(t){for(var e in this)"_"===e.charAt(0)&&"function"==typeof this[e]&&(this[e]=this[e].bind(this));t.options.supportPointer?ie(document,"pointerup",this._deselectMultiDrag):(ie(document,"mouseup",this._deselectMultiDrag),ie(document,"touchend",this._deselectMultiDrag)),ie(document,"keydown",this._checkKeyDown),ie(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(e,i){var n="";Ji.length&&Ui===t?Ji.forEach((function(t,e){n+=(e?", ":"")+t.textContent})):n=i.textContent,e.setData("Text",n)}}}return t.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(t){var e=t.dragEl;qi=e},delayEnded:function(){this.isMultiDrag=~Ji.indexOf(qi)},setupClone:function(t){var e=t.sortable,i=t.cancel;if(this.isMultiDrag){for(var n=0;n<Ji.length;n++)Qi.push(De(Ji[n])),Qi[n].sortableIndex=Ji[n].sortableIndex,Qi[n].draggable=!1,Qi[n].style["will-change"]="",he(Qi[n],this.options.selectedClass,!1),Ji[n]===qi&&he(Qi[n],this.options.chosenClass,!1);e._hideClone(),i()}},clone:function(t){var e=t.sortable,i=t.rootEl,n=t.dispatchSortableEvent,s=t.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||Ji.length&&Ui===e&&(nn(!0,i),n("clone"),s()))},showClone:function(t){var e=t.cloneNowShown,i=t.rootEl,n=t.cancel;this.isMultiDrag&&(nn(!1,i),Qi.forEach((function(t){ce(t,"display","")})),e(),Ki=!1,n())},hideClone:function(t){var e=this,i=(t.sortable,t.cloneNowHidden),n=t.cancel;this.isMultiDrag&&(Qi.forEach((function(t){ce(t,"display","none"),e.options.removeCloneOnHide&&t.parentNode&&t.parentNode.removeChild(t)})),i(),Ki=!0,n())},dragStartGlobal:function(t){t.sortable;!this.isMultiDrag&&Ui&&Ui.multiDrag._deselectMultiDrag(),Ji.forEach((function(t){t.sortableIndex=be(t)})),Ji=Ji.sort((function(t,e){return t.sortableIndex-e.sortableIndex})),en=!0},dragStarted:function(t){var e=this,i=t.sortable;if(this.isMultiDrag){if(this.options.sort&&(i.captureAnimationState(),this.options.animation)){Ji.forEach((function(t){t!==qi&&ce(t,"position","absolute")}));var n=ge(qi,!1,!0,!0);Ji.forEach((function(t){t!==qi&&ke(t,n)})),tn=!0,Zi=!0}i.animateAll((function(){tn=!1,Zi=!1,e.options.animation&&Ji.forEach((function(t){Ae(t)})),e.options.sort&&sn()}))}},dragOver:function(t){var e=t.target,i=t.completed,n=t.cancel;tn&&~Ji.indexOf(e)&&(i(!1),n())},revert:function(t){var e=t.fromSortable,i=t.rootEl,n=t.sortable,s=t.dragRect;Ji.length>1&&(Ji.forEach((function(t){n.addAnimationState({target:t,rect:tn?ge(t):s}),Ae(t),t.fromRect=s,e.removeAnimationState(t)})),tn=!1,function(t,e){Ji.forEach((function(i,n){var s=e.children[i.sortableIndex+(t?Number(n):0)];s?e.insertBefore(i,s):e.appendChild(i)}))}(!this.options.removeCloneOnHide,i))},dragOverCompleted:function(t){var e=t.sortable,i=t.isOwner,n=t.insertion,s=t.activeSortable,a=t.parentEl,o=t.putSortable,r=this.options;if(n){if(i&&s._hideClone(),Zi=!1,r.animation&&Ji.length>1&&(tn||!i&&!s.options.sort&&!o)){var l=ge(qi,!1,!0,!0);Ji.forEach((function(t){t!==qi&&(ke(t,l),a.appendChild(t))})),tn=!0}if(!i)if(tn||sn(),Ji.length>1){var h=Ki;s._showClone(e),s.options.animation&&!Ki&&h&&Qi.forEach((function(t){s.addAnimationState({target:t,rect:Gi}),t.fromRect=Gi,t.thisAnimationDuration=null}))}else s._showClone(e)}},dragOverAnimationCapture:function(t){var e=t.dragRect,i=t.isOwner,n=t.activeSortable;if(Ji.forEach((function(t){t.thisAnimationDuration=null})),n.options.animation&&!i&&n.multiDrag.isMultiDrag){Gi=Bt({},e);var s=de(qi,!0);Gi.top-=s.f,Gi.left-=s.e}},dragOverAnimationComplete:function(){tn&&(tn=!1,sn())},drop:function(t){var e=t.originalEvent,i=t.rootEl,n=t.parentEl,s=t.sortable,a=t.dispatchSortableEvent,o=t.oldIndex,r=t.putSortable,l=r||this.sortable;if(e){var h=this.options,c=n.children;if(!en)if(h.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),he(qi,h.selectedClass,!~Ji.indexOf(qi)),~Ji.indexOf(qi))Ji.splice(Ji.indexOf(qi),1),Vi=null,Oe({sortable:s,rootEl:i,name:"deselect",targetEl:qi,originalEvt:e});else{if(Ji.push(qi),Oe({sortable:s,rootEl:i,name:"select",targetEl:qi,originalEvt:e}),e.shiftKey&&Vi&&s.el.contains(Vi)){var d,u,p=be(Vi),g=be(qi);if(~p&&~g&&p!==g)for(g>p?(u=p,d=g):(u=g,d=p+1);u<d;u++)~Ji.indexOf(c[u])||(he(c[u],h.selectedClass,!0),Ji.push(c[u]),Oe({sortable:s,rootEl:i,name:"select",targetEl:c[u],originalEvt:e}))}else Vi=qi;Ui=l}if(en&&this.isMultiDrag){if((n[Se].options.sort||n!==i)&&Ji.length>1){var f=ge(qi),m=be(qi,":not(."+this.options.selectedClass+")");if(!Zi&&h.animation&&(qi.thisAnimationDuration=null),l.captureAnimationState(),!Zi&&(h.animation&&(qi.fromRect=f,Ji.forEach((function(t){if(t.thisAnimationDuration=null,t!==qi){var e=tn?ge(t):f;t.fromRect=e,l.addAnimationState({target:t,rect:e})}}))),sn(),Ji.forEach((function(t){c[m]?n.insertBefore(t,c[m]):n.appendChild(t),m++})),o===be(qi))){var v=!1;Ji.forEach((function(t){t.sortableIndex===be(t)||(v=!0)})),v&&a("update")}Ji.forEach((function(t){Ae(t)})),l.animateAll()}Ui=l}(i===n||r&&"clone"!==r.lastPutMode)&&Qi.forEach((function(t){t.parentNode&&t.parentNode.removeChild(t)}))}},nullingGlobal:function(){this.isMultiDrag=en=!1,Qi.length=0},destroyGlobal:function(){this._deselectMultiDrag(),ne(document,"pointerup",this._deselectMultiDrag),ne(document,"mouseup",this._deselectMultiDrag),ne(document,"touchend",this._deselectMultiDrag),ne(document,"keydown",this._checkKeyDown),ne(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(t){if(!(void 0!==en&&en||Ui!==this.sortable||t&&oe(t.target,this.options.draggable,this.sortable.el,!1)||t&&0!==t.button))for(;Ji.length;){var e=Ji[0];he(e,this.options.selectedClass,!1),Ji.shift(),Oe({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:e,originalEvt:t})}},_checkKeyDown:function(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},Bt(t,{pluginName:"multiDrag",utils:{select:function(t){var e=t.parentNode[Se];e&&e.options.multiDrag&&!~Ji.indexOf(t)&&(Ui&&Ui!==e&&(Ui.multiDrag._deselectMultiDrag(),Ui=e),he(t,e.options.selectedClass,!0),Ji.push(t))},deselect:function(t){var e=t.parentNode[Se],i=Ji.indexOf(t);e&&e.options.multiDrag&&~i&&(he(t,e.options.selectedClass,!1),Ji.splice(i,1))}},eventProperties:function(){var t=this,e=[],i=[];return Ji.forEach((function(n){var s;e.push({multiDragElement:n,index:n.sortableIndex}),s=tn&&n!==qi?-1:tn?be(n,":not(."+t.options.selectedClass+")"):be(n),i.push({multiDragElement:n,index:s})})),{items:Ut(Ji),clones:[].concat(Qi),oldIndicies:e,newIndicies:i}},optionListeners:{multiDragKey:function(t){return"ctrl"===(t=t.toLowerCase())?t="Control":t.length>1&&(t=t.charAt(0).toUpperCase()+t.substr(1)),t}}})});window.Gantt=y,window.Chart=class{constructor(t,e){return function(t="line",e,i){return"axis-mixed"===t?(i.type="line",new Ft(e,i)):zt[t]?new zt[t](e,i):void console.error("Undefined chart type: "+t)}(e.type,t,e)}},window.Sortable=an,window.assignAttendanceOnAdd=function(){return function(t,e){fetch("/admin/api/attendance/".concat(t.item.dataset.attendanceId,"/sort"),{method:"POST",body:new URLSearchParams("newStatus=".concat(t.to.dataset.attendanceStatus,"&newIndex=").concat(t.newIndex))}).then((function(t){t.ok||alert("Ein Fehler ist aufgetreten! Bitte Seite neu laden.")})),e&&window.location.reload()}},window.assignAttendanceOnUpdate=function(){return function(t,e){fetch("/admin/api/attendance/".concat(t.item.dataset.attendanceId,"/sort"),{method:"POST",body:new URLSearchParams("newIndex=".concat(t.newIndex))}).then((function(t){t.ok||alert("Ein Fehler ist aufgetreten! Bitte Seite neu laden.")})),e&&window.location.reload()}}})()})();